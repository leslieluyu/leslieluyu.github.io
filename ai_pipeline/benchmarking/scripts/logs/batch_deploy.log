2023-03-14 22:09:55,729 - INFO - Starting batch deployment...
2023-03-14 22:09:55,731 - INFO - ------------- scenario: 1/5 ------------
2023-03-14 22:09:55,731 - INFO - Begin set_deployment_env of scenario : AMX_BF16 ...
2023-03-14 22:09:55,770 - INFO - Setting environment variables for scenario AMX_BF16...
2023-03-14 22:09:55,792 - INFO - Setting resource requests and limits for scenario AMX_BF16...
2023-03-14 22:09:55,811 - INFO - after patch_body wait for 30 seconds to enable the new pods
2023-03-14 22:10:25,821 - INFO - Waiting for 1 pods to be ready for scenario AMX_BF16...
2023-03-14 22:10:25,898 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:10:25,899 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:10:25,899 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 0.08 seconds
2023-03-14 22:10:35,934 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:10:35,934 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:10:35,934 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 10.11 seconds
2023-03-14 22:10:45,969 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:10:45,969 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:10:45,969 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 20.15 seconds
2023-03-14 22:10:56,003 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:10:56,003 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:10:56,004 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 30.18 seconds
2023-03-14 22:11:06,039 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:11:06,040 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:11:06,040 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 40.22 seconds
2023-03-14 22:11:16,067 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:11:16,067 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:11:16,067 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 50.25 seconds
2023-03-14 22:11:26,104 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:11:26,104 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:11:26,104 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 60.28 seconds
2023-03-14 22:11:36,141 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:11:36,142 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:11:36,142 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 70.32 seconds
2023-03-14 22:11:46,177 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:11:46,177 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:11:46,177 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 80.36 seconds
2023-03-14 22:11:56,213 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:11:56,213 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:11:56,213 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 90.39 seconds
2023-03-14 22:12:06,247 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:12:06,247 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:12:06,247 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 100.43 seconds
2023-03-14 22:12:16,284 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:12:16,284 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:12:16,284 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 110.46 seconds
2023-03-14 22:12:26,317 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:12:26,317 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:12:26,317 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 120.50 seconds
2023-03-14 22:12:36,352 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:12:36,352 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:12:36,352 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 130.53 seconds
2023-03-14 22:12:46,387 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:12:46,387 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:12:46,387 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 140.57 seconds
2023-03-14 22:12:56,423 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:12:56,423 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:12:56,423 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 150.60 seconds
2023-03-14 22:13:06,459 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:13:06,459 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:13:06,460 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 160.64 seconds
2023-03-14 22:13:16,494 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:13:16,494 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:13:16,494 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 170.67 seconds
2023-03-14 22:13:26,528 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:13:26,528 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:13:26,529 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 180.71 seconds
2023-03-14 22:13:36,564 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:13:36,564 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:13:36,564 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 190.74 seconds
2023-03-14 22:13:46,600 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:13:46,600 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:13:46,601 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 200.78 seconds
2023-03-14 22:13:56,636 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:13:56,637 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:13:56,637 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 210.82 seconds
2023-03-14 22:14:06,672 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:14:06,672 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:14:06,672 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 220.85 seconds
2023-03-14 22:14:16,707 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:14:16,707 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:14:16,707 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 230.89 seconds
2023-03-14 22:14:26,743 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:14:26,745 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:14:26,745 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 240.92 seconds
2023-03-14 22:14:36,781 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:14:36,781 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:14:36,781 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 250.96 seconds
2023-03-14 22:14:46,816 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:14:46,816 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:14:46,816 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 260.99 seconds
2023-03-14 22:14:56,852 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:14:56,852 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:14:56,852 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 271.03 seconds
2023-03-14 22:15:06,887 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:15:06,887 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:15:06,888 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 281.07 seconds
2023-03-14 22:15:16,923 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:15:16,923 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:15:16,923 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 291.10 seconds
2023-03-14 22:15:26,960 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:15:26,960 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:15:26,961 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 301.14 seconds
2023-03-14 22:15:36,996 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:15:36,997 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:15:36,997 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 311.18 seconds
2023-03-14 22:15:47,034 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:15:47,034 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:15:47,034 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 321.21 seconds
2023-03-14 22:15:57,071 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:15:57,071 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:15:57,071 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 331.25 seconds
2023-03-14 22:16:07,107 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:16:07,108 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:16:07,108 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 341.29 seconds
2023-03-14 22:16:17,143 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:16:17,144 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:16:17,144 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 351.32 seconds
2023-03-14 22:16:27,181 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:16:27,181 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:16:27,181 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 361.36 seconds
2023-03-14 22:16:37,217 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:16:37,217 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:16:37,217 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 371.40 seconds
2023-03-14 22:16:47,253 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:16:47,253 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:16:47,254 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 381.43 seconds
2023-03-14 22:16:57,290 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:16:57,290 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:16:57,290 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 391.47 seconds
2023-03-14 22:17:07,326 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:17:07,326 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:17:07,326 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 401.51 seconds
2023-03-14 22:17:17,353 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:17:17,353 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:17:17,353 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 411.53 seconds
2023-03-14 22:17:27,388 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:17:27,388 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:17:27,388 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 421.57 seconds
2023-03-14 22:17:37,423 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:17:37,424 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:17:37,424 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 431.60 seconds
2023-03-14 22:17:47,457 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:17:47,458 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:17:47,458 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 441.64 seconds
2023-03-14 22:17:57,493 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:17:57,494 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:17:57,494 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 451.67 seconds
2023-03-14 22:18:07,530 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:18:07,530 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:18:07,530 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 461.71 seconds
2023-03-14 22:18:17,567 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:18:17,567 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:18:17,567 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 471.75 seconds
2023-03-14 22:18:27,603 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:18:27,604 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:18:27,604 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 481.78 seconds
2023-03-14 22:18:37,640 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:18:37,640 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:18:37,640 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 491.82 seconds
2023-03-14 22:18:47,677 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:18:47,677 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:18:47,677 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 501.86 seconds
2023-03-14 22:18:57,712 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:18:57,712 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:18:57,712 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 511.89 seconds
2023-03-14 22:19:07,771 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:19:07,771 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:19:07,772 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 521.95 seconds
2023-03-14 22:19:17,807 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:19:17,807 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:19:17,807 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 531.99 seconds
2023-03-14 22:19:27,836 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:19:27,837 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:19:27,837 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 542.02 seconds
2023-03-14 22:19:37,871 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:19:37,871 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:19:37,872 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 552.05 seconds
2023-03-14 22:19:47,897 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:19:47,898 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:19:47,898 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 562.08 seconds
2023-03-14 22:19:57,933 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:19:57,933 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:19:57,933 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 572.11 seconds
2023-03-14 22:20:07,968 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:20:07,969 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:20:07,969 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 582.15 seconds
2023-03-14 22:20:18,003 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:20:18,004 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:20:18,004 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 592.18 seconds
2023-03-14 22:20:28,039 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:20:28,040 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:20:28,040 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 602.22 seconds
2023-03-14 22:20:38,075 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:20:38,075 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:20:38,075 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 612.25 seconds
2023-03-14 22:20:48,110 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:20:48,111 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:20:48,111 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 622.29 seconds
2023-03-14 22:20:58,147 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:20:58,148 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:20:58,148 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 632.33 seconds
2023-03-14 22:21:08,183 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:21:08,184 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:21:08,184 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 642.36 seconds
2023-03-14 22:21:18,220 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:21:18,221 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:21:18,221 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 652.40 seconds
2023-03-14 22:21:28,256 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:21:28,256 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:21:28,256 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 662.43 seconds
2023-03-14 22:21:38,291 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:21:38,291 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:21:38,292 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 672.47 seconds
2023-03-14 22:21:48,326 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:21:48,326 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:21:48,326 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 682.50 seconds
2023-03-14 22:21:58,361 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-plj6s status:Running
2023-03-14 22:21:58,362 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Pending
2023-03-14 22:21:58,362 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_BF16. Elapsed time: 692.54 seconds
2023-03-14 22:22:08,389 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:22:08,390 - INFO - All 1 pods are ready for scenario AMX_BF16
2023-03-14 22:22:08,391 - INFO - Finished scenario AMX_BF16
2023-03-14 22:22:08,391 - INFO - wait for 2m to get stable metrics ...
2023-03-14 22:24:08,491 - INFO - Running benchmarking script for scenario AMX_BF16...
2023-03-14 22:24:08,504 - INFO - TS=20230314222408
2023-03-14 22:24:10,424 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:24:10,424 - INFO - Reading package lists...
2023-03-14 22:24:10,424 - INFO - Building dependency tree...
2023-03-14 22:24:10,424 - INFO - Reading state information...
2023-03-14 22:24:10,424 - INFO - linux-tools-5.15.0-60-generic is already the newest version (5.15.0-60.66).
2023-03-14 22:24:10,424 - INFO - sysstat is already the newest version (12.5.2-2ubuntu0.1).
2023-03-14 22:24:10,424 - INFO - The following packages were automatically installed and are no longer required:
2023-03-14 22:24:10,425 - INFO - cgroupfs-mount libltdl7 pigz
2023-03-14 22:24:10,425 - INFO - Use 'sudo apt autoremove' to remove them.
2023-03-14 22:24:10,425 - INFO - 0 upgraded, 0 newly installed, 0 to remove and 44 not upgraded.
2023-03-14 22:24:10,425 - INFO - WARNING: apt does not have a stable CLI interface. Use with caution in scripts.
2023-03-14 22:24:11,513 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:24:11,513 - INFO - 
2023-03-14 22:24:12,563 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:24:12,564 - INFO - performance
2023-03-14 22:24:12,661 - INFO - Run on test AiPipeline_20230314222408_F18D_AMX_BF16_6
2023-03-14 22:24:12,661 - INFO - TT=AiPipeline_20230314222408_F18D_AMX_BF16_6,WRKDIR=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 22:24:12,667 - INFO - -----------loop num:1/3------------
2023-03-14 22:24:22,673 - INFO - 1.  fetch_emon.sh
2023-03-14 22:24:22,675 - INFO - pwd=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 22:24:23,971 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 22:24:23,972 - INFO - "ansible_facts": {
2023-03-14 22:24:23,972 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 22:24:23,972 - INFO - },
2023-03-14 22:24:23,972 - INFO - "changed": false,
2023-03-14 22:24:23,972 - INFO - "checksum": "1bb1c680bf42bce57bd33e9ee945d27bb8aeaafc",
2023-03-14 22:24:23,972 - INFO - "dest": "runemon.sh",
2023-03-14 22:24:23,972 - INFO - "gid": 1007,
2023-03-14 22:24:23,972 - INFO - "group": "ansible",
2023-03-14 22:24:23,972 - INFO - "mode": "0755",
2023-03-14 22:24:23,972 - INFO - "owner": "ansible",
2023-03-14 22:24:23,972 - INFO - "path": "runemon.sh",
2023-03-14 22:24:23,973 - INFO - "size": 452,
2023-03-14 22:24:23,973 - INFO - "state": "file",
2023-03-14 22:24:23,973 - INFO - "uid": 1006
2023-03-14 22:24:23,973 - INFO - }
2023-03-14 22:24:25,369 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 22:24:25,369 - INFO - "ansible_facts": {
2023-03-14 22:24:25,369 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 22:24:25,369 - INFO - },
2023-03-14 22:24:25,369 - INFO - "changed": false,
2023-03-14 22:24:25,369 - INFO - "checksum": "0b7ce1d178a191ee4962273d5bcbcac8b825066d",
2023-03-14 22:24:25,370 - INFO - "dest": "sapphirerapids_server_events_private.txt",
2023-03-14 22:24:25,370 - INFO - "gid": 1007,
2023-03-14 22:24:25,370 - INFO - "group": "ansible",
2023-03-14 22:24:25,370 - INFO - "mode": "0664",
2023-03-14 22:24:25,370 - INFO - "owner": "ansible",
2023-03-14 22:24:25,370 - INFO - "path": "sapphirerapids_server_events_private.txt",
2023-03-14 22:24:25,370 - INFO - "size": 23423,
2023-03-14 22:24:25,370 - INFO - "state": "file",
2023-03-14 22:24:25,370 - INFO - "uid": 1006
2023-03-14 22:24:25,370 - INFO - }
2023-03-14 22:24:26,429 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:24:26,430 - INFO - 
2023-03-14 22:24:27,515 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:24:27,515 - INFO - 
2023-03-14 22:24:27,614 - INFO - Sleep 5 seconds then collect emon data for 30 seconds
2023-03-14 22:24:32,617 - INFO - Collecting 30 seconds sar data background
2023-03-14 22:24:34,590 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:24:34,590 - INFO - 
2023-03-14 22:24:36,635 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:24:36,635 - INFO - 
2023-03-14 22:24:38,695 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:24:38,695 - INFO - 
2023-03-14 22:24:40,756 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:24:40,757 - INFO - 
2023-03-14 22:24:40,858 - INFO - Collecting EMON data
2023-03-14 22:25:12,398 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:25:12,398 - INFO - Usage: sep_vars.sh [emon_api]
2023-03-14 22:25:12,399 - INFO - PATH=/opt/intel/sep/bin64:/opt/intel/sep/android_target:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2023-03-14 22:25:12,399 - INFO - CPATH=/opt/intel/sep/config/emon_api:
2023-03-14 22:25:12,399 - INFO - LIBRARY_PATH=/opt/intel/sep/lib64:
2023-03-14 22:25:12,399 - INFO - LD_LIBRARY_PATH=
2023-03-14 22:25:12,399 - INFO - SEP_BASE_DIR=/opt/intel/sep/bin64
2023-03-14 22:25:12,399 - INFO - SEP is currently installed under /opt/intel/sep/bin64
2023-03-14 22:25:12,399 - INFO - EMON collector successfully stopped.
2023-03-14 22:25:12,502 - INFO - Sleep another 30 seconds to make sure the previous run exit
2023-03-14 22:25:42,506 - INFO - Copy dat files
2023-03-14 22:25:43,637 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:25:43,638 - INFO - "changed": true,
2023-03-14 22:25:43,638 - INFO - "checksum": "62cf8528f8c85039c6f5cc1de88198f4420d07f3",
2023-03-14 22:25:43,638 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/cpuutil.log",
2023-03-14 22:25:43,638 - INFO - "md5sum": "3d21751b009d4d81ce19ac14e44e6e7b",
2023-03-14 22:25:43,638 - INFO - "remote_checksum": "62cf8528f8c85039c6f5cc1de88198f4420d07f3",
2023-03-14 22:25:43,638 - INFO - "remote_md5sum": null
2023-03-14 22:25:43,638 - INFO - }
2023-03-14 22:25:44,804 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:25:44,805 - INFO - "changed": true,
2023-03-14 22:25:44,805 - INFO - "checksum": "32e5b5e14868054a6f54d1add4411094bccb0eea",
2023-03-14 22:25:44,805 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/diskutil.log",
2023-03-14 22:25:44,805 - INFO - "md5sum": "3b8b989201f5258d62cf653e69025049",
2023-03-14 22:25:44,805 - INFO - "remote_checksum": "32e5b5e14868054a6f54d1add4411094bccb0eea",
2023-03-14 22:25:44,805 - INFO - "remote_md5sum": null
2023-03-14 22:25:44,805 - INFO - }
2023-03-14 22:25:45,903 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:25:45,904 - INFO - "changed": true,
2023-03-14 22:25:45,904 - INFO - "checksum": "9f3bb1185f826933296b04d90a2d571159eca787",
2023-03-14 22:25:45,904 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/netutil.log",
2023-03-14 22:25:45,904 - INFO - "md5sum": "bf6666c3edadbf0d563a42578dcf46a5",
2023-03-14 22:25:45,904 - INFO - "remote_checksum": "9f3bb1185f826933296b04d90a2d571159eca787",
2023-03-14 22:25:45,904 - INFO - "remote_md5sum": null
2023-03-14 22:25:45,904 - INFO - }
2023-03-14 22:25:47,060 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:25:47,060 - INFO - "changed": true,
2023-03-14 22:25:47,060 - INFO - "checksum": "9dd3b24ca6ee06698506ca7fff6a2feca4fd6df9",
2023-03-14 22:25:47,060 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/top.log",
2023-03-14 22:25:47,061 - INFO - "md5sum": "68174c549efbb63da3b8c5349d3d9080",
2023-03-14 22:25:47,061 - INFO - "remote_checksum": "9dd3b24ca6ee06698506ca7fff6a2feca4fd6df9",
2023-03-14 22:25:47,061 - INFO - "remote_md5sum": null
2023-03-14 22:25:47,061 - INFO - }
2023-03-14 22:25:48,162 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:25:48,162 - INFO - "changed": true,
2023-03-14 22:25:48,162 - INFO - "checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 22:25:48,162 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-v.dat",
2023-03-14 22:25:48,162 - INFO - "md5sum": "9ed6ca61f164c3a1ddac82b3adb8e41f",
2023-03-14 22:25:48,162 - INFO - "remote_checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 22:25:48,162 - INFO - "remote_md5sum": null
2023-03-14 22:25:48,163 - INFO - }
2023-03-14 22:25:49,246 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:25:49,246 - INFO - "changed": true,
2023-03-14 22:25:49,247 - INFO - "checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 22:25:49,247 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-M.dat",
2023-03-14 22:25:49,247 - INFO - "md5sum": "82b2e5d1d33c2feb6e5d5290b113dd3f",
2023-03-14 22:25:49,247 - INFO - "remote_checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 22:25:49,247 - INFO - "remote_md5sum": null
2023-03-14 22:25:49,247 - INFO - }
2023-03-14 22:25:50,831 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:25:50,831 - INFO - "changed": true,
2023-03-14 22:25:50,831 - INFO - "checksum": "478808ec37eda2115af40e1a03a0c8a9198a26dc",
2023-03-14 22:25:50,831 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon.dat",
2023-03-14 22:25:50,832 - INFO - "md5sum": "aeb9d101f5e340b1decb35c6e06b5f04",
2023-03-14 22:25:50,832 - INFO - "remote_checksum": "478808ec37eda2115af40e1a03a0c8a9198a26dc",
2023-03-14 22:25:50,832 - INFO - "remote_md5sum": null
2023-03-14 22:25:50,832 - INFO - }
2023-03-14 22:25:50,933 - INFO - 2. fetch the matrics of ai_pipeline
2023-03-14 22:25:50,934 - INFO - 3.  collect the result
2023-03-14 22:25:51,109 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(rate(container_cpu_usage_seconds_total{namespace="default", container!=""}[2m])[2m:])
2023-03-14 22:25:51,110 - INFO - metric_name is: cpu_usage
2023-03-14 22:25:51,110 - INFO - result is: [{'metric': {'container': 'ei-fss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podf765b16c_07f8_4261_9b64_3517dc6bafb7.slice/cri-containerd-88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-file-stream-service:2022WW47', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt', 'service': 'kubelet'}, 'value': [1678857951.094, '0.0758351722222263']}, {'metric': {'container': 'ei-gws', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podaf221d52_33c6_40a0_b6bf_e5e2bc7b88db.slice/cri-containerd-870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada.scope', 'image': 'ccr-registry.caas.intel.com/cnbench/ei-gateway-server:2022WW51-ws-8080', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9', 'service': 'kubelet'}, 'value': [1678857951.094, '0.0012056500000003072']}, {'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod2f24af9d_8065_4692_981c_20c34596c8fa.slice/cri-containerd-be3c21ad512d16fff2e77c468c4c08b32078e715fcc8435a1ace91b5907dd77a.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-inference-service-tensorflow:2022WW49', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'be3c21ad512d16fff2e77c468c4c08b32078e715fcc8435a1ace91b5907dd77a', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w', 'service': 'kubelet'}, 'value': [1678857951.094, '0.40609825457675924']}, {'metric': {'container': 'ei-wss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podd781997c_c6e4_4a9a_8814_f1a5e364edb4.slice/cri-containerd-d43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-websocket-server:2022WW51', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'd43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz', 'service': 'kubelet'}, 'value': [1678857951.094, '0.004133027777778705']}, {'metric': {'container': 'nfs-subdir-external-provisioner', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod008ca2f8_cd34_4bb5_9e75_b46ec5ce9a23.slice/cri-containerd-710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4.scope', 'image': 'k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg', 'service': 'kubelet'}, 'value': [1678857951.094, '0.0010868999999994835']}, {'metric': {'container': 'redis', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod0d8f249f_8e44_4dae_82d3_618b15befd15.slice/cri-containerd-0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e.scope', 'image': 'docker.io/library/redis:6.0', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-redis-deployment-68df56c9d5-9kt42', 'service': 'kubelet'}, 'value': [1678857951.094, '0.00549463055555053']}, {'metric': {'container': 'tmp-shell', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod9cbe7477_0ea6_463d_8c1e_33eb5efda051.slice/cri-containerd-9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9.scope', 'image': 'docker.io/nicolaka/netshoot:latest', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'tmp-shell', 'service': 'kubelet'}, 'value': [1678857951.094, '0']}]
2023-03-14 22:25:51,110 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=sum(container_memory_working_set_bytes{namespace="default",container!="", image!=""}) by (pod)
2023-03-14 22:25:51,110 - INFO - metric_name is: memory_usage
2023-03-14 22:25:51,110 - INFO - result is: [{'metric': {'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt'}, 'value': [1678857951.098, '386007040']}, {'metric': {'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9'}, 'value': [1678857951.098, '56774656']}, {'metric': {'pod': 'ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w'}, 'value': [1678857951.098, '518430720']}, {'metric': {'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz'}, 'value': [1678857951.098, '5093302272']}, {'metric': {'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg'}, 'value': [1678857951.098, '15949824']}, {'metric': {'pod': 'ei-redis-deployment-68df56c9d5-9kt42'}, 'value': [1678857951.098, '2443542528']}, {'metric': {'pod': 'tmp-shell'}, 'value': [1678857951.098, '847872']}]
2023-03-14 22:25:51,110 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_infer_fps{namespace="default"}[2m])
2023-03-14 22:25:51,110 - INFO - metric_name is: ei_infer_fps
2023-03-14 22:25:51,110 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.43:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678857951.102, '28.411602919788386']}]
2023-03-14 22:25:51,110 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_drop_fps{namespace="default"}[2m])
2023-03-14 22:25:51,111 - INFO - metric_name is: ei_drop_fps
2023-03-14 22:25:51,111 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.43:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678857951.106, '0']}]
2023-03-14 22:25:51,111 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_scale_ratio{namespace="default"}[2m])
2023-03-14 22:25:51,111 - INFO - metric_name is: ei_scale_ratio
2023-03-14 22:25:51,111 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.43:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678857951.11, '0.9188641686576947']}]
2023-03-14 22:25:51,111 - INFO - Results written to metrics/F18D_AMX_BF16_metrics_20230314_222551.txt
2023-03-14 22:25:51,178 - INFO - sleep 120 seconds for the next round ...
2023-03-14 22:27:51,181 - INFO - -----------loop num:2/3------------
2023-03-14 22:28:01,188 - INFO - 1.  fetch_emon.sh
2023-03-14 22:28:01,189 - INFO - pwd=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 22:28:03,027 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 22:28:03,028 - INFO - "ansible_facts": {
2023-03-14 22:28:03,028 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 22:28:03,028 - INFO - },
2023-03-14 22:28:03,028 - INFO - "changed": false,
2023-03-14 22:28:03,028 - INFO - "checksum": "1bb1c680bf42bce57bd33e9ee945d27bb8aeaafc",
2023-03-14 22:28:03,028 - INFO - "dest": "runemon.sh",
2023-03-14 22:28:03,028 - INFO - "gid": 1007,
2023-03-14 22:28:03,029 - INFO - "group": "ansible",
2023-03-14 22:28:03,029 - INFO - "mode": "0755",
2023-03-14 22:28:03,029 - INFO - "owner": "ansible",
2023-03-14 22:28:03,029 - INFO - "path": "runemon.sh",
2023-03-14 22:28:03,029 - INFO - "size": 452,
2023-03-14 22:28:03,029 - INFO - "state": "file",
2023-03-14 22:28:03,029 - INFO - "uid": 1006
2023-03-14 22:28:03,029 - INFO - }
2023-03-14 22:28:04,422 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 22:28:04,422 - INFO - "ansible_facts": {
2023-03-14 22:28:04,422 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 22:28:04,422 - INFO - },
2023-03-14 22:28:04,423 - INFO - "changed": false,
2023-03-14 22:28:04,423 - INFO - "checksum": "0b7ce1d178a191ee4962273d5bcbcac8b825066d",
2023-03-14 22:28:04,423 - INFO - "dest": "sapphirerapids_server_events_private.txt",
2023-03-14 22:28:04,423 - INFO - "gid": 1007,
2023-03-14 22:28:04,423 - INFO - "group": "ansible",
2023-03-14 22:28:04,423 - INFO - "mode": "0664",
2023-03-14 22:28:04,423 - INFO - "owner": "ansible",
2023-03-14 22:28:04,423 - INFO - "path": "sapphirerapids_server_events_private.txt",
2023-03-14 22:28:04,423 - INFO - "size": 23423,
2023-03-14 22:28:04,423 - INFO - "state": "file",
2023-03-14 22:28:04,423 - INFO - "uid": 1006
2023-03-14 22:28:04,423 - INFO - }
2023-03-14 22:28:05,493 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:28:05,493 - INFO - 
2023-03-14 22:28:06,538 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:28:06,538 - INFO - 
2023-03-14 22:28:06,635 - INFO - Sleep 5 seconds then collect emon data for 30 seconds
2023-03-14 22:28:11,639 - INFO - Collecting 30 seconds sar data background
2023-03-14 22:28:13,597 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:28:13,597 - INFO - 
2023-03-14 22:28:15,714 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:28:15,714 - INFO - 
2023-03-14 22:28:17,769 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:28:17,769 - INFO - 
2023-03-14 22:28:19,816 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:28:19,816 - INFO - 
2023-03-14 22:28:19,912 - INFO - Collecting EMON data
2023-03-14 22:28:51,390 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:28:51,390 - INFO - Usage: sep_vars.sh [emon_api]
2023-03-14 22:28:51,391 - INFO - PATH=/opt/intel/sep/bin64:/opt/intel/sep/android_target:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2023-03-14 22:28:51,391 - INFO - CPATH=/opt/intel/sep/config/emon_api:
2023-03-14 22:28:51,391 - INFO - LIBRARY_PATH=/opt/intel/sep/lib64:
2023-03-14 22:28:51,391 - INFO - LD_LIBRARY_PATH=
2023-03-14 22:28:51,391 - INFO - SEP_BASE_DIR=/opt/intel/sep/bin64
2023-03-14 22:28:51,391 - INFO - SEP is currently installed under /opt/intel/sep/bin64
2023-03-14 22:28:51,391 - INFO - EMON collector successfully stopped.
2023-03-14 22:28:51,494 - INFO - Sleep another 30 seconds to make sure the previous run exit
2023-03-14 22:29:21,498 - INFO - Copy dat files
2023-03-14 22:29:22,512 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:29:22,512 - INFO - "changed": true,
2023-03-14 22:29:22,513 - INFO - "checksum": "6c7b82d89e0b61c99c5a1f1ee53fcddadd9b4bbe",
2023-03-14 22:29:22,513 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/cpuutil.log",
2023-03-14 22:29:22,513 - INFO - "md5sum": "2fc1ffb5d40e26b3010b096393b753f9",
2023-03-14 22:29:22,513 - INFO - "remote_checksum": "6c7b82d89e0b61c99c5a1f1ee53fcddadd9b4bbe",
2023-03-14 22:29:22,513 - INFO - "remote_md5sum": null
2023-03-14 22:29:22,513 - INFO - }
2023-03-14 22:29:23,615 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:29:23,615 - INFO - "changed": true,
2023-03-14 22:29:23,615 - INFO - "checksum": "b8895ad84a93cfafd45f0b68ae62a6c40bca9466",
2023-03-14 22:29:23,616 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/diskutil.log",
2023-03-14 22:29:23,616 - INFO - "md5sum": "cdf66e461daa7b5edb0aa50dac1cb8d8",
2023-03-14 22:29:23,616 - INFO - "remote_checksum": "b8895ad84a93cfafd45f0b68ae62a6c40bca9466",
2023-03-14 22:29:23,616 - INFO - "remote_md5sum": null
2023-03-14 22:29:23,616 - INFO - }
2023-03-14 22:29:24,728 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:29:24,729 - INFO - "changed": true,
2023-03-14 22:29:24,729 - INFO - "checksum": "f263a1639c9f96f13b4d0e4c9fb758279ba7c6f7",
2023-03-14 22:29:24,729 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/netutil.log",
2023-03-14 22:29:24,729 - INFO - "md5sum": "9039b6dacccd907fce9e217544c8cb1b",
2023-03-14 22:29:24,729 - INFO - "remote_checksum": "f263a1639c9f96f13b4d0e4c9fb758279ba7c6f7",
2023-03-14 22:29:24,729 - INFO - "remote_md5sum": null
2023-03-14 22:29:24,729 - INFO - }
2023-03-14 22:29:25,863 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:29:25,864 - INFO - "changed": true,
2023-03-14 22:29:25,864 - INFO - "checksum": "e82b9d986af0a01d3e4c0395fdd2df03a25e8145",
2023-03-14 22:29:25,864 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/top.log",
2023-03-14 22:29:25,864 - INFO - "md5sum": "5435fa699a24e0e04e44116bbdb8c388",
2023-03-14 22:29:25,864 - INFO - "remote_checksum": "e82b9d986af0a01d3e4c0395fdd2df03a25e8145",
2023-03-14 22:29:25,864 - INFO - "remote_md5sum": null
2023-03-14 22:29:25,864 - INFO - }
2023-03-14 22:29:26,950 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:29:26,951 - INFO - "changed": true,
2023-03-14 22:29:26,951 - INFO - "checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 22:29:26,951 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-v.dat",
2023-03-14 22:29:26,951 - INFO - "md5sum": "9ed6ca61f164c3a1ddac82b3adb8e41f",
2023-03-14 22:29:26,951 - INFO - "remote_checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 22:29:26,951 - INFO - "remote_md5sum": null
2023-03-14 22:29:26,951 - INFO - }
2023-03-14 22:29:28,040 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:29:28,040 - INFO - "changed": true,
2023-03-14 22:29:28,040 - INFO - "checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 22:29:28,040 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-M.dat",
2023-03-14 22:29:28,040 - INFO - "md5sum": "82b2e5d1d33c2feb6e5d5290b113dd3f",
2023-03-14 22:29:28,040 - INFO - "remote_checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 22:29:28,040 - INFO - "remote_md5sum": null
2023-03-14 22:29:28,041 - INFO - }
2023-03-14 22:29:29,636 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:29:29,637 - INFO - "changed": true,
2023-03-14 22:29:29,637 - INFO - "checksum": "d87970b98c585b68ec11aac29cb143e5a3c707e3",
2023-03-14 22:29:29,637 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon.dat",
2023-03-14 22:29:29,637 - INFO - "md5sum": "d6f881f9b035721f513c4f84b46c4a6c",
2023-03-14 22:29:29,637 - INFO - "remote_checksum": "d87970b98c585b68ec11aac29cb143e5a3c707e3",
2023-03-14 22:29:29,637 - INFO - "remote_md5sum": null
2023-03-14 22:29:29,637 - INFO - }
2023-03-14 22:29:29,740 - INFO - 2. fetch the matrics of ai_pipeline
2023-03-14 22:29:29,740 - INFO - 3.  collect the result
2023-03-14 22:29:29,914 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(rate(container_cpu_usage_seconds_total{namespace="default", container!=""}[2m])[2m:])
2023-03-14 22:29:29,915 - INFO - metric_name is: cpu_usage
2023-03-14 22:29:29,915 - INFO - result is: [{'metric': {'container': 'ei-fss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podf765b16c_07f8_4261_9b64_3517dc6bafb7.slice/cri-containerd-88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-file-stream-service:2022WW47', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt', 'service': 'kubelet'}, 'value': [1678858169.9, '0.0750443333333654']}, {'metric': {'container': 'ei-gws', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podaf221d52_33c6_40a0_b6bf_e5e2bc7b88db.slice/cri-containerd-870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada.scope', 'image': 'ccr-registry.caas.intel.com/cnbench/ei-gateway-server:2022WW51-ws-8080', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9', 'service': 'kubelet'}, 'value': [1678858169.9, '0.0013071416666668432']}, {'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod2f24af9d_8065_4692_981c_20c34596c8fa.slice/cri-containerd-be3c21ad512d16fff2e77c468c4c08b32078e715fcc8435a1ace91b5907dd77a.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-inference-service-tensorflow:2022WW49', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'be3c21ad512d16fff2e77c468c4c08b32078e715fcc8435a1ace91b5907dd77a', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w', 'service': 'kubelet'}, 'value': [1678858169.9, '0.4127935555555555']}, {'metric': {'container': 'ei-wss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podd781997c_c6e4_4a9a_8814_f1a5e364edb4.slice/cri-containerd-d43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-websocket-server:2022WW51', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'd43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz', 'service': 'kubelet'}, 'value': [1678858169.9, '0.00418310277777386']}, {'metric': {'container': 'nfs-subdir-external-provisioner', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod008ca2f8_cd34_4bb5_9e75_b46ec5ce9a23.slice/cri-containerd-710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4.scope', 'image': 'k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg', 'service': 'kubelet'}, 'value': [1678858169.9, '0.0010259861111118576']}, {'metric': {'container': 'redis', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod0d8f249f_8e44_4dae_82d3_618b15befd15.slice/cri-containerd-0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e.scope', 'image': 'docker.io/library/redis:6.0', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-redis-deployment-68df56c9d5-9kt42', 'service': 'kubelet'}, 'value': [1678858169.9, '0.00569503611110728']}, {'metric': {'container': 'tmp-shell', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod9cbe7477_0ea6_463d_8c1e_33eb5efda051.slice/cri-containerd-9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9.scope', 'image': 'docker.io/nicolaka/netshoot:latest', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'tmp-shell', 'service': 'kubelet'}, 'value': [1678858169.9, '0']}]
2023-03-14 22:29:29,915 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=sum(container_memory_working_set_bytes{namespace="default",container!="", image!=""}) by (pod)
2023-03-14 22:29:29,915 - INFO - metric_name is: memory_usage
2023-03-14 22:29:29,915 - INFO - result is: [{'metric': {'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt'}, 'value': [1678858169.904, '386134016']}, {'metric': {'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9'}, 'value': [1678858169.904, '56774656']}, {'metric': {'pod': 'ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w'}, 'value': [1678858169.904, '518430720']}, {'metric': {'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz'}, 'value': [1678858169.904, '5093322752']}, {'metric': {'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg'}, 'value': [1678858169.904, '15298560']}, {'metric': {'pod': 'ei-redis-deployment-68df56c9d5-9kt42'}, 'value': [1678858169.904, '2443816960']}, {'metric': {'pod': 'tmp-shell'}, 'value': [1678858169.904, '847872']}]
2023-03-14 22:29:29,915 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_infer_fps{namespace="default"}[2m])
2023-03-14 22:29:29,915 - INFO - metric_name is: ei_infer_fps
2023-03-14 22:29:29,915 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.43:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678858169.908, '28.400014559246948']}]
2023-03-14 22:29:29,916 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_drop_fps{namespace="default"}[2m])
2023-03-14 22:29:29,916 - INFO - metric_name is: ei_drop_fps
2023-03-14 22:29:29,916 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.43:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678858169.912, '0']}]
2023-03-14 22:29:29,916 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_scale_ratio{namespace="default"}[2m])
2023-03-14 22:29:29,916 - INFO - metric_name is: ei_scale_ratio
2023-03-14 22:29:29,916 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.43:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678858169.915, '0.9184893876463919']}]
2023-03-14 22:29:29,916 - INFO - Results written to metrics/F18D_AMX_BF16_metrics_20230314_222929.txt
2023-03-14 22:29:29,985 - INFO - sleep 120 seconds for the next round ...
2023-03-14 22:31:29,989 - INFO - -----------loop num:3/3------------
2023-03-14 22:31:40,026 - INFO - 1.  fetch_emon.sh
2023-03-14 22:31:40,028 - INFO - pwd=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 22:31:41,864 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 22:31:41,864 - INFO - "ansible_facts": {
2023-03-14 22:31:41,864 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 22:31:41,865 - INFO - },
2023-03-14 22:31:41,865 - INFO - "changed": false,
2023-03-14 22:31:41,865 - INFO - "checksum": "1bb1c680bf42bce57bd33e9ee945d27bb8aeaafc",
2023-03-14 22:31:41,865 - INFO - "dest": "runemon.sh",
2023-03-14 22:31:41,865 - INFO - "gid": 1007,
2023-03-14 22:31:41,865 - INFO - "group": "ansible",
2023-03-14 22:31:41,865 - INFO - "mode": "0755",
2023-03-14 22:31:41,865 - INFO - "owner": "ansible",
2023-03-14 22:31:41,865 - INFO - "path": "runemon.sh",
2023-03-14 22:31:41,865 - INFO - "size": 452,
2023-03-14 22:31:41,865 - INFO - "state": "file",
2023-03-14 22:31:41,865 - INFO - "uid": 1006
2023-03-14 22:31:41,866 - INFO - }
2023-03-14 22:31:43,307 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 22:31:43,307 - INFO - "ansible_facts": {
2023-03-14 22:31:43,307 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 22:31:43,308 - INFO - },
2023-03-14 22:31:43,308 - INFO - "changed": false,
2023-03-14 22:31:43,308 - INFO - "checksum": "0b7ce1d178a191ee4962273d5bcbcac8b825066d",
2023-03-14 22:31:43,308 - INFO - "dest": "sapphirerapids_server_events_private.txt",
2023-03-14 22:31:43,308 - INFO - "gid": 1007,
2023-03-14 22:31:43,308 - INFO - "group": "ansible",
2023-03-14 22:31:43,308 - INFO - "mode": "0664",
2023-03-14 22:31:43,308 - INFO - "owner": "ansible",
2023-03-14 22:31:43,308 - INFO - "path": "sapphirerapids_server_events_private.txt",
2023-03-14 22:31:43,308 - INFO - "size": 23423,
2023-03-14 22:31:43,308 - INFO - "state": "file",
2023-03-14 22:31:43,308 - INFO - "uid": 1006
2023-03-14 22:31:43,308 - INFO - }
2023-03-14 22:31:44,296 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:31:44,296 - INFO - 
2023-03-14 22:31:45,332 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:31:45,332 - INFO - 
2023-03-14 22:31:45,433 - INFO - Sleep 5 seconds then collect emon data for 30 seconds
2023-03-14 22:31:50,436 - INFO - Collecting 30 seconds sar data background
2023-03-14 22:31:52,390 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:31:52,390 - INFO - 
2023-03-14 22:31:54,427 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:31:54,427 - INFO - 
2023-03-14 22:31:56,479 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:31:56,479 - INFO - 
2023-03-14 22:31:58,537 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:31:58,537 - INFO - 
2023-03-14 22:31:58,631 - INFO - Collecting EMON data
2023-03-14 22:32:30,192 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:32:30,192 - INFO - Usage: sep_vars.sh [emon_api]
2023-03-14 22:32:30,192 - INFO - PATH=/opt/intel/sep/bin64:/opt/intel/sep/android_target:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2023-03-14 22:32:30,192 - INFO - CPATH=/opt/intel/sep/config/emon_api:
2023-03-14 22:32:30,193 - INFO - LIBRARY_PATH=/opt/intel/sep/lib64:
2023-03-14 22:32:30,193 - INFO - LD_LIBRARY_PATH=
2023-03-14 22:32:30,193 - INFO - SEP_BASE_DIR=/opt/intel/sep/bin64
2023-03-14 22:32:30,193 - INFO - SEP is currently installed under /opt/intel/sep/bin64
2023-03-14 22:32:30,193 - INFO - EMON collector successfully stopped.
2023-03-14 22:32:30,301 - INFO - Sleep another 30 seconds to make sure the previous run exit
2023-03-14 22:33:00,304 - INFO - Copy dat files
2023-03-14 22:33:01,313 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:33:01,313 - INFO - "changed": true,
2023-03-14 22:33:01,314 - INFO - "checksum": "692e4eda02a109454c9f5a4574f40beb7e66443d",
2023-03-14 22:33:01,314 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/cpuutil.log",
2023-03-14 22:33:01,314 - INFO - "md5sum": "e2a4fd8c06c7c05512c787996590a937",
2023-03-14 22:33:01,314 - INFO - "remote_checksum": "692e4eda02a109454c9f5a4574f40beb7e66443d",
2023-03-14 22:33:01,314 - INFO - "remote_md5sum": null
2023-03-14 22:33:01,314 - INFO - }
2023-03-14 22:33:02,441 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:33:02,442 - INFO - "changed": true,
2023-03-14 22:33:02,442 - INFO - "checksum": "3129f4f1f7d078228d3f330af7669f75f182fb26",
2023-03-14 22:33:02,442 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/diskutil.log",
2023-03-14 22:33:02,442 - INFO - "md5sum": "8543a5eeed910812a520ab40fc86e43e",
2023-03-14 22:33:02,442 - INFO - "remote_checksum": "3129f4f1f7d078228d3f330af7669f75f182fb26",
2023-03-14 22:33:02,442 - INFO - "remote_md5sum": null
2023-03-14 22:33:02,442 - INFO - }
2023-03-14 22:33:03,555 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:33:03,555 - INFO - "changed": true,
2023-03-14 22:33:03,555 - INFO - "checksum": "b854b82ffa05da826156a72c9e231c141c7624d0",
2023-03-14 22:33:03,555 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/netutil.log",
2023-03-14 22:33:03,555 - INFO - "md5sum": "4b0d5494985e6a416478691588263347",
2023-03-14 22:33:03,555 - INFO - "remote_checksum": "b854b82ffa05da826156a72c9e231c141c7624d0",
2023-03-14 22:33:03,555 - INFO - "remote_md5sum": null
2023-03-14 22:33:03,556 - INFO - }
2023-03-14 22:33:04,742 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:33:04,742 - INFO - "changed": true,
2023-03-14 22:33:04,742 - INFO - "checksum": "592fb7211bbffc950e78a6e9d8e5b0a34e35525b",
2023-03-14 22:33:04,742 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/top.log",
2023-03-14 22:33:04,742 - INFO - "md5sum": "8863182ba4fb400d7cdd1dc998623f44",
2023-03-14 22:33:04,742 - INFO - "remote_checksum": "592fb7211bbffc950e78a6e9d8e5b0a34e35525b",
2023-03-14 22:33:04,742 - INFO - "remote_md5sum": null
2023-03-14 22:33:04,742 - INFO - }
2023-03-14 22:33:05,826 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:33:05,826 - INFO - "changed": true,
2023-03-14 22:33:05,826 - INFO - "checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 22:33:05,826 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-v.dat",
2023-03-14 22:33:05,826 - INFO - "md5sum": "9ed6ca61f164c3a1ddac82b3adb8e41f",
2023-03-14 22:33:05,826 - INFO - "remote_checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 22:33:05,826 - INFO - "remote_md5sum": null
2023-03-14 22:33:05,826 - INFO - }
2023-03-14 22:33:06,953 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:33:06,954 - INFO - "changed": true,
2023-03-14 22:33:06,954 - INFO - "checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 22:33:06,954 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-M.dat",
2023-03-14 22:33:06,954 - INFO - "md5sum": "82b2e5d1d33c2feb6e5d5290b113dd3f",
2023-03-14 22:33:06,954 - INFO - "remote_checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 22:33:06,954 - INFO - "remote_md5sum": null
2023-03-14 22:33:06,954 - INFO - }
2023-03-14 22:33:08,517 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:33:08,517 - INFO - "changed": true,
2023-03-14 22:33:08,517 - INFO - "checksum": "7fb526657090281a0f3438d3780401d0ec2cd46c",
2023-03-14 22:33:08,517 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon.dat",
2023-03-14 22:33:08,518 - INFO - "md5sum": "7478e91af78cc309d9c2b96e1cb88b61",
2023-03-14 22:33:08,518 - INFO - "remote_checksum": "7fb526657090281a0f3438d3780401d0ec2cd46c",
2023-03-14 22:33:08,518 - INFO - "remote_md5sum": null
2023-03-14 22:33:08,518 - INFO - }
2023-03-14 22:33:08,614 - INFO - 2. fetch the matrics of ai_pipeline
2023-03-14 22:33:08,615 - INFO - 3.  collect the result
2023-03-14 22:33:08,788 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(rate(container_cpu_usage_seconds_total{namespace="default", container!=""}[2m])[2m:])
2023-03-14 22:33:08,788 - INFO - metric_name is: cpu_usage
2023-03-14 22:33:08,788 - INFO - result is: [{'metric': {'container': 'ei-fss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podf765b16c_07f8_4261_9b64_3517dc6bafb7.slice/cri-containerd-88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-file-stream-service:2022WW47', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt', 'service': 'kubelet'}, 'value': [1678858388.774, '0.06860523333333629']}, {'metric': {'container': 'ei-gws', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podaf221d52_33c6_40a0_b6bf_e5e2bc7b88db.slice/cri-containerd-870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada.scope', 'image': 'ccr-registry.caas.intel.com/cnbench/ei-gateway-server:2022WW51-ws-8080', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9', 'service': 'kubelet'}, 'value': [1678858388.774, '0.0011490333333325805']}, {'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod2f24af9d_8065_4692_981c_20c34596c8fa.slice/cri-containerd-be3c21ad512d16fff2e77c468c4c08b32078e715fcc8435a1ace91b5907dd77a.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-inference-service-tensorflow:2022WW49', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'be3c21ad512d16fff2e77c468c4c08b32078e715fcc8435a1ace91b5907dd77a', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w', 'service': 'kubelet'}, 'value': [1678858388.774, '0.41343810555555544']}, {'metric': {'container': 'ei-wss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podd781997c_c6e4_4a9a_8814_f1a5e364edb4.slice/cri-containerd-d43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-websocket-server:2022WW51', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'd43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz', 'service': 'kubelet'}, 'value': [1678858388.774, '0.0038316388888941016']}, {'metric': {'container': 'nfs-subdir-external-provisioner', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod008ca2f8_cd34_4bb5_9e75_b46ec5ce9a23.slice/cri-containerd-710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4.scope', 'image': 'k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg', 'service': 'kubelet'}, 'value': [1678858388.774, '0.0010815194444439334']}, {'metric': {'container': 'redis', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod0d8f249f_8e44_4dae_82d3_618b15befd15.slice/cri-containerd-0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e.scope', 'image': 'docker.io/library/redis:6.0', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-redis-deployment-68df56c9d5-9kt42', 'service': 'kubelet'}, 'value': [1678858388.774, '0.005952266666670564']}, {'metric': {'container': 'tmp-shell', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod9cbe7477_0ea6_463d_8c1e_33eb5efda051.slice/cri-containerd-9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9.scope', 'image': 'docker.io/nicolaka/netshoot:latest', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'tmp-shell', 'service': 'kubelet'}, 'value': [1678858388.774, '0']}]
2023-03-14 22:33:08,788 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=sum(container_memory_working_set_bytes{namespace="default",container!="", image!=""}) by (pod)
2023-03-14 22:33:08,789 - INFO - metric_name is: memory_usage
2023-03-14 22:33:08,789 - INFO - result is: [{'metric': {'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt'}, 'value': [1678858388.778, '386105344']}, {'metric': {'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9'}, 'value': [1678858388.778, '56774656']}, {'metric': {'pod': 'ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w'}, 'value': [1678858388.778, '518557696']}, {'metric': {'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz'}, 'value': [1678858388.778, '5093191680']}, {'metric': {'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg'}, 'value': [1678858388.778, '15556608']}, {'metric': {'pod': 'ei-redis-deployment-68df56c9d5-9kt42'}, 'value': [1678858388.778, '2443620352']}, {'metric': {'pod': 'tmp-shell'}, 'value': [1678858388.778, '847872']}]
2023-03-14 22:33:08,789 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_infer_fps{namespace="default"}[2m])
2023-03-14 22:33:08,789 - INFO - metric_name is: ei_infer_fps
2023-03-14 22:33:08,789 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.43:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678858388.782, '28.444165791608366']}]
2023-03-14 22:33:08,789 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_drop_fps{namespace="default"}[2m])
2023-03-14 22:33:08,789 - INFO - metric_name is: ei_drop_fps
2023-03-14 22:33:08,789 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.43:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678858388.785, '0']}]
2023-03-14 22:33:08,789 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_scale_ratio{namespace="default"}[2m])
2023-03-14 22:33:08,789 - INFO - metric_name is: ei_scale_ratio
2023-03-14 22:33:08,789 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.43:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678858388.789, '0.9199172896740784']}]
2023-03-14 22:33:08,789 - INFO - Results written to metrics/F18D_AMX_BF16_metrics_20230314_223308.txt
2023-03-14 22:33:08,855 - INFO - ------------- scenario: 2/5 ------------
2023-03-14 22:33:08,856 - INFO - Begin set_deployment_env of scenario : NON_AMX_BF16 ...
2023-03-14 22:33:08,907 - INFO - Setting environment variables for scenario NON_AMX_BF16...
2023-03-14 22:33:08,928 - INFO - Setting resource requests and limits for scenario NON_AMX_BF16...
2023-03-14 22:33:08,949 - INFO - after patch_body wait for 30 seconds to enable the new pods
2023-03-14 22:33:38,979 - INFO - Waiting for 1 pods to be ready for scenario NON_AMX_BF16...
2023-03-14 22:33:39,054 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:33:39,054 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:33:39,054 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 0.07 seconds
2023-03-14 22:33:49,088 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:33:49,088 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:33:49,088 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 10.11 seconds
2023-03-14 22:33:59,124 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:33:59,124 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:33:59,124 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 20.14 seconds
2023-03-14 22:34:09,158 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:34:09,159 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:34:09,159 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 30.18 seconds
2023-03-14 22:34:19,195 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:34:19,195 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:34:19,195 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 40.22 seconds
2023-03-14 22:34:29,230 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:34:29,231 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:34:29,231 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 50.25 seconds
2023-03-14 22:34:39,265 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:34:39,266 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:34:39,266 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 60.29 seconds
2023-03-14 22:34:49,302 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:34:49,302 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:34:49,302 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 70.32 seconds
2023-03-14 22:34:59,337 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:34:59,337 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:34:59,337 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 80.36 seconds
2023-03-14 22:35:09,372 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:35:09,372 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:35:09,372 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 90.39 seconds
2023-03-14 22:35:19,406 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:35:19,407 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:35:19,407 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 100.43 seconds
2023-03-14 22:35:29,442 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:35:29,442 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:35:29,442 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 110.46 seconds
2023-03-14 22:35:39,476 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:35:39,477 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:35:39,477 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 120.50 seconds
2023-03-14 22:35:49,513 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:35:49,513 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:35:49,513 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 130.53 seconds
2023-03-14 22:35:59,548 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:35:59,548 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:35:59,548 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 140.57 seconds
2023-03-14 22:36:09,583 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:36:09,583 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:36:09,583 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 150.60 seconds
2023-03-14 22:36:19,618 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:36:19,618 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:36:19,618 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 160.64 seconds
2023-03-14 22:36:29,652 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:36:29,652 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:36:29,652 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 170.67 seconds
2023-03-14 22:36:39,688 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:36:39,688 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:36:39,689 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 180.71 seconds
2023-03-14 22:36:49,724 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:36:49,724 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:36:49,724 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 190.74 seconds
2023-03-14 22:36:59,760 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:36:59,760 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:36:59,760 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 200.78 seconds
2023-03-14 22:37:09,795 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:37:09,795 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:37:09,795 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 210.82 seconds
2023-03-14 22:37:19,830 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:37:19,830 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:37:19,830 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 220.85 seconds
2023-03-14 22:37:29,864 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:37:29,864 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:37:29,864 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 230.88 seconds
2023-03-14 22:37:39,899 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:37:39,900 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:37:39,900 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 240.92 seconds
2023-03-14 22:37:49,934 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:37:49,934 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:37:49,934 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 250.95 seconds
2023-03-14 22:37:59,968 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:37:59,968 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:37:59,969 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 260.99 seconds
2023-03-14 22:38:10,003 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:38:10,003 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:38:10,003 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 271.02 seconds
2023-03-14 22:38:20,039 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:38:20,039 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:38:20,039 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 281.06 seconds
2023-03-14 22:38:30,076 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:38:30,076 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:38:30,076 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 291.10 seconds
2023-03-14 22:38:40,112 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:38:40,112 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:38:40,112 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 301.13 seconds
2023-03-14 22:38:50,147 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:38:50,147 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:38:50,147 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 311.17 seconds
2023-03-14 22:39:00,184 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:39:00,185 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:39:00,185 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 321.20 seconds
2023-03-14 22:39:10,221 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:39:10,222 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:39:10,222 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 331.24 seconds
2023-03-14 22:39:20,257 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:39:20,257 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:39:20,257 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 341.28 seconds
2023-03-14 22:39:30,292 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:39:30,293 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:39:30,293 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 351.31 seconds
2023-03-14 22:39:40,327 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:39:40,327 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:39:40,328 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 361.35 seconds
2023-03-14 22:39:50,363 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:39:50,364 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:39:50,364 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 371.38 seconds
2023-03-14 22:40:00,395 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:40:00,395 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:40:00,395 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 381.42 seconds
2023-03-14 22:40:10,429 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:40:10,429 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:40:10,429 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 391.45 seconds
2023-03-14 22:40:20,466 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:40:20,466 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:40:20,466 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 401.49 seconds
2023-03-14 22:40:30,502 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:40:30,502 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:40:30,502 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 411.52 seconds
2023-03-14 22:40:40,538 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:40:40,538 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:40:40,538 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 421.56 seconds
2023-03-14 22:40:50,574 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:40:50,574 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:40:50,575 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 431.59 seconds
2023-03-14 22:41:00,609 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:41:00,609 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:41:00,609 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 441.63 seconds
2023-03-14 22:41:10,645 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:41:10,646 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:41:10,646 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 451.67 seconds
2023-03-14 22:41:20,681 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:41:20,681 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:41:20,682 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 461.70 seconds
2023-03-14 22:41:30,744 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:41:30,744 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:41:30,744 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 471.76 seconds
2023-03-14 22:41:40,779 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:41:40,779 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:41:40,779 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 481.80 seconds
2023-03-14 22:41:50,814 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:41:50,814 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:41:50,814 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 491.83 seconds
2023-03-14 22:42:00,848 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:42:00,848 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:42:00,848 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 501.87 seconds
2023-03-14 22:42:10,882 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:42:10,883 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:42:10,883 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 511.90 seconds
2023-03-14 22:42:20,917 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:42:20,917 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:42:20,917 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 521.94 seconds
2023-03-14 22:42:30,952 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:42:30,953 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:42:30,953 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 531.97 seconds
2023-03-14 22:42:40,983 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:42:40,983 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:42:40,983 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 542.00 seconds
2023-03-14 22:42:51,014 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:42:51,014 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:42:51,014 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 552.03 seconds
2023-03-14 22:43:01,049 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:43:01,049 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:43:01,049 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 562.07 seconds
2023-03-14 22:43:11,083 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:43:11,083 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:43:11,083 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 572.10 seconds
2023-03-14 22:43:21,118 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:43:21,118 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:43:21,118 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 582.14 seconds
2023-03-14 22:43:31,155 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:43:31,155 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:43:31,155 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 592.18 seconds
2023-03-14 22:43:41,193 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:43:41,193 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:43:41,193 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 602.21 seconds
2023-03-14 22:43:51,229 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:43:51,229 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:43:51,229 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 612.25 seconds
2023-03-14 22:44:01,263 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:44:01,263 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:44:01,263 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 622.28 seconds
2023-03-14 22:44:11,299 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:44:11,300 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:44:11,300 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 632.32 seconds
2023-03-14 22:44:21,334 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:44:21,335 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:44:21,335 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 642.35 seconds
2023-03-14 22:44:31,370 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:44:31,371 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:44:31,371 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 652.39 seconds
2023-03-14 22:44:41,407 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:44:41,407 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:44:41,407 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 662.43 seconds
2023-03-14 22:44:51,443 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:44:51,443 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:44:51,444 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 672.46 seconds
2023-03-14 22:45:01,478 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:45:01,479 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:45:01,479 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 682.50 seconds
2023-03-14 22:45:11,513 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:45:11,513 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:45:11,513 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 692.53 seconds
2023-03-14 22:45:21,549 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:45:21,549 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:45:21,549 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 702.57 seconds
2023-03-14 22:45:31,583 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:45:31,584 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:45:31,584 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 712.60 seconds
2023-03-14 22:45:41,616 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:45:41,616 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:45:41,616 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 722.64 seconds
2023-03-14 22:45:51,650 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:45:51,651 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:45:51,651 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 732.67 seconds
2023-03-14 22:46:01,685 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:46:01,685 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:46:01,685 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 742.71 seconds
2023-03-14 22:46:11,721 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:46:11,721 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:46:11,721 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 752.74 seconds
2023-03-14 22:46:21,756 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:46:21,757 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:46:21,757 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 762.78 seconds
2023-03-14 22:46:31,793 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:46:31,793 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:46:31,793 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 772.81 seconds
2023-03-14 22:46:41,828 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:46:41,828 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:46:41,828 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 782.85 seconds
2023-03-14 22:46:51,863 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:46:51,864 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:46:51,864 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 792.88 seconds
2023-03-14 22:47:01,901 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:47:01,901 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:47:01,901 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 802.92 seconds
2023-03-14 22:47:11,937 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:47:11,938 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:47:11,938 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 812.96 seconds
2023-03-14 22:47:21,974 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:47:21,974 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:47:21,974 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 822.99 seconds
2023-03-14 22:47:32,010 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:47:32,011 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:47:32,011 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 833.03 seconds
2023-03-14 22:47:42,046 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:47:42,046 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:47:42,046 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 843.07 seconds
2023-03-14 22:47:52,075 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:47:52,075 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:47:52,076 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 853.10 seconds
2023-03-14 22:48:02,111 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:48:02,112 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:48:02,112 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 863.13 seconds
2023-03-14 22:48:12,149 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:48:12,149 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:48:12,149 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 873.17 seconds
2023-03-14 22:48:22,185 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:48:22,185 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:48:22,186 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 883.21 seconds
2023-03-14 22:48:32,221 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:48:32,221 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:48:32,221 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 893.24 seconds
2023-03-14 22:48:42,257 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:48:42,257 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:48:42,258 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 903.28 seconds
2023-03-14 22:48:52,291 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:48:52,291 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:48:52,292 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 913.31 seconds
2023-03-14 22:49:02,325 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:49:02,325 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:49:02,325 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 923.35 seconds
2023-03-14 22:49:12,360 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:49:12,361 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:49:12,361 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 933.38 seconds
2023-03-14 22:49:22,395 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Pending
2023-03-14 22:49:22,395 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:49:22,395 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_AMX_BF16. Elapsed time: 943.42 seconds
2023-03-14 22:49:32,429 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Running
2023-03-14 22:49:32,429 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-c8864fcfc-jdm5w status:Running
2023-03-14 22:49:32,430 - INFO - Waiting for -1 more pods to be ready, there are 0 not ready pods for scenario NON_AMX_BF16. Elapsed time: 953.45 seconds
2023-03-14 22:49:42,457 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Running
2023-03-14 22:49:42,458 - INFO - All 1 pods are ready for scenario NON_AMX_BF16
2023-03-14 22:49:42,459 - INFO - Finished scenario NON_AMX_BF16
2023-03-14 22:49:42,459 - INFO - wait for 2m to get stable metrics ...
2023-03-14 22:51:42,559 - INFO - Running benchmarking script for scenario NON_AMX_BF16...
2023-03-14 22:51:42,572 - INFO - TS=20230314225142
2023-03-14 22:51:44,460 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:51:44,461 - INFO - Reading package lists...
2023-03-14 22:51:44,461 - INFO - Building dependency tree...
2023-03-14 22:51:44,461 - INFO - Reading state information...
2023-03-14 22:51:44,461 - INFO - linux-tools-5.15.0-60-generic is already the newest version (5.15.0-60.66).
2023-03-14 22:51:44,461 - INFO - sysstat is already the newest version (12.5.2-2ubuntu0.1).
2023-03-14 22:51:44,461 - INFO - The following packages were automatically installed and are no longer required:
2023-03-14 22:51:44,461 - INFO - cgroupfs-mount libltdl7 pigz
2023-03-14 22:51:44,461 - INFO - Use 'sudo apt autoremove' to remove them.
2023-03-14 22:51:44,461 - INFO - 0 upgraded, 0 newly installed, 0 to remove and 44 not upgraded.
2023-03-14 22:51:44,461 - INFO - WARNING: apt does not have a stable CLI interface. Use with caution in scripts.
2023-03-14 22:51:45,567 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:51:45,568 - INFO - 
2023-03-14 22:51:46,638 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:51:46,638 - INFO - performance
2023-03-14 22:51:46,738 - INFO - Run on test AiPipeline_20230314225142_F18D_NON_AMX_BF16_6
2023-03-14 22:51:46,739 - INFO - TT=AiPipeline_20230314225142_F18D_NON_AMX_BF16_6,WRKDIR=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 22:51:46,745 - INFO - -----------loop num:1/3------------
2023-03-14 22:51:56,752 - INFO - 1.  fetch_emon.sh
2023-03-14 22:51:56,753 - INFO - pwd=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 22:51:58,150 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 22:51:58,150 - INFO - "ansible_facts": {
2023-03-14 22:51:58,150 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 22:51:58,150 - INFO - },
2023-03-14 22:51:58,150 - INFO - "changed": false,
2023-03-14 22:51:58,151 - INFO - "checksum": "1bb1c680bf42bce57bd33e9ee945d27bb8aeaafc",
2023-03-14 22:51:58,151 - INFO - "dest": "runemon.sh",
2023-03-14 22:51:58,151 - INFO - "gid": 1007,
2023-03-14 22:51:58,151 - INFO - "group": "ansible",
2023-03-14 22:51:58,151 - INFO - "mode": "0755",
2023-03-14 22:51:58,151 - INFO - "owner": "ansible",
2023-03-14 22:51:58,151 - INFO - "path": "runemon.sh",
2023-03-14 22:51:58,151 - INFO - "size": 452,
2023-03-14 22:51:58,151 - INFO - "state": "file",
2023-03-14 22:51:58,151 - INFO - "uid": 1006
2023-03-14 22:51:58,151 - INFO - }
2023-03-14 22:51:59,462 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 22:51:59,462 - INFO - "ansible_facts": {
2023-03-14 22:51:59,462 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 22:51:59,462 - INFO - },
2023-03-14 22:51:59,462 - INFO - "changed": false,
2023-03-14 22:51:59,462 - INFO - "checksum": "0b7ce1d178a191ee4962273d5bcbcac8b825066d",
2023-03-14 22:51:59,462 - INFO - "dest": "sapphirerapids_server_events_private.txt",
2023-03-14 22:51:59,463 - INFO - "gid": 1007,
2023-03-14 22:51:59,463 - INFO - "group": "ansible",
2023-03-14 22:51:59,463 - INFO - "mode": "0664",
2023-03-14 22:51:59,463 - INFO - "owner": "ansible",
2023-03-14 22:51:59,463 - INFO - "path": "sapphirerapids_server_events_private.txt",
2023-03-14 22:51:59,463 - INFO - "size": 23423,
2023-03-14 22:51:59,463 - INFO - "state": "file",
2023-03-14 22:51:59,463 - INFO - "uid": 1006
2023-03-14 22:51:59,463 - INFO - }
2023-03-14 22:52:00,515 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:52:00,515 - INFO - 
2023-03-14 22:52:01,573 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:52:01,573 - INFO - 
2023-03-14 22:52:01,672 - INFO - Sleep 5 seconds then collect emon data for 30 seconds
2023-03-14 22:52:06,675 - INFO - Collecting 30 seconds sar data background
2023-03-14 22:52:08,634 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:52:08,634 - INFO - 
2023-03-14 22:52:10,794 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:52:10,795 - INFO - 
2023-03-14 22:52:12,863 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:52:12,863 - INFO - 
2023-03-14 22:52:14,925 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:52:14,926 - INFO - 
2023-03-14 22:52:15,021 - INFO - Collecting EMON data
2023-03-14 22:52:46,514 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:52:46,514 - INFO - Usage: sep_vars.sh [emon_api]
2023-03-14 22:52:46,514 - INFO - PATH=/opt/intel/sep/bin64:/opt/intel/sep/android_target:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2023-03-14 22:52:46,514 - INFO - CPATH=/opt/intel/sep/config/emon_api:
2023-03-14 22:52:46,515 - INFO - LIBRARY_PATH=/opt/intel/sep/lib64:
2023-03-14 22:52:46,515 - INFO - LD_LIBRARY_PATH=
2023-03-14 22:52:46,515 - INFO - SEP_BASE_DIR=/opt/intel/sep/bin64
2023-03-14 22:52:46,515 - INFO - SEP is currently installed under /opt/intel/sep/bin64
2023-03-14 22:52:46,515 - INFO - EMON collector successfully stopped.
2023-03-14 22:52:46,620 - INFO - Sleep another 30 seconds to make sure the previous run exit
2023-03-14 22:53:16,624 - INFO - Copy dat files
2023-03-14 22:53:17,637 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:53:17,637 - INFO - "changed": true,
2023-03-14 22:53:17,637 - INFO - "checksum": "7d96e3f9ae40d65ab0a9aba0cab47e58b66f2250",
2023-03-14 22:53:17,637 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/cpuutil.log",
2023-03-14 22:53:17,637 - INFO - "md5sum": "8132d229ed4deb1f9fc33c53e8d4fe89",
2023-03-14 22:53:17,637 - INFO - "remote_checksum": "7d96e3f9ae40d65ab0a9aba0cab47e58b66f2250",
2023-03-14 22:53:17,638 - INFO - "remote_md5sum": null
2023-03-14 22:53:17,638 - INFO - }
2023-03-14 22:53:18,733 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:53:18,733 - INFO - "changed": true,
2023-03-14 22:53:18,734 - INFO - "checksum": "a5891c93bd90766ca13a23eabcd385282a6ce456",
2023-03-14 22:53:18,734 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/diskutil.log",
2023-03-14 22:53:18,734 - INFO - "md5sum": "5c541e9b72dac849de5bc0ebca5eefc7",
2023-03-14 22:53:18,734 - INFO - "remote_checksum": "a5891c93bd90766ca13a23eabcd385282a6ce456",
2023-03-14 22:53:18,734 - INFO - "remote_md5sum": null
2023-03-14 22:53:18,734 - INFO - }
2023-03-14 22:53:19,748 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:53:19,748 - INFO - "changed": true,
2023-03-14 22:53:19,748 - INFO - "checksum": "e97a226db44d7fac16e39b6e915c37c9bbe0dc20",
2023-03-14 22:53:19,749 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/netutil.log",
2023-03-14 22:53:19,749 - INFO - "md5sum": "8956633b78fc076dc18b4b1fef1778f8",
2023-03-14 22:53:19,749 - INFO - "remote_checksum": "e97a226db44d7fac16e39b6e915c37c9bbe0dc20",
2023-03-14 22:53:19,749 - INFO - "remote_md5sum": null
2023-03-14 22:53:19,749 - INFO - }
2023-03-14 22:53:20,895 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:53:20,895 - INFO - "changed": true,
2023-03-14 22:53:20,895 - INFO - "checksum": "9033fc9d3df80c94278398027a7c47293bb51007",
2023-03-14 22:53:20,895 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/top.log",
2023-03-14 22:53:20,895 - INFO - "md5sum": "31dd2b500b2c23a3dcaeeb6d4fc48703",
2023-03-14 22:53:20,896 - INFO - "remote_checksum": "9033fc9d3df80c94278398027a7c47293bb51007",
2023-03-14 22:53:20,896 - INFO - "remote_md5sum": null
2023-03-14 22:53:20,896 - INFO - }
2023-03-14 22:53:22,025 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:53:22,026 - INFO - "changed": true,
2023-03-14 22:53:22,026 - INFO - "checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 22:53:22,026 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-v.dat",
2023-03-14 22:53:22,026 - INFO - "md5sum": "9ed6ca61f164c3a1ddac82b3adb8e41f",
2023-03-14 22:53:22,026 - INFO - "remote_checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 22:53:22,026 - INFO - "remote_md5sum": null
2023-03-14 22:53:22,026 - INFO - }
2023-03-14 22:53:23,122 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:53:23,123 - INFO - "changed": true,
2023-03-14 22:53:23,123 - INFO - "checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 22:53:23,123 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-M.dat",
2023-03-14 22:53:23,123 - INFO - "md5sum": "82b2e5d1d33c2feb6e5d5290b113dd3f",
2023-03-14 22:53:23,123 - INFO - "remote_checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 22:53:23,123 - INFO - "remote_md5sum": null
2023-03-14 22:53:23,123 - INFO - }
2023-03-14 22:53:24,688 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:53:24,688 - INFO - "changed": true,
2023-03-14 22:53:24,689 - INFO - "checksum": "b2871ba489d09bcc061331196bddd64c62a1405b",
2023-03-14 22:53:24,689 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon.dat",
2023-03-14 22:53:24,689 - INFO - "md5sum": "8b1250b733c41358602f9e1c34939880",
2023-03-14 22:53:24,689 - INFO - "remote_checksum": "b2871ba489d09bcc061331196bddd64c62a1405b",
2023-03-14 22:53:24,689 - INFO - "remote_md5sum": null
2023-03-14 22:53:24,689 - INFO - }
2023-03-14 22:53:24,791 - INFO - 2. fetch the matrics of ai_pipeline
2023-03-14 22:53:24,791 - INFO - 3.  collect the result
2023-03-14 22:53:24,966 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(rate(container_cpu_usage_seconds_total{namespace="default", container!=""}[2m])[2m:])
2023-03-14 22:53:24,966 - INFO - metric_name is: cpu_usage
2023-03-14 22:53:24,967 - INFO - result is: [{'metric': {'container': 'ei-fss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podf765b16c_07f8_4261_9b64_3517dc6bafb7.slice/cri-containerd-88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-file-stream-service:2022WW47', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt', 'service': 'kubelet'}, 'value': [1678859604.952, '0.07440691388890425']}, {'metric': {'container': 'ei-gws', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podaf221d52_33c6_40a0_b6bf_e5e2bc7b88db.slice/cri-containerd-870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada.scope', 'image': 'ccr-registry.caas.intel.com/cnbench/ei-gateway-server:2022WW51-ws-8080', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9', 'service': 'kubelet'}, 'value': [1678859604.952, '0.0036842416666660128']}, {'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod02d1837b_ff70_47bc_b0a4_f4d5391af0d5.slice/cri-containerd-928bff7b5ff3366e0fbfe1f7c1a284c016a6ed7eeb77196b119aa10da81816d6.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-inference-service-tensorflow:2022WW49', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '928bff7b5ff3366e0fbfe1f7c1a284c016a6ed7eeb77196b119aa10da81816d6', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh', 'service': 'kubelet'}, 'value': [1678859604.952, '1.0479122603884259']}, {'metric': {'container': 'ei-wss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podd781997c_c6e4_4a9a_8814_f1a5e364edb4.slice/cri-containerd-d43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-websocket-server:2022WW51', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'd43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz', 'service': 'kubelet'}, 'value': [1678859604.952, '0.015148802777770873']}, {'metric': {'container': 'nfs-subdir-external-provisioner', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod008ca2f8_cd34_4bb5_9e75_b46ec5ce9a23.slice/cri-containerd-710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4.scope', 'image': 'k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg', 'service': 'kubelet'}, 'value': [1678859604.952, '0.001086997222220513']}, {'metric': {'container': 'redis', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod0d8f249f_8e44_4dae_82d3_618b15befd15.slice/cri-containerd-0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e.scope', 'image': 'docker.io/library/redis:6.0', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-redis-deployment-68df56c9d5-9kt42', 'service': 'kubelet'}, 'value': [1678859604.952, '0.004780308333339336']}, {'metric': {'container': 'tmp-shell', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod9cbe7477_0ea6_463d_8c1e_33eb5efda051.slice/cri-containerd-9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9.scope', 'image': 'docker.io/nicolaka/netshoot:latest', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'tmp-shell', 'service': 'kubelet'}, 'value': [1678859604.952, '0']}]
2023-03-14 22:53:24,967 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=sum(container_memory_working_set_bytes{namespace="default",container!="", image!=""}) by (pod)
2023-03-14 22:53:24,967 - INFO - metric_name is: memory_usage
2023-03-14 22:53:24,967 - INFO - result is: [{'metric': {'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt'}, 'value': [1678859604.956, '386134016']}, {'metric': {'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9'}, 'value': [1678859604.956, '56881152']}, {'metric': {'pod': 'ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh'}, 'value': [1678859604.956, '519417856']}, {'metric': {'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz'}, 'value': [1678859604.956, '5093502976']}, {'metric': {'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg'}, 'value': [1678859604.956, '15433728']}, {'metric': {'pod': 'ei-redis-deployment-68df56c9d5-9kt42'}, 'value': [1678859604.956, '2444812288']}, {'metric': {'pod': 'tmp-shell'}, 'value': [1678859604.956, '847872']}]
2023-03-14 22:53:24,967 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_infer_fps{namespace="default"}[2m])
2023-03-14 22:53:24,967 - INFO - metric_name is: ei_infer_fps
2023-03-14 22:53:24,967 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.1:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678859604.96, '14.037965922912061']}]
2023-03-14 22:53:24,967 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_drop_fps{namespace="default"}[2m])
2023-03-14 22:53:24,967 - INFO - metric_name is: ei_drop_fps
2023-03-14 22:53:24,967 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.1:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678859604.964, '14.361699373629873']}]
2023-03-14 22:53:24,967 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_scale_ratio{namespace="default"}[2m])
2023-03-14 22:53:24,967 - INFO - metric_name is: ei_scale_ratio
2023-03-14 22:53:24,968 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.1:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678859604.967, '2.0231849972793903']}]
2023-03-14 22:53:24,968 - INFO - Results written to metrics/F18D_NON_AMX_BF16_metrics_20230314_225324.txt
2023-03-14 22:53:25,036 - INFO - sleep 120 seconds for the next round ...
2023-03-14 22:55:25,039 - INFO - -----------loop num:2/3------------
2023-03-14 22:55:35,046 - INFO - 1.  fetch_emon.sh
2023-03-14 22:55:35,048 - INFO - pwd=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 22:55:36,885 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 22:55:36,886 - INFO - "ansible_facts": {
2023-03-14 22:55:36,886 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 22:55:36,886 - INFO - },
2023-03-14 22:55:36,886 - INFO - "changed": false,
2023-03-14 22:55:36,886 - INFO - "checksum": "1bb1c680bf42bce57bd33e9ee945d27bb8aeaafc",
2023-03-14 22:55:36,886 - INFO - "dest": "runemon.sh",
2023-03-14 22:55:36,886 - INFO - "gid": 1007,
2023-03-14 22:55:36,886 - INFO - "group": "ansible",
2023-03-14 22:55:36,886 - INFO - "mode": "0755",
2023-03-14 22:55:36,887 - INFO - "owner": "ansible",
2023-03-14 22:55:36,887 - INFO - "path": "runemon.sh",
2023-03-14 22:55:36,887 - INFO - "size": 452,
2023-03-14 22:55:36,887 - INFO - "state": "file",
2023-03-14 22:55:36,887 - INFO - "uid": 1006
2023-03-14 22:55:36,887 - INFO - }
2023-03-14 22:55:38,296 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 22:55:38,296 - INFO - "ansible_facts": {
2023-03-14 22:55:38,296 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 22:55:38,296 - INFO - },
2023-03-14 22:55:38,296 - INFO - "changed": false,
2023-03-14 22:55:38,296 - INFO - "checksum": "0b7ce1d178a191ee4962273d5bcbcac8b825066d",
2023-03-14 22:55:38,297 - INFO - "dest": "sapphirerapids_server_events_private.txt",
2023-03-14 22:55:38,297 - INFO - "gid": 1007,
2023-03-14 22:55:38,297 - INFO - "group": "ansible",
2023-03-14 22:55:38,297 - INFO - "mode": "0664",
2023-03-14 22:55:38,297 - INFO - "owner": "ansible",
2023-03-14 22:55:38,297 - INFO - "path": "sapphirerapids_server_events_private.txt",
2023-03-14 22:55:38,297 - INFO - "size": 23423,
2023-03-14 22:55:38,297 - INFO - "state": "file",
2023-03-14 22:55:38,297 - INFO - "uid": 1006
2023-03-14 22:55:38,297 - INFO - }
2023-03-14 22:55:39,377 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:55:39,377 - INFO - 
2023-03-14 22:55:40,470 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:55:40,471 - INFO - 
2023-03-14 22:55:40,570 - INFO - Sleep 5 seconds then collect emon data for 30 seconds
2023-03-14 22:55:45,573 - INFO - Collecting 30 seconds sar data background
2023-03-14 22:55:47,652 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:55:47,653 - INFO - 
2023-03-14 22:55:49,689 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:55:49,689 - INFO - 
2023-03-14 22:55:51,737 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:55:51,738 - INFO - 
2023-03-14 22:55:53,792 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:55:53,793 - INFO - 
2023-03-14 22:55:53,895 - INFO - Collecting EMON data
2023-03-14 22:56:25,446 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:56:25,446 - INFO - Usage: sep_vars.sh [emon_api]
2023-03-14 22:56:25,446 - INFO - PATH=/opt/intel/sep/bin64:/opt/intel/sep/android_target:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2023-03-14 22:56:25,446 - INFO - CPATH=/opt/intel/sep/config/emon_api:
2023-03-14 22:56:25,446 - INFO - LIBRARY_PATH=/opt/intel/sep/lib64:
2023-03-14 22:56:25,446 - INFO - LD_LIBRARY_PATH=
2023-03-14 22:56:25,447 - INFO - SEP_BASE_DIR=/opt/intel/sep/bin64
2023-03-14 22:56:25,447 - INFO - SEP is currently installed under /opt/intel/sep/bin64
2023-03-14 22:56:25,447 - INFO - EMON collector successfully stopped.
2023-03-14 22:56:25,550 - INFO - Sleep another 30 seconds to make sure the previous run exit
2023-03-14 22:56:55,554 - INFO - Copy dat files
2023-03-14 22:56:56,568 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:56:56,568 - INFO - "changed": true,
2023-03-14 22:56:56,568 - INFO - "checksum": "0a048b50342aaf21ed8f9df14c677de218caf417",
2023-03-14 22:56:56,568 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/cpuutil.log",
2023-03-14 22:56:56,568 - INFO - "md5sum": "327950d2da1f896dd71123c5d50fa8f3",
2023-03-14 22:56:56,568 - INFO - "remote_checksum": "0a048b50342aaf21ed8f9df14c677de218caf417",
2023-03-14 22:56:56,569 - INFO - "remote_md5sum": null
2023-03-14 22:56:56,569 - INFO - }
2023-03-14 22:56:57,675 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:56:57,675 - INFO - "changed": true,
2023-03-14 22:56:57,675 - INFO - "checksum": "fadc711c67250716d264f7c5b91afd8c486e8a20",
2023-03-14 22:56:57,675 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/diskutil.log",
2023-03-14 22:56:57,676 - INFO - "md5sum": "fb81941fcf2355b0a77a1ec68a1cd2cc",
2023-03-14 22:56:57,676 - INFO - "remote_checksum": "fadc711c67250716d264f7c5b91afd8c486e8a20",
2023-03-14 22:56:57,676 - INFO - "remote_md5sum": null
2023-03-14 22:56:57,676 - INFO - }
2023-03-14 22:56:58,781 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:56:58,781 - INFO - "changed": true,
2023-03-14 22:56:58,782 - INFO - "checksum": "58eb056552a4c54ada8daf3ca9a80350ef9c04bd",
2023-03-14 22:56:58,782 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/netutil.log",
2023-03-14 22:56:58,782 - INFO - "md5sum": "e84455e3a2efe29e31d3775b94834ee4",
2023-03-14 22:56:58,782 - INFO - "remote_checksum": "58eb056552a4c54ada8daf3ca9a80350ef9c04bd",
2023-03-14 22:56:58,782 - INFO - "remote_md5sum": null
2023-03-14 22:56:58,782 - INFO - }
2023-03-14 22:56:59,926 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:56:59,926 - INFO - "changed": true,
2023-03-14 22:56:59,926 - INFO - "checksum": "9481680139151269fe42649900fcdbb375247736",
2023-03-14 22:56:59,926 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/top.log",
2023-03-14 22:56:59,926 - INFO - "md5sum": "aa77ff15132e68ccef768eb3dfc4ce3e",
2023-03-14 22:56:59,926 - INFO - "remote_checksum": "9481680139151269fe42649900fcdbb375247736",
2023-03-14 22:56:59,926 - INFO - "remote_md5sum": null
2023-03-14 22:56:59,927 - INFO - }
2023-03-14 22:57:01,033 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:57:01,034 - INFO - "changed": true,
2023-03-14 22:57:01,034 - INFO - "checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 22:57:01,034 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-v.dat",
2023-03-14 22:57:01,034 - INFO - "md5sum": "9ed6ca61f164c3a1ddac82b3adb8e41f",
2023-03-14 22:57:01,034 - INFO - "remote_checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 22:57:01,034 - INFO - "remote_md5sum": null
2023-03-14 22:57:01,034 - INFO - }
2023-03-14 22:57:02,126 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:57:02,127 - INFO - "changed": true,
2023-03-14 22:57:02,127 - INFO - "checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 22:57:02,127 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-M.dat",
2023-03-14 22:57:02,127 - INFO - "md5sum": "82b2e5d1d33c2feb6e5d5290b113dd3f",
2023-03-14 22:57:02,127 - INFO - "remote_checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 22:57:02,127 - INFO - "remote_md5sum": null
2023-03-14 22:57:02,127 - INFO - }
2023-03-14 22:57:03,681 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 22:57:03,681 - INFO - "changed": true,
2023-03-14 22:57:03,681 - INFO - "checksum": "daf4fd473f2bfe94b7bc192eb35dc17b3f8a5a50",
2023-03-14 22:57:03,681 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon.dat",
2023-03-14 22:57:03,682 - INFO - "md5sum": "95658ce545fe792422f2a3deb9278359",
2023-03-14 22:57:03,682 - INFO - "remote_checksum": "daf4fd473f2bfe94b7bc192eb35dc17b3f8a5a50",
2023-03-14 22:57:03,682 - INFO - "remote_md5sum": null
2023-03-14 22:57:03,682 - INFO - }
2023-03-14 22:57:03,785 - INFO - 2. fetch the matrics of ai_pipeline
2023-03-14 22:57:03,785 - INFO - 3.  collect the result
2023-03-14 22:57:03,961 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(rate(container_cpu_usage_seconds_total{namespace="default", container!=""}[2m])[2m:])
2023-03-14 22:57:03,961 - INFO - metric_name is: cpu_usage
2023-03-14 22:57:03,961 - INFO - result is: [{'metric': {'container': 'ei-fss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podf765b16c_07f8_4261_9b64_3517dc6bafb7.slice/cri-containerd-88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-file-stream-service:2022WW47', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt', 'service': 'kubelet'}, 'value': [1678859823.945, '0.07273747222223188']}, {'metric': {'container': 'ei-gws', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podaf221d52_33c6_40a0_b6bf_e5e2bc7b88db.slice/cri-containerd-870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada.scope', 'image': 'ccr-registry.caas.intel.com/cnbench/ei-gateway-server:2022WW51-ws-8080', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9', 'service': 'kubelet'}, 'value': [1678859823.945, '0.0012425138888886521']}, {'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod02d1837b_ff70_47bc_b0a4_f4d5391af0d5.slice/cri-containerd-928bff7b5ff3366e0fbfe1f7c1a284c016a6ed7eeb77196b119aa10da81816d6.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-inference-service-tensorflow:2022WW49', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '928bff7b5ff3366e0fbfe1f7c1a284c016a6ed7eeb77196b119aa10da81816d6', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh', 'service': 'kubelet'}, 'value': [1678859823.945, '1.0457438250000002']}, {'metric': {'container': 'ei-wss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podd781997c_c6e4_4a9a_8814_f1a5e364edb4.slice/cri-containerd-d43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-websocket-server:2022WW51', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'd43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz', 'service': 'kubelet'}, 'value': [1678859823.945, '0.0025402555555552276']}, {'metric': {'container': 'nfs-subdir-external-provisioner', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod008ca2f8_cd34_4bb5_9e75_b46ec5ce9a23.slice/cri-containerd-710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4.scope', 'image': 'k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg', 'service': 'kubelet'}, 'value': [1678859823.945, '0.0010266833333326354']}, {'metric': {'container': 'redis', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod0d8f249f_8e44_4dae_82d3_618b15befd15.slice/cri-containerd-0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e.scope', 'image': 'docker.io/library/redis:6.0', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-redis-deployment-68df56c9d5-9kt42', 'service': 'kubelet'}, 'value': [1678859823.945, '0.004740897222215305']}, {'metric': {'container': 'tmp-shell', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod9cbe7477_0ea6_463d_8c1e_33eb5efda051.slice/cri-containerd-9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9.scope', 'image': 'docker.io/nicolaka/netshoot:latest', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'tmp-shell', 'service': 'kubelet'}, 'value': [1678859823.945, '0']}]
2023-03-14 22:57:03,962 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=sum(container_memory_working_set_bytes{namespace="default",container!="", image!=""}) by (pod)
2023-03-14 22:57:03,962 - INFO - metric_name is: memory_usage
2023-03-14 22:57:03,962 - INFO - result is: [{'metric': {'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt'}, 'value': [1678859823.949, '386002944']}, {'metric': {'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9'}, 'value': [1678859823.949, '56881152']}, {'metric': {'pod': 'ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh'}, 'value': [1678859823.949, '519417856']}, {'metric': {'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz'}, 'value': [1678859823.949, '5093314560']}, {'metric': {'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg'}, 'value': [1678859823.949, '15171584']}, {'metric': {'pod': 'ei-redis-deployment-68df56c9d5-9kt42'}, 'value': [1678859823.949, '2445012992']}, {'metric': {'pod': 'tmp-shell'}, 'value': [1678859823.949, '847872']}]
2023-03-14 22:57:03,962 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_infer_fps{namespace="default"}[2m])
2023-03-14 22:57:03,962 - INFO - metric_name is: ei_infer_fps
2023-03-14 22:57:03,962 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.1:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678859823.953, '13.967516641698683']}]
2023-03-14 22:57:03,962 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_drop_fps{namespace="default"}[2m])
2023-03-14 22:57:03,962 - INFO - metric_name is: ei_drop_fps
2023-03-14 22:57:03,962 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.1:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678859823.957, '14.416009212222887']}]
2023-03-14 22:57:03,962 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_scale_ratio{namespace="default"}[2m])
2023-03-14 22:57:03,962 - INFO - metric_name is: ei_scale_ratio
2023-03-14 22:57:03,962 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.1:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678859823.961, '2.0322540719697364']}]
2023-03-14 22:57:03,962 - INFO - Results written to metrics/F18D_NON_AMX_BF16_metrics_20230314_225703.txt
2023-03-14 22:57:04,029 - INFO - sleep 120 seconds for the next round ...
2023-03-14 22:59:04,032 - INFO - -----------loop num:3/3------------
2023-03-14 22:59:14,039 - INFO - 1.  fetch_emon.sh
2023-03-14 22:59:14,041 - INFO - pwd=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 22:59:15,877 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 22:59:15,877 - INFO - "ansible_facts": {
2023-03-14 22:59:15,878 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 22:59:15,878 - INFO - },
2023-03-14 22:59:15,878 - INFO - "changed": false,
2023-03-14 22:59:15,878 - INFO - "checksum": "1bb1c680bf42bce57bd33e9ee945d27bb8aeaafc",
2023-03-14 22:59:15,878 - INFO - "dest": "runemon.sh",
2023-03-14 22:59:15,878 - INFO - "gid": 1007,
2023-03-14 22:59:15,878 - INFO - "group": "ansible",
2023-03-14 22:59:15,878 - INFO - "mode": "0755",
2023-03-14 22:59:15,878 - INFO - "owner": "ansible",
2023-03-14 22:59:15,878 - INFO - "path": "runemon.sh",
2023-03-14 22:59:15,878 - INFO - "size": 452,
2023-03-14 22:59:15,878 - INFO - "state": "file",
2023-03-14 22:59:15,878 - INFO - "uid": 1006
2023-03-14 22:59:15,879 - INFO - }
2023-03-14 22:59:17,262 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 22:59:17,262 - INFO - "ansible_facts": {
2023-03-14 22:59:17,263 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 22:59:17,263 - INFO - },
2023-03-14 22:59:17,263 - INFO - "changed": false,
2023-03-14 22:59:17,263 - INFO - "checksum": "0b7ce1d178a191ee4962273d5bcbcac8b825066d",
2023-03-14 22:59:17,263 - INFO - "dest": "sapphirerapids_server_events_private.txt",
2023-03-14 22:59:17,263 - INFO - "gid": 1007,
2023-03-14 22:59:17,263 - INFO - "group": "ansible",
2023-03-14 22:59:17,263 - INFO - "mode": "0664",
2023-03-14 22:59:17,263 - INFO - "owner": "ansible",
2023-03-14 22:59:17,263 - INFO - "path": "sapphirerapids_server_events_private.txt",
2023-03-14 22:59:17,263 - INFO - "size": 23423,
2023-03-14 22:59:17,263 - INFO - "state": "file",
2023-03-14 22:59:17,263 - INFO - "uid": 1006
2023-03-14 22:59:17,263 - INFO - }
2023-03-14 22:59:18,325 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:59:18,326 - INFO - 
2023-03-14 22:59:19,373 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:59:19,374 - INFO - 
2023-03-14 22:59:19,469 - INFO - Sleep 5 seconds then collect emon data for 30 seconds
2023-03-14 22:59:24,472 - INFO - Collecting 30 seconds sar data background
2023-03-14 22:59:26,448 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:59:26,448 - INFO - 
2023-03-14 22:59:28,508 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:59:28,508 - INFO - 
2023-03-14 22:59:30,572 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:59:30,573 - INFO - 
2023-03-14 22:59:32,638 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 22:59:32,639 - INFO - 
2023-03-14 22:59:32,735 - INFO - Collecting EMON data
2023-03-14 23:00:04,327 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:00:04,328 - INFO - Usage: sep_vars.sh [emon_api]
2023-03-14 23:00:04,328 - INFO - PATH=/opt/intel/sep/bin64:/opt/intel/sep/android_target:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2023-03-14 23:00:04,328 - INFO - CPATH=/opt/intel/sep/config/emon_api:
2023-03-14 23:00:04,328 - INFO - LIBRARY_PATH=/opt/intel/sep/lib64:
2023-03-14 23:00:04,328 - INFO - LD_LIBRARY_PATH=
2023-03-14 23:00:04,328 - INFO - SEP_BASE_DIR=/opt/intel/sep/bin64
2023-03-14 23:00:04,328 - INFO - SEP is currently installed under /opt/intel/sep/bin64
2023-03-14 23:00:04,328 - INFO - EMON collector successfully stopped.
2023-03-14 23:00:04,432 - INFO - Sleep another 30 seconds to make sure the previous run exit
2023-03-14 23:00:34,436 - INFO - Copy dat files
2023-03-14 23:00:35,439 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:00:35,439 - INFO - "changed": true,
2023-03-14 23:00:35,439 - INFO - "checksum": "1b24d076bfe8361dbbc7bcfc10284df62e248837",
2023-03-14 23:00:35,439 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/cpuutil.log",
2023-03-14 23:00:35,439 - INFO - "md5sum": "e395ba49cd60f970c093f5907ad48bda",
2023-03-14 23:00:35,439 - INFO - "remote_checksum": "1b24d076bfe8361dbbc7bcfc10284df62e248837",
2023-03-14 23:00:35,439 - INFO - "remote_md5sum": null
2023-03-14 23:00:35,439 - INFO - }
2023-03-14 23:00:36,543 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:00:36,544 - INFO - "changed": true,
2023-03-14 23:00:36,544 - INFO - "checksum": "3da9caab53202328ab5ad4d5db751140a2898659",
2023-03-14 23:00:36,544 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/diskutil.log",
2023-03-14 23:00:36,544 - INFO - "md5sum": "7f61041fe889caa9feba9f1182a249b7",
2023-03-14 23:00:36,544 - INFO - "remote_checksum": "3da9caab53202328ab5ad4d5db751140a2898659",
2023-03-14 23:00:36,544 - INFO - "remote_md5sum": null
2023-03-14 23:00:36,544 - INFO - }
2023-03-14 23:00:37,650 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:00:37,651 - INFO - "changed": true,
2023-03-14 23:00:37,651 - INFO - "checksum": "3df63be3a4b3abad718ae4612427a487d3e6b072",
2023-03-14 23:00:37,651 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/netutil.log",
2023-03-14 23:00:37,651 - INFO - "md5sum": "8b8f75b61004a2923f0539a178ee1c8e",
2023-03-14 23:00:37,651 - INFO - "remote_checksum": "3df63be3a4b3abad718ae4612427a487d3e6b072",
2023-03-14 23:00:37,651 - INFO - "remote_md5sum": null
2023-03-14 23:00:37,651 - INFO - }
2023-03-14 23:00:38,850 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:00:38,850 - INFO - "changed": true,
2023-03-14 23:00:38,850 - INFO - "checksum": "c1c9cebe201c3faa8ce5aaae19472cdf5aab4f9d",
2023-03-14 23:00:38,851 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/top.log",
2023-03-14 23:00:38,851 - INFO - "md5sum": "9325c826edc9b9bd4c6db0459e353a57",
2023-03-14 23:00:38,851 - INFO - "remote_checksum": "c1c9cebe201c3faa8ce5aaae19472cdf5aab4f9d",
2023-03-14 23:00:38,851 - INFO - "remote_md5sum": null
2023-03-14 23:00:38,851 - INFO - }
2023-03-14 23:00:39,984 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:00:39,984 - INFO - "changed": true,
2023-03-14 23:00:39,984 - INFO - "checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:00:39,984 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-v.dat",
2023-03-14 23:00:39,984 - INFO - "md5sum": "9ed6ca61f164c3a1ddac82b3adb8e41f",
2023-03-14 23:00:39,984 - INFO - "remote_checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:00:39,985 - INFO - "remote_md5sum": null
2023-03-14 23:00:39,985 - INFO - }
2023-03-14 23:00:41,205 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:00:41,205 - INFO - "changed": true,
2023-03-14 23:00:41,205 - INFO - "checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:00:41,206 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-M.dat",
2023-03-14 23:00:41,206 - INFO - "md5sum": "82b2e5d1d33c2feb6e5d5290b113dd3f",
2023-03-14 23:00:41,206 - INFO - "remote_checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:00:41,206 - INFO - "remote_md5sum": null
2023-03-14 23:00:41,206 - INFO - }
2023-03-14 23:00:42,800 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:00:42,801 - INFO - "changed": true,
2023-03-14 23:00:42,801 - INFO - "checksum": "f50da7c81c5ee2ce08d13ad609ceb06426316889",
2023-03-14 23:00:42,801 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon.dat",
2023-03-14 23:00:42,801 - INFO - "md5sum": "f913d42773e999f73895b30845591334",
2023-03-14 23:00:42,801 - INFO - "remote_checksum": "f50da7c81c5ee2ce08d13ad609ceb06426316889",
2023-03-14 23:00:42,801 - INFO - "remote_md5sum": null
2023-03-14 23:00:42,801 - INFO - }
2023-03-14 23:00:42,901 - INFO - 2. fetch the matrics of ai_pipeline
2023-03-14 23:00:42,901 - INFO - 3.  collect the result
2023-03-14 23:00:43,080 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(rate(container_cpu_usage_seconds_total{namespace="default", container!=""}[2m])[2m:])
2023-03-14 23:00:43,081 - INFO - metric_name is: cpu_usage
2023-03-14 23:00:43,081 - INFO - result is: [{'metric': {'container': 'ei-fss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podf765b16c_07f8_4261_9b64_3517dc6bafb7.slice/cri-containerd-88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-file-stream-service:2022WW47', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt', 'service': 'kubelet'}, 'value': [1678860043.066, '0.07233611111108378']}, {'metric': {'container': 'ei-gws', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podaf221d52_33c6_40a0_b6bf_e5e2bc7b88db.slice/cri-containerd-870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada.scope', 'image': 'ccr-registry.caas.intel.com/cnbench/ei-gateway-server:2022WW51-ws-8080', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9', 'service': 'kubelet'}, 'value': [1678860043.066, '0.0013030194444442916']}, {'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod02d1837b_ff70_47bc_b0a4_f4d5391af0d5.slice/cri-containerd-928bff7b5ff3366e0fbfe1f7c1a284c016a6ed7eeb77196b119aa10da81816d6.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-inference-service-tensorflow:2022WW49', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '928bff7b5ff3366e0fbfe1f7c1a284c016a6ed7eeb77196b119aa10da81816d6', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh', 'service': 'kubelet'}, 'value': [1678860043.066, '1.0534433722222218']}, {'metric': {'container': 'ei-wss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podd781997c_c6e4_4a9a_8814_f1a5e364edb4.slice/cri-containerd-d43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-websocket-server:2022WW51', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'd43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz', 'service': 'kubelet'}, 'value': [1678860043.066, '0.01536941388888206']}, {'metric': {'container': 'nfs-subdir-external-provisioner', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod008ca2f8_cd34_4bb5_9e75_b46ec5ce9a23.slice/cri-containerd-710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4.scope', 'image': 'k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg', 'service': 'kubelet'}, 'value': [1678860043.066, '0.0009806972222236253']}, {'metric': {'container': 'redis', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod0d8f249f_8e44_4dae_82d3_618b15befd15.slice/cri-containerd-0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e.scope', 'image': 'docker.io/library/redis:6.0', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-redis-deployment-68df56c9d5-9kt42', 'service': 'kubelet'}, 'value': [1678860043.066, '0.004731119444442002']}, {'metric': {'container': 'tmp-shell', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod9cbe7477_0ea6_463d_8c1e_33eb5efda051.slice/cri-containerd-9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9.scope', 'image': 'docker.io/nicolaka/netshoot:latest', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'tmp-shell', 'service': 'kubelet'}, 'value': [1678860043.066, '0']}]
2023-03-14 23:00:43,081 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=sum(container_memory_working_set_bytes{namespace="default",container!="", image!=""}) by (pod)
2023-03-14 23:00:43,081 - INFO - metric_name is: memory_usage
2023-03-14 23:00:43,081 - INFO - result is: [{'metric': {'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt'}, 'value': [1678860043.07, '386113536']}, {'metric': {'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9'}, 'value': [1678860043.07, '56893440']}, {'metric': {'pod': 'ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh'}, 'value': [1678860043.07, '519417856']}, {'metric': {'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz'}, 'value': [1678860043.07, '5093249024']}, {'metric': {'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg'}, 'value': [1678860043.07, '15556608']}, {'metric': {'pod': 'ei-redis-deployment-68df56c9d5-9kt42'}, 'value': [1678860043.07, '2445025280']}, {'metric': {'pod': 'tmp-shell'}, 'value': [1678860043.07, '847872']}]
2023-03-14 23:00:43,081 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_infer_fps{namespace="default"}[2m])
2023-03-14 23:00:43,081 - INFO - metric_name is: ei_infer_fps
2023-03-14 23:00:43,081 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.1:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678860043.075, '13.976876307697967']}]
2023-03-14 23:00:43,081 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_drop_fps{namespace="default"}[2m])
2023-03-14 23:00:43,081 - INFO - metric_name is: ei_drop_fps
2023-03-14 23:00:43,082 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.1:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678860043.078, '14.413474594426383']}]
2023-03-14 23:00:43,082 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_scale_ratio{namespace="default"}[2m])
2023-03-14 23:00:43,082 - INFO - metric_name is: ei_scale_ratio
2023-03-14 23:00:43,082 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.1:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678860043.081, '2.0314067452820534']}]
2023-03-14 23:00:43,082 - INFO - Results written to metrics/F18D_NON_AMX_BF16_metrics_20230314_230043.txt
2023-03-14 23:00:43,148 - INFO - ------------- scenario: 3/5 ------------
2023-03-14 23:00:43,148 - INFO - Begin set_deployment_env of scenario : VNNI_INT8 ...
2023-03-14 23:00:43,203 - INFO - Setting environment variables for scenario VNNI_INT8...
2023-03-14 23:00:43,224 - INFO - Setting resource requests and limits for scenario VNNI_INT8...
2023-03-14 23:00:43,245 - INFO - after patch_body wait for 30 seconds to enable the new pods
2023-03-14 23:01:13,276 - INFO - Waiting for 1 pods to be ready for scenario VNNI_INT8...
2023-03-14 23:01:13,357 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Running
2023-03-14 23:01:13,358 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Pending
2023-03-14 23:01:13,358 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario VNNI_INT8. Elapsed time: 0.08 seconds
2023-03-14 23:01:23,393 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Running
2023-03-14 23:01:23,394 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Pending
2023-03-14 23:01:23,394 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario VNNI_INT8. Elapsed time: 10.12 seconds
2023-03-14 23:01:33,430 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Running
2023-03-14 23:01:33,431 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Pending
2023-03-14 23:01:33,431 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario VNNI_INT8. Elapsed time: 20.15 seconds
2023-03-14 23:01:43,465 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Running
2023-03-14 23:01:43,465 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Pending
2023-03-14 23:01:43,465 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario VNNI_INT8. Elapsed time: 30.19 seconds
2023-03-14 23:01:53,500 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Running
2023-03-14 23:01:53,501 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Pending
2023-03-14 23:01:53,501 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario VNNI_INT8. Elapsed time: 40.22 seconds
2023-03-14 23:02:03,538 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Running
2023-03-14 23:02:03,539 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Pending
2023-03-14 23:02:03,539 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario VNNI_INT8. Elapsed time: 50.26 seconds
2023-03-14 23:02:13,574 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Running
2023-03-14 23:02:13,575 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Pending
2023-03-14 23:02:13,575 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario VNNI_INT8. Elapsed time: 60.30 seconds
2023-03-14 23:02:23,613 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5885789db6-2xvkh status:Running
2023-03-14 23:02:23,613 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Pending
2023-03-14 23:02:23,613 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario VNNI_INT8. Elapsed time: 70.34 seconds
2023-03-14 23:02:33,642 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Running
2023-03-14 23:02:33,642 - INFO - All 1 pods are ready for scenario VNNI_INT8
2023-03-14 23:02:33,644 - INFO - Finished scenario VNNI_INT8
2023-03-14 23:02:33,644 - INFO - wait for 2m to get stable metrics ...
2023-03-14 23:04:33,744 - INFO - Running benchmarking script for scenario VNNI_INT8...
2023-03-14 23:04:33,757 - INFO - TS=20230314230433
2023-03-14 23:04:35,750 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:04:35,751 - INFO - Reading package lists...
2023-03-14 23:04:35,751 - INFO - Building dependency tree...
2023-03-14 23:04:35,751 - INFO - Reading state information...
2023-03-14 23:04:35,751 - INFO - linux-tools-5.15.0-60-generic is already the newest version (5.15.0-60.66).
2023-03-14 23:04:35,751 - INFO - sysstat is already the newest version (12.5.2-2ubuntu0.1).
2023-03-14 23:04:35,751 - INFO - The following packages were automatically installed and are no longer required:
2023-03-14 23:04:35,751 - INFO - cgroupfs-mount libltdl7 pigz
2023-03-14 23:04:35,751 - INFO - Use 'sudo apt autoremove' to remove them.
2023-03-14 23:04:35,751 - INFO - 0 upgraded, 0 newly installed, 0 to remove and 44 not upgraded.
2023-03-14 23:04:35,751 - INFO - WARNING: apt does not have a stable CLI interface. Use with caution in scripts.
2023-03-14 23:04:36,850 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:04:36,850 - INFO - 
2023-03-14 23:04:37,911 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:04:37,912 - INFO - performance
2023-03-14 23:04:38,015 - INFO - Run on test AiPipeline_20230314230433_F18D_VNNI_INT8_6
2023-03-14 23:04:38,016 - INFO - TT=AiPipeline_20230314230433_F18D_VNNI_INT8_6,WRKDIR=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 23:04:38,022 - INFO - -----------loop num:1/3------------
2023-03-14 23:04:48,028 - INFO - 1.  fetch_emon.sh
2023-03-14 23:04:48,029 - INFO - pwd=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 23:04:49,316 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:04:49,316 - INFO - "ansible_facts": {
2023-03-14 23:04:49,317 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:04:49,317 - INFO - },
2023-03-14 23:04:49,317 - INFO - "changed": false,
2023-03-14 23:04:49,317 - INFO - "checksum": "1bb1c680bf42bce57bd33e9ee945d27bb8aeaafc",
2023-03-14 23:04:49,317 - INFO - "dest": "runemon.sh",
2023-03-14 23:04:49,317 - INFO - "gid": 1007,
2023-03-14 23:04:49,317 - INFO - "group": "ansible",
2023-03-14 23:04:49,317 - INFO - "mode": "0755",
2023-03-14 23:04:49,317 - INFO - "owner": "ansible",
2023-03-14 23:04:49,317 - INFO - "path": "runemon.sh",
2023-03-14 23:04:49,317 - INFO - "size": 452,
2023-03-14 23:04:49,317 - INFO - "state": "file",
2023-03-14 23:04:49,317 - INFO - "uid": 1006
2023-03-14 23:04:49,318 - INFO - }
2023-03-14 23:04:50,708 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:04:50,709 - INFO - "ansible_facts": {
2023-03-14 23:04:50,709 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:04:50,709 - INFO - },
2023-03-14 23:04:50,709 - INFO - "changed": false,
2023-03-14 23:04:50,709 - INFO - "checksum": "0b7ce1d178a191ee4962273d5bcbcac8b825066d",
2023-03-14 23:04:50,709 - INFO - "dest": "sapphirerapids_server_events_private.txt",
2023-03-14 23:04:50,709 - INFO - "gid": 1007,
2023-03-14 23:04:50,709 - INFO - "group": "ansible",
2023-03-14 23:04:50,709 - INFO - "mode": "0664",
2023-03-14 23:04:50,709 - INFO - "owner": "ansible",
2023-03-14 23:04:50,709 - INFO - "path": "sapphirerapids_server_events_private.txt",
2023-03-14 23:04:50,710 - INFO - "size": 23423,
2023-03-14 23:04:50,710 - INFO - "state": "file",
2023-03-14 23:04:50,710 - INFO - "uid": 1006
2023-03-14 23:04:50,710 - INFO - }
2023-03-14 23:04:51,794 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:04:51,794 - INFO - 
2023-03-14 23:04:52,849 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:04:52,849 - INFO - 
2023-03-14 23:04:52,951 - INFO - Sleep 5 seconds then collect emon data for 30 seconds
2023-03-14 23:04:57,954 - INFO - Collecting 30 seconds sar data background
2023-03-14 23:04:59,963 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:04:59,963 - INFO - 
2023-03-14 23:05:02,049 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:05:02,050 - INFO - 
2023-03-14 23:05:04,106 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:05:04,107 - INFO - 
2023-03-14 23:05:06,171 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:05:06,171 - INFO - 
2023-03-14 23:05:06,270 - INFO - Collecting EMON data
2023-03-14 23:05:37,828 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:05:37,828 - INFO - Usage: sep_vars.sh [emon_api]
2023-03-14 23:05:37,828 - INFO - PATH=/opt/intel/sep/bin64:/opt/intel/sep/android_target:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2023-03-14 23:05:37,828 - INFO - CPATH=/opt/intel/sep/config/emon_api:
2023-03-14 23:05:37,828 - INFO - LIBRARY_PATH=/opt/intel/sep/lib64:
2023-03-14 23:05:37,828 - INFO - LD_LIBRARY_PATH=
2023-03-14 23:05:37,828 - INFO - SEP_BASE_DIR=/opt/intel/sep/bin64
2023-03-14 23:05:37,829 - INFO - SEP is currently installed under /opt/intel/sep/bin64
2023-03-14 23:05:37,829 - INFO - EMON collector successfully stopped.
2023-03-14 23:05:37,932 - INFO - Sleep another 30 seconds to make sure the previous run exit
2023-03-14 23:06:07,935 - INFO - Copy dat files
2023-03-14 23:06:08,950 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:06:08,950 - INFO - "changed": true,
2023-03-14 23:06:08,950 - INFO - "checksum": "e033e1a63b0b9fc72c60a20b3f878165653d2e7e",
2023-03-14 23:06:08,951 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/cpuutil.log",
2023-03-14 23:06:08,951 - INFO - "md5sum": "5b41b62b19ba5886eca525eb0a2b2b1a",
2023-03-14 23:06:08,951 - INFO - "remote_checksum": "e033e1a63b0b9fc72c60a20b3f878165653d2e7e",
2023-03-14 23:06:08,951 - INFO - "remote_md5sum": null
2023-03-14 23:06:08,951 - INFO - }
2023-03-14 23:06:10,114 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:06:10,114 - INFO - "changed": true,
2023-03-14 23:06:10,114 - INFO - "checksum": "f3774f254310048be9d35ef59c41b4f78364dd9f",
2023-03-14 23:06:10,115 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/diskutil.log",
2023-03-14 23:06:10,115 - INFO - "md5sum": "ba56132865dad84c7e19a1cea905b373",
2023-03-14 23:06:10,115 - INFO - "remote_checksum": "f3774f254310048be9d35ef59c41b4f78364dd9f",
2023-03-14 23:06:10,115 - INFO - "remote_md5sum": null
2023-03-14 23:06:10,115 - INFO - }
2023-03-14 23:06:11,231 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:06:11,231 - INFO - "changed": true,
2023-03-14 23:06:11,231 - INFO - "checksum": "6383c237f6a693fac81e7c8391a8d7ad1295a283",
2023-03-14 23:06:11,231 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/netutil.log",
2023-03-14 23:06:11,231 - INFO - "md5sum": "1290e5238b407f3806f147c92e8b3cd2",
2023-03-14 23:06:11,231 - INFO - "remote_checksum": "6383c237f6a693fac81e7c8391a8d7ad1295a283",
2023-03-14 23:06:11,232 - INFO - "remote_md5sum": null
2023-03-14 23:06:11,232 - INFO - }
2023-03-14 23:06:12,368 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:06:12,368 - INFO - "changed": true,
2023-03-14 23:06:12,369 - INFO - "checksum": "42761fe4931d4590f981b05dc3fc4539498c4bfe",
2023-03-14 23:06:12,369 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/top.log",
2023-03-14 23:06:12,369 - INFO - "md5sum": "7432ca4e1f4a1b7a01f0ad8988caa71e",
2023-03-14 23:06:12,369 - INFO - "remote_checksum": "42761fe4931d4590f981b05dc3fc4539498c4bfe",
2023-03-14 23:06:12,369 - INFO - "remote_md5sum": null
2023-03-14 23:06:12,369 - INFO - }
2023-03-14 23:06:13,467 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:06:13,467 - INFO - "changed": true,
2023-03-14 23:06:13,467 - INFO - "checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:06:13,468 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-v.dat",
2023-03-14 23:06:13,468 - INFO - "md5sum": "9ed6ca61f164c3a1ddac82b3adb8e41f",
2023-03-14 23:06:13,468 - INFO - "remote_checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:06:13,468 - INFO - "remote_md5sum": null
2023-03-14 23:06:13,468 - INFO - }
2023-03-14 23:06:14,617 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:06:14,618 - INFO - "changed": true,
2023-03-14 23:06:14,618 - INFO - "checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:06:14,618 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-M.dat",
2023-03-14 23:06:14,618 - INFO - "md5sum": "82b2e5d1d33c2feb6e5d5290b113dd3f",
2023-03-14 23:06:14,618 - INFO - "remote_checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:06:14,618 - INFO - "remote_md5sum": null
2023-03-14 23:06:14,618 - INFO - }
2023-03-14 23:06:16,192 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:06:16,192 - INFO - "changed": true,
2023-03-14 23:06:16,192 - INFO - "checksum": "d7188d9ed83cfd73ed0d0c766bf0ac833382b0a0",
2023-03-14 23:06:16,192 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon.dat",
2023-03-14 23:06:16,192 - INFO - "md5sum": "c26494c5b0208e8a6a83aa09b7c7453a",
2023-03-14 23:06:16,192 - INFO - "remote_checksum": "d7188d9ed83cfd73ed0d0c766bf0ac833382b0a0",
2023-03-14 23:06:16,193 - INFO - "remote_md5sum": null
2023-03-14 23:06:16,193 - INFO - }
2023-03-14 23:06:16,289 - INFO - 2. fetch the matrics of ai_pipeline
2023-03-14 23:06:16,289 - INFO - 3.  collect the result
2023-03-14 23:06:16,452 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(rate(container_cpu_usage_seconds_total{namespace="default", container!=""}[2m])[2m:])
2023-03-14 23:06:16,453 - INFO - metric_name is: cpu_usage
2023-03-14 23:06:16,453 - INFO - result is: [{'metric': {'container': 'ei-fss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podf765b16c_07f8_4261_9b64_3517dc6bafb7.slice/cri-containerd-88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-file-stream-service:2022WW47', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt', 'service': 'kubelet'}, 'value': [1678860376.437, '0.0765624388888682']}, {'metric': {'container': 'ei-gws', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podaf221d52_33c6_40a0_b6bf_e5e2bc7b88db.slice/cri-containerd-870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada.scope', 'image': 'ccr-registry.caas.intel.com/cnbench/ei-gateway-server:2022WW51-ws-8080', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9', 'service': 'kubelet'}, 'value': [1678860376.437, '0.0011850055555555628']}, {'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-podf3b53b77_c941_4a22_90de_2255b02146d3.slice/cri-containerd-0542415472371c4002e335f5b17be0e9319337187ab3933481881804ce7a2760.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-inference-service-tensorflow:2022WW49', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0542415472371c4002e335f5b17be0e9319337187ab3933481881804ce7a2760', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc', 'service': 'kubelet'}, 'value': [1678860376.437, '0.37870512239620374']}, {'metric': {'container': 'ei-wss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podd781997c_c6e4_4a9a_8814_f1a5e364edb4.slice/cri-containerd-d43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-websocket-server:2022WW51', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'd43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz', 'service': 'kubelet'}, 'value': [1678860376.437, '0.003637280555555359']}, {'metric': {'container': 'nfs-subdir-external-provisioner', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod008ca2f8_cd34_4bb5_9e75_b46ec5ce9a23.slice/cri-containerd-710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4.scope', 'image': 'k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg', 'service': 'kubelet'}, 'value': [1678860376.437, '0.000936886111110703']}, {'metric': {'container': 'redis', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod0d8f249f_8e44_4dae_82d3_618b15befd15.slice/cri-containerd-0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e.scope', 'image': 'docker.io/library/redis:6.0', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-redis-deployment-68df56c9d5-9kt42', 'service': 'kubelet'}, 'value': [1678860376.437, '0.005978738888885952']}, {'metric': {'container': 'tmp-shell', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod9cbe7477_0ea6_463d_8c1e_33eb5efda051.slice/cri-containerd-9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9.scope', 'image': 'docker.io/nicolaka/netshoot:latest', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'tmp-shell', 'service': 'kubelet'}, 'value': [1678860376.437, '0']}]
2023-03-14 23:06:16,453 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=sum(container_memory_working_set_bytes{namespace="default",container!="", image!=""}) by (pod)
2023-03-14 23:06:16,453 - INFO - metric_name is: memory_usage
2023-03-14 23:06:16,453 - INFO - result is: [{'metric': {'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt'}, 'value': [1678860376.442, '386007040']}, {'metric': {'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9'}, 'value': [1678860376.442, '57024512']}, {'metric': {'pod': 'ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc'}, 'value': [1678860376.442, '339099648']}, {'metric': {'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz'}, 'value': [1678860376.442, '5093396480']}, {'metric': {'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg'}, 'value': [1678860376.442, '15171584']}, {'metric': {'pod': 'ei-redis-deployment-68df56c9d5-9kt42'}, 'value': [1678860376.442, '2443665408']}, {'metric': {'pod': 'tmp-shell'}, 'value': [1678860376.442, '847872']}]
2023-03-14 23:06:16,453 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_infer_fps{namespace="default"}[2m])
2023-03-14 23:06:16,453 - INFO - metric_name is: ei_infer_fps
2023-03-14 23:06:16,453 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.27:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678860376.446, '28.40747517854657']}]
2023-03-14 23:06:16,453 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_drop_fps{namespace="default"}[2m])
2023-03-14 23:06:16,453 - INFO - metric_name is: ei_drop_fps
2023-03-14 23:06:16,454 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.27:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678860376.45, '0']}]
2023-03-14 23:06:16,454 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_scale_ratio{namespace="default"}[2m])
2023-03-14 23:06:16,454 - INFO - metric_name is: ei_scale_ratio
2023-03-14 23:06:16,454 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.27:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678860376.453, '0.9434159864402549']}]
2023-03-14 23:06:16,454 - INFO - Results written to metrics/F18D_VNNI_INT8_metrics_20230314_230616.txt
2023-03-14 23:06:16,522 - INFO - sleep 120 seconds for the next round ...
2023-03-14 23:08:16,525 - INFO - -----------loop num:2/3------------
2023-03-14 23:08:26,532 - INFO - 1.  fetch_emon.sh
2023-03-14 23:08:26,534 - INFO - pwd=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 23:08:28,365 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:08:28,366 - INFO - "ansible_facts": {
2023-03-14 23:08:28,366 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:08:28,366 - INFO - },
2023-03-14 23:08:28,366 - INFO - "changed": false,
2023-03-14 23:08:28,366 - INFO - "checksum": "1bb1c680bf42bce57bd33e9ee945d27bb8aeaafc",
2023-03-14 23:08:28,366 - INFO - "dest": "runemon.sh",
2023-03-14 23:08:28,366 - INFO - "gid": 1007,
2023-03-14 23:08:28,366 - INFO - "group": "ansible",
2023-03-14 23:08:28,366 - INFO - "mode": "0755",
2023-03-14 23:08:28,366 - INFO - "owner": "ansible",
2023-03-14 23:08:28,366 - INFO - "path": "runemon.sh",
2023-03-14 23:08:28,366 - INFO - "size": 452,
2023-03-14 23:08:28,366 - INFO - "state": "file",
2023-03-14 23:08:28,367 - INFO - "uid": 1006
2023-03-14 23:08:28,367 - INFO - }
2023-03-14 23:08:29,760 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:08:29,760 - INFO - "ansible_facts": {
2023-03-14 23:08:29,760 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:08:29,760 - INFO - },
2023-03-14 23:08:29,760 - INFO - "changed": false,
2023-03-14 23:08:29,760 - INFO - "checksum": "0b7ce1d178a191ee4962273d5bcbcac8b825066d",
2023-03-14 23:08:29,760 - INFO - "dest": "sapphirerapids_server_events_private.txt",
2023-03-14 23:08:29,761 - INFO - "gid": 1007,
2023-03-14 23:08:29,761 - INFO - "group": "ansible",
2023-03-14 23:08:29,761 - INFO - "mode": "0664",
2023-03-14 23:08:29,761 - INFO - "owner": "ansible",
2023-03-14 23:08:29,761 - INFO - "path": "sapphirerapids_server_events_private.txt",
2023-03-14 23:08:29,761 - INFO - "size": 23423,
2023-03-14 23:08:29,761 - INFO - "state": "file",
2023-03-14 23:08:29,761 - INFO - "uid": 1006
2023-03-14 23:08:29,761 - INFO - }
2023-03-14 23:08:30,829 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:08:30,829 - INFO - 
2023-03-14 23:08:31,890 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:08:31,890 - INFO - 
2023-03-14 23:08:31,993 - INFO - Sleep 5 seconds then collect emon data for 30 seconds
2023-03-14 23:08:36,997 - INFO - Collecting 30 seconds sar data background
2023-03-14 23:08:38,966 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:08:38,966 - INFO - 
2023-03-14 23:08:41,066 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:08:41,066 - INFO - 
2023-03-14 23:08:43,129 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:08:43,130 - INFO - 
2023-03-14 23:08:45,190 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:08:45,190 - INFO - 
2023-03-14 23:08:45,289 - INFO - Collecting EMON data
2023-03-14 23:09:16,797 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:09:16,798 - INFO - Usage: sep_vars.sh [emon_api]
2023-03-14 23:09:16,798 - INFO - PATH=/opt/intel/sep/bin64:/opt/intel/sep/android_target:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2023-03-14 23:09:16,798 - INFO - CPATH=/opt/intel/sep/config/emon_api:
2023-03-14 23:09:16,798 - INFO - LIBRARY_PATH=/opt/intel/sep/lib64:
2023-03-14 23:09:16,798 - INFO - LD_LIBRARY_PATH=
2023-03-14 23:09:16,798 - INFO - SEP_BASE_DIR=/opt/intel/sep/bin64
2023-03-14 23:09:16,798 - INFO - SEP is currently installed under /opt/intel/sep/bin64
2023-03-14 23:09:16,798 - INFO - EMON collector successfully stopped.
2023-03-14 23:09:16,897 - INFO - Sleep another 30 seconds to make sure the previous run exit
2023-03-14 23:09:46,900 - INFO - Copy dat files
2023-03-14 23:09:47,914 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:09:47,914 - INFO - "changed": true,
2023-03-14 23:09:47,914 - INFO - "checksum": "3eb3ed225085360555f4e84201f921043f5dabe4",
2023-03-14 23:09:47,914 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/cpuutil.log",
2023-03-14 23:09:47,914 - INFO - "md5sum": "a527598f738ab2072a1bbeb987ffbeb6",
2023-03-14 23:09:47,914 - INFO - "remote_checksum": "3eb3ed225085360555f4e84201f921043f5dabe4",
2023-03-14 23:09:47,915 - INFO - "remote_md5sum": null
2023-03-14 23:09:47,915 - INFO - }
2023-03-14 23:09:49,011 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:09:49,012 - INFO - "changed": true,
2023-03-14 23:09:49,012 - INFO - "checksum": "1cb8719b2fccb70879d1934b4c9807517516c6bb",
2023-03-14 23:09:49,012 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/diskutil.log",
2023-03-14 23:09:49,012 - INFO - "md5sum": "5bafab6305e0ccf16827c3f8a11962ad",
2023-03-14 23:09:49,012 - INFO - "remote_checksum": "1cb8719b2fccb70879d1934b4c9807517516c6bb",
2023-03-14 23:09:49,012 - INFO - "remote_md5sum": null
2023-03-14 23:09:49,012 - INFO - }
2023-03-14 23:09:50,130 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:09:50,131 - INFO - "changed": true,
2023-03-14 23:09:50,131 - INFO - "checksum": "7a2a20bd03d741f73e51db2029dfdc64fc6f51c9",
2023-03-14 23:09:50,131 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/netutil.log",
2023-03-14 23:09:50,131 - INFO - "md5sum": "f0ce7a5de712045e5f191c36e3ef6c28",
2023-03-14 23:09:50,131 - INFO - "remote_checksum": "7a2a20bd03d741f73e51db2029dfdc64fc6f51c9",
2023-03-14 23:09:50,131 - INFO - "remote_md5sum": null
2023-03-14 23:09:50,131 - INFO - }
2023-03-14 23:09:51,273 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:09:51,274 - INFO - "changed": true,
2023-03-14 23:09:51,274 - INFO - "checksum": "b10c8874afc4617566b214c690a2655a52be95f1",
2023-03-14 23:09:51,274 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/top.log",
2023-03-14 23:09:51,274 - INFO - "md5sum": "7a3cde1a6886b969b654aa86ccd59f53",
2023-03-14 23:09:51,274 - INFO - "remote_checksum": "b10c8874afc4617566b214c690a2655a52be95f1",
2023-03-14 23:09:51,274 - INFO - "remote_md5sum": null
2023-03-14 23:09:51,274 - INFO - }
2023-03-14 23:09:52,406 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:09:52,406 - INFO - "changed": true,
2023-03-14 23:09:52,406 - INFO - "checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:09:52,407 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-v.dat",
2023-03-14 23:09:52,407 - INFO - "md5sum": "9ed6ca61f164c3a1ddac82b3adb8e41f",
2023-03-14 23:09:52,407 - INFO - "remote_checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:09:52,407 - INFO - "remote_md5sum": null
2023-03-14 23:09:52,407 - INFO - }
2023-03-14 23:09:53,517 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:09:53,518 - INFO - "changed": true,
2023-03-14 23:09:53,518 - INFO - "checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:09:53,518 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-M.dat",
2023-03-14 23:09:53,518 - INFO - "md5sum": "82b2e5d1d33c2feb6e5d5290b113dd3f",
2023-03-14 23:09:53,518 - INFO - "remote_checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:09:53,518 - INFO - "remote_md5sum": null
2023-03-14 23:09:53,518 - INFO - }
2023-03-14 23:09:55,106 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:09:55,107 - INFO - "changed": true,
2023-03-14 23:09:55,107 - INFO - "checksum": "5523647080ac757a9e95d13a50a000e8e6e2f37f",
2023-03-14 23:09:55,107 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon.dat",
2023-03-14 23:09:55,107 - INFO - "md5sum": "04687e099a917a52112924907217ec81",
2023-03-14 23:09:55,107 - INFO - "remote_checksum": "5523647080ac757a9e95d13a50a000e8e6e2f37f",
2023-03-14 23:09:55,107 - INFO - "remote_md5sum": null
2023-03-14 23:09:55,107 - INFO - }
2023-03-14 23:09:55,200 - INFO - 2. fetch the matrics of ai_pipeline
2023-03-14 23:09:55,200 - INFO - 3.  collect the result
2023-03-14 23:09:55,376 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(rate(container_cpu_usage_seconds_total{namespace="default", container!=""}[2m])[2m:])
2023-03-14 23:09:55,376 - INFO - metric_name is: cpu_usage
2023-03-14 23:09:55,377 - INFO - result is: [{'metric': {'container': 'ei-fss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podf765b16c_07f8_4261_9b64_3517dc6bafb7.slice/cri-containerd-88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-file-stream-service:2022WW47', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt', 'service': 'kubelet'}, 'value': [1678860595.362, '0.07390433888886036']}, {'metric': {'container': 'ei-gws', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podaf221d52_33c6_40a0_b6bf_e5e2bc7b88db.slice/cri-containerd-870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada.scope', 'image': 'ccr-registry.caas.intel.com/cnbench/ei-gateway-server:2022WW51-ws-8080', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9', 'service': 'kubelet'}, 'value': [1678860595.362, '0.0013815805555553752']}, {'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-podf3b53b77_c941_4a22_90de_2255b02146d3.slice/cri-containerd-0542415472371c4002e335f5b17be0e9319337187ab3933481881804ce7a2760.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-inference-service-tensorflow:2022WW49', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0542415472371c4002e335f5b17be0e9319337187ab3933481881804ce7a2760', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc', 'service': 'kubelet'}, 'value': [1678860595.362, '0.3897400249999999']}, {'metric': {'container': 'ei-wss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podd781997c_c6e4_4a9a_8814_f1a5e364edb4.slice/cri-containerd-d43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-websocket-server:2022WW51', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'd43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz', 'service': 'kubelet'}, 'value': [1678860595.362, '0.016985269444441856']}, {'metric': {'container': 'nfs-subdir-external-provisioner', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod008ca2f8_cd34_4bb5_9e75_b46ec5ce9a23.slice/cri-containerd-710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4.scope', 'image': 'k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg', 'service': 'kubelet'}, 'value': [1678860595.362, '0.001012711111112215']}, {'metric': {'container': 'redis', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod0d8f249f_8e44_4dae_82d3_618b15befd15.slice/cri-containerd-0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e.scope', 'image': 'docker.io/library/redis:6.0', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-redis-deployment-68df56c9d5-9kt42', 'service': 'kubelet'}, 'value': [1678860595.362, '0.005640722222213096']}, {'metric': {'container': 'tmp-shell', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod9cbe7477_0ea6_463d_8c1e_33eb5efda051.slice/cri-containerd-9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9.scope', 'image': 'docker.io/nicolaka/netshoot:latest', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'tmp-shell', 'service': 'kubelet'}, 'value': [1678860595.362, '0']}]
2023-03-14 23:09:55,377 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=sum(container_memory_working_set_bytes{namespace="default",container!="", image!=""}) by (pod)
2023-03-14 23:09:55,377 - INFO - metric_name is: memory_usage
2023-03-14 23:09:55,377 - INFO - result is: [{'metric': {'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt'}, 'value': [1678860595.366, '386002944']}, {'metric': {'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9'}, 'value': [1678860595.366, '56893440']}, {'metric': {'pod': 'ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc'}, 'value': [1678860595.366, '339099648']}, {'metric': {'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz'}, 'value': [1678860595.366, '5096022016']}, {'metric': {'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg'}, 'value': [1678860595.366, '15171584']}, {'metric': {'pod': 'ei-redis-deployment-68df56c9d5-9kt42'}, 'value': [1678860595.366, '2443853824']}, {'metric': {'pod': 'tmp-shell'}, 'value': [1678860595.366, '847872']}]
2023-03-14 23:09:55,377 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_infer_fps{namespace="default"}[2m])
2023-03-14 23:09:55,377 - INFO - metric_name is: ei_infer_fps
2023-03-14 23:09:55,377 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.27:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678860595.37, '28.358152798804227']}]
2023-03-14 23:09:55,377 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_drop_fps{namespace="default"}[2m])
2023-03-14 23:09:55,377 - INFO - metric_name is: ei_drop_fps
2023-03-14 23:09:55,377 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.27:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678860595.374, '0']}]
2023-03-14 23:09:55,377 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_scale_ratio{namespace="default"}[2m])
2023-03-14 23:09:55,377 - INFO - metric_name is: ei_scale_ratio
2023-03-14 23:09:55,378 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.27:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678860595.377, '0.9417779837228101']}]
2023-03-14 23:09:55,378 - INFO - Results written to metrics/F18D_VNNI_INT8_metrics_20230314_230955.txt
2023-03-14 23:09:55,445 - INFO - sleep 120 seconds for the next round ...
2023-03-14 23:11:55,448 - INFO - -----------loop num:3/3------------
2023-03-14 23:12:05,455 - INFO - 1.  fetch_emon.sh
2023-03-14 23:12:05,457 - INFO - pwd=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 23:12:07,309 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:12:07,310 - INFO - "ansible_facts": {
2023-03-14 23:12:07,310 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:12:07,310 - INFO - },
2023-03-14 23:12:07,310 - INFO - "changed": false,
2023-03-14 23:12:07,310 - INFO - "checksum": "1bb1c680bf42bce57bd33e9ee945d27bb8aeaafc",
2023-03-14 23:12:07,310 - INFO - "dest": "runemon.sh",
2023-03-14 23:12:07,310 - INFO - "gid": 1007,
2023-03-14 23:12:07,310 - INFO - "group": "ansible",
2023-03-14 23:12:07,310 - INFO - "mode": "0755",
2023-03-14 23:12:07,310 - INFO - "owner": "ansible",
2023-03-14 23:12:07,311 - INFO - "path": "runemon.sh",
2023-03-14 23:12:07,311 - INFO - "size": 452,
2023-03-14 23:12:07,311 - INFO - "state": "file",
2023-03-14 23:12:07,311 - INFO - "uid": 1006
2023-03-14 23:12:07,311 - INFO - }
2023-03-14 23:12:08,765 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:12:08,766 - INFO - "ansible_facts": {
2023-03-14 23:12:08,766 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:12:08,766 - INFO - },
2023-03-14 23:12:08,766 - INFO - "changed": false,
2023-03-14 23:12:08,766 - INFO - "checksum": "0b7ce1d178a191ee4962273d5bcbcac8b825066d",
2023-03-14 23:12:08,766 - INFO - "dest": "sapphirerapids_server_events_private.txt",
2023-03-14 23:12:08,766 - INFO - "gid": 1007,
2023-03-14 23:12:08,766 - INFO - "group": "ansible",
2023-03-14 23:12:08,766 - INFO - "mode": "0664",
2023-03-14 23:12:08,766 - INFO - "owner": "ansible",
2023-03-14 23:12:08,766 - INFO - "path": "sapphirerapids_server_events_private.txt",
2023-03-14 23:12:08,767 - INFO - "size": 23423,
2023-03-14 23:12:08,767 - INFO - "state": "file",
2023-03-14 23:12:08,767 - INFO - "uid": 1006
2023-03-14 23:12:08,767 - INFO - }
2023-03-14 23:12:09,783 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:12:09,783 - INFO - 
2023-03-14 23:12:10,823 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:12:10,823 - INFO - 
2023-03-14 23:12:10,924 - INFO - Sleep 5 seconds then collect emon data for 30 seconds
2023-03-14 23:12:15,927 - INFO - Collecting 30 seconds sar data background
2023-03-14 23:12:17,883 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:12:17,884 - INFO - 
2023-03-14 23:12:19,931 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:12:19,932 - INFO - 
2023-03-14 23:12:21,997 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:12:21,998 - INFO - 
2023-03-14 23:12:24,066 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:12:24,066 - INFO - 
2023-03-14 23:12:24,167 - INFO - Collecting EMON data
2023-03-14 23:12:55,699 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:12:55,700 - INFO - Usage: sep_vars.sh [emon_api]
2023-03-14 23:12:55,700 - INFO - PATH=/opt/intel/sep/bin64:/opt/intel/sep/android_target:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2023-03-14 23:12:55,700 - INFO - CPATH=/opt/intel/sep/config/emon_api:
2023-03-14 23:12:55,700 - INFO - LIBRARY_PATH=/opt/intel/sep/lib64:
2023-03-14 23:12:55,700 - INFO - LD_LIBRARY_PATH=
2023-03-14 23:12:55,700 - INFO - SEP_BASE_DIR=/opt/intel/sep/bin64
2023-03-14 23:12:55,700 - INFO - SEP is currently installed under /opt/intel/sep/bin64
2023-03-14 23:12:55,701 - INFO - EMON collector successfully stopped.
2023-03-14 23:12:55,807 - INFO - Sleep another 30 seconds to make sure the previous run exit
2023-03-14 23:13:25,810 - INFO - Copy dat files
2023-03-14 23:13:26,811 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:13:26,811 - INFO - "changed": true,
2023-03-14 23:13:26,811 - INFO - "checksum": "f82c0ede101c8936dd0fa6e5f441194cb31f693d",
2023-03-14 23:13:26,812 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/cpuutil.log",
2023-03-14 23:13:26,812 - INFO - "md5sum": "7c8642945f205cfde2973b8133d61526",
2023-03-14 23:13:26,812 - INFO - "remote_checksum": "f82c0ede101c8936dd0fa6e5f441194cb31f693d",
2023-03-14 23:13:26,812 - INFO - "remote_md5sum": null
2023-03-14 23:13:26,812 - INFO - }
2023-03-14 23:13:27,907 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:13:27,907 - INFO - "changed": true,
2023-03-14 23:13:27,907 - INFO - "checksum": "45a8dee4ccc00b82fcb3cadcb4f55b3b4f3facab",
2023-03-14 23:13:27,907 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/diskutil.log",
2023-03-14 23:13:27,907 - INFO - "md5sum": "fc24a2986d6253bc8e48002f4bd0077f",
2023-03-14 23:13:27,907 - INFO - "remote_checksum": "45a8dee4ccc00b82fcb3cadcb4f55b3b4f3facab",
2023-03-14 23:13:27,907 - INFO - "remote_md5sum": null
2023-03-14 23:13:27,908 - INFO - }
2023-03-14 23:13:28,801 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:13:28,802 - INFO - "changed": true,
2023-03-14 23:13:28,802 - INFO - "checksum": "3163cb6a990faf72dbd0614c9092ddff0b0c4d3c",
2023-03-14 23:13:28,802 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/netutil.log",
2023-03-14 23:13:28,802 - INFO - "md5sum": "e57a7792bec8ae880c458245397b536a",
2023-03-14 23:13:28,802 - INFO - "remote_checksum": "3163cb6a990faf72dbd0614c9092ddff0b0c4d3c",
2023-03-14 23:13:28,802 - INFO - "remote_md5sum": null
2023-03-14 23:13:28,802 - INFO - }
2023-03-14 23:13:29,980 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:13:29,981 - INFO - "changed": true,
2023-03-14 23:13:29,981 - INFO - "checksum": "f3e3f5a6ade3994aa9f05cf2ae49ddc0ac4087cb",
2023-03-14 23:13:29,981 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/top.log",
2023-03-14 23:13:29,981 - INFO - "md5sum": "95e528e298bc9873194042e0ac7f3705",
2023-03-14 23:13:29,981 - INFO - "remote_checksum": "f3e3f5a6ade3994aa9f05cf2ae49ddc0ac4087cb",
2023-03-14 23:13:29,981 - INFO - "remote_md5sum": null
2023-03-14 23:13:29,981 - INFO - }
2023-03-14 23:13:31,096 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:13:31,097 - INFO - "changed": true,
2023-03-14 23:13:31,097 - INFO - "checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:13:31,097 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-v.dat",
2023-03-14 23:13:31,097 - INFO - "md5sum": "9ed6ca61f164c3a1ddac82b3adb8e41f",
2023-03-14 23:13:31,097 - INFO - "remote_checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:13:31,097 - INFO - "remote_md5sum": null
2023-03-14 23:13:31,097 - INFO - }
2023-03-14 23:13:32,194 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:13:32,194 - INFO - "changed": true,
2023-03-14 23:13:32,194 - INFO - "checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:13:32,195 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-M.dat",
2023-03-14 23:13:32,195 - INFO - "md5sum": "82b2e5d1d33c2feb6e5d5290b113dd3f",
2023-03-14 23:13:32,195 - INFO - "remote_checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:13:32,195 - INFO - "remote_md5sum": null
2023-03-14 23:13:32,195 - INFO - }
2023-03-14 23:13:33,763 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:13:33,764 - INFO - "changed": true,
2023-03-14 23:13:33,764 - INFO - "checksum": "5eedca5263a3fed81db88e4788e794b9ce29b983",
2023-03-14 23:13:33,764 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon.dat",
2023-03-14 23:13:33,764 - INFO - "md5sum": "e14f86f6dc95d337b331a85c2ca250b5",
2023-03-14 23:13:33,764 - INFO - "remote_checksum": "5eedca5263a3fed81db88e4788e794b9ce29b983",
2023-03-14 23:13:33,764 - INFO - "remote_md5sum": null
2023-03-14 23:13:33,764 - INFO - }
2023-03-14 23:13:33,861 - INFO - 2. fetch the matrics of ai_pipeline
2023-03-14 23:13:33,861 - INFO - 3.  collect the result
2023-03-14 23:13:34,023 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(rate(container_cpu_usage_seconds_total{namespace="default", container!=""}[2m])[2m:])
2023-03-14 23:13:34,023 - INFO - metric_name is: cpu_usage
2023-03-14 23:13:34,023 - INFO - result is: [{'metric': {'container': 'ei-fss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podf765b16c_07f8_4261_9b64_3517dc6bafb7.slice/cri-containerd-88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-file-stream-service:2022WW47', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt', 'service': 'kubelet'}, 'value': [1678860814.008, '0.07488210277778207']}, {'metric': {'container': 'ei-gws', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podaf221d52_33c6_40a0_b6bf_e5e2bc7b88db.slice/cri-containerd-870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada.scope', 'image': 'ccr-registry.caas.intel.com/cnbench/ei-gateway-server:2022WW51-ws-8080', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9', 'service': 'kubelet'}, 'value': [1678860814.008, '0.0012332722222228969']}, {'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-podf3b53b77_c941_4a22_90de_2255b02146d3.slice/cri-containerd-0542415472371c4002e335f5b17be0e9319337187ab3933481881804ce7a2760.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-inference-service-tensorflow:2022WW49', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0542415472371c4002e335f5b17be0e9319337187ab3933481881804ce7a2760', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc', 'service': 'kubelet'}, 'value': [1678860814.008, '0.3982415972222222']}, {'metric': {'container': 'ei-wss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podd781997c_c6e4_4a9a_8814_f1a5e364edb4.slice/cri-containerd-d43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-websocket-server:2022WW51', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'd43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz', 'service': 'kubelet'}, 'value': [1678860814.008, '0.0035185416666687766']}, {'metric': {'container': 'nfs-subdir-external-provisioner', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod008ca2f8_cd34_4bb5_9e75_b46ec5ce9a23.slice/cri-containerd-710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4.scope', 'image': 'k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg', 'service': 'kubelet'}, 'value': [1678860814.008, '0.0009487861111109749']}, {'metric': {'container': 'redis', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod0d8f249f_8e44_4dae_82d3_618b15befd15.slice/cri-containerd-0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e.scope', 'image': 'docker.io/library/redis:6.0', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-redis-deployment-68df56c9d5-9kt42', 'service': 'kubelet'}, 'value': [1678860814.008, '0.00614976111111092']}, {'metric': {'container': 'tmp-shell', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod9cbe7477_0ea6_463d_8c1e_33eb5efda051.slice/cri-containerd-9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9.scope', 'image': 'docker.io/nicolaka/netshoot:latest', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'tmp-shell', 'service': 'kubelet'}, 'value': [1678860814.008, '0']}]
2023-03-14 23:13:34,023 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=sum(container_memory_working_set_bytes{namespace="default",container!="", image!=""}) by (pod)
2023-03-14 23:13:34,023 - INFO - metric_name is: memory_usage
2023-03-14 23:13:34,023 - INFO - result is: [{'metric': {'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt'}, 'value': [1678860814.013, '386260992']}, {'metric': {'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9'}, 'value': [1678860814.013, '56893440']}, {'metric': {'pod': 'ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc'}, 'value': [1678860814.013, '339124224']}, {'metric': {'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz'}, 'value': [1678860814.013, '5093322752']}, {'metric': {'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg'}, 'value': [1678860814.013, '15433728']}, {'metric': {'pod': 'ei-redis-deployment-68df56c9d5-9kt42'}, 'value': [1678860814.013, '2443542528']}, {'metric': {'pod': 'tmp-shell'}, 'value': [1678860814.013, '847872']}]
2023-03-14 23:13:34,023 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_infer_fps{namespace="default"}[2m])
2023-03-14 23:13:34,023 - INFO - metric_name is: ei_infer_fps
2023-03-14 23:13:34,024 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.27:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678860814.017, '28.370487671863067']}]
2023-03-14 23:13:34,024 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_drop_fps{namespace="default"}[2m])
2023-03-14 23:13:34,024 - INFO - metric_name is: ei_drop_fps
2023-03-14 23:13:34,024 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.27:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678860814.02, '0']}]
2023-03-14 23:13:34,024 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_scale_ratio{namespace="default"}[2m])
2023-03-14 23:13:34,024 - INFO - metric_name is: ei_scale_ratio
2023-03-14 23:13:34,024 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.27:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678860814.024, '0.9421876264792073']}]
2023-03-14 23:13:34,024 - INFO - Results written to metrics/F18D_VNNI_INT8_metrics_20230314_231334.txt
2023-03-14 23:13:34,090 - INFO - ------------- scenario: 4/5 ------------
2023-03-14 23:13:34,091 - INFO - Begin set_deployment_env of scenario : NON_VNNI_INT8 ...
2023-03-14 23:13:34,145 - INFO - Setting environment variables for scenario NON_VNNI_INT8...
2023-03-14 23:13:34,167 - INFO - Setting resource requests and limits for scenario NON_VNNI_INT8...
2023-03-14 23:13:34,186 - INFO - after patch_body wait for 30 seconds to enable the new pods
2023-03-14 23:14:04,217 - INFO - Waiting for 1 pods to be ready for scenario NON_VNNI_INT8...
2023-03-14 23:14:04,301 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Running
2023-03-14 23:14:04,301 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Pending
2023-03-14 23:14:04,301 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_VNNI_INT8. Elapsed time: 0.08 seconds
2023-03-14 23:14:14,337 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Running
2023-03-14 23:14:14,337 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Pending
2023-03-14 23:14:14,337 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_VNNI_INT8. Elapsed time: 10.12 seconds
2023-03-14 23:14:24,373 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Running
2023-03-14 23:14:24,373 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Pending
2023-03-14 23:14:24,373 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_VNNI_INT8. Elapsed time: 20.16 seconds
2023-03-14 23:14:34,409 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Running
2023-03-14 23:14:34,409 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Pending
2023-03-14 23:14:34,410 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_VNNI_INT8. Elapsed time: 30.19 seconds
2023-03-14 23:14:44,446 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Running
2023-03-14 23:14:44,446 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Pending
2023-03-14 23:14:44,446 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_VNNI_INT8. Elapsed time: 40.23 seconds
2023-03-14 23:14:54,483 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Running
2023-03-14 23:14:54,483 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Pending
2023-03-14 23:14:54,484 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_VNNI_INT8. Elapsed time: 50.27 seconds
2023-03-14 23:15:04,555 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-7f556f77dd-787fc status:Running
2023-03-14 23:15:04,555 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Pending
2023-03-14 23:15:04,555 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario NON_VNNI_INT8. Elapsed time: 60.34 seconds
2023-03-14 23:15:14,584 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:15:14,585 - INFO - All 1 pods are ready for scenario NON_VNNI_INT8
2023-03-14 23:15:14,586 - INFO - Finished scenario NON_VNNI_INT8
2023-03-14 23:15:14,586 - INFO - wait for 2m to get stable metrics ...
2023-03-14 23:17:14,687 - INFO - Running benchmarking script for scenario NON_VNNI_INT8...
2023-03-14 23:17:14,700 - INFO - TS=20230314231714
2023-03-14 23:17:16,369 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:17:16,370 - INFO - Reading package lists...
2023-03-14 23:17:16,370 - INFO - Building dependency tree...
2023-03-14 23:17:16,370 - INFO - Reading state information...
2023-03-14 23:17:16,370 - INFO - linux-tools-5.15.0-60-generic is already the newest version (5.15.0-60.66).
2023-03-14 23:17:16,370 - INFO - sysstat is already the newest version (12.5.2-2ubuntu0.1).
2023-03-14 23:17:16,370 - INFO - The following packages were automatically installed and are no longer required:
2023-03-14 23:17:16,370 - INFO - cgroupfs-mount libltdl7 pigz
2023-03-14 23:17:16,370 - INFO - Use 'sudo apt autoremove' to remove them.
2023-03-14 23:17:16,370 - INFO - 0 upgraded, 0 newly installed, 0 to remove and 44 not upgraded.
2023-03-14 23:17:16,370 - INFO - WARNING: apt does not have a stable CLI interface. Use with caution in scripts.
2023-03-14 23:17:17,512 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:17:17,513 - INFO - 
2023-03-14 23:17:18,578 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:17:18,579 - INFO - performance
2023-03-14 23:17:18,677 - INFO - Run on test AiPipeline_20230314231714_F18D_NON_VNNI_INT8_6
2023-03-14 23:17:18,677 - INFO - TT=AiPipeline_20230314231714_F18D_NON_VNNI_INT8_6,WRKDIR=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 23:17:18,683 - INFO - -----------loop num:1/3------------
2023-03-14 23:17:28,690 - INFO - 1.  fetch_emon.sh
2023-03-14 23:17:28,691 - INFO - pwd=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 23:17:30,041 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:17:30,042 - INFO - "ansible_facts": {
2023-03-14 23:17:30,042 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:17:30,042 - INFO - },
2023-03-14 23:17:30,042 - INFO - "changed": false,
2023-03-14 23:17:30,042 - INFO - "checksum": "1bb1c680bf42bce57bd33e9ee945d27bb8aeaafc",
2023-03-14 23:17:30,042 - INFO - "dest": "runemon.sh",
2023-03-14 23:17:30,042 - INFO - "gid": 1007,
2023-03-14 23:17:30,042 - INFO - "group": "ansible",
2023-03-14 23:17:30,042 - INFO - "mode": "0755",
2023-03-14 23:17:30,043 - INFO - "owner": "ansible",
2023-03-14 23:17:30,043 - INFO - "path": "runemon.sh",
2023-03-14 23:17:30,043 - INFO - "size": 452,
2023-03-14 23:17:30,043 - INFO - "state": "file",
2023-03-14 23:17:30,043 - INFO - "uid": 1006
2023-03-14 23:17:30,043 - INFO - }
2023-03-14 23:17:31,433 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:17:31,434 - INFO - "ansible_facts": {
2023-03-14 23:17:31,434 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:17:31,434 - INFO - },
2023-03-14 23:17:31,434 - INFO - "changed": false,
2023-03-14 23:17:31,434 - INFO - "checksum": "0b7ce1d178a191ee4962273d5bcbcac8b825066d",
2023-03-14 23:17:31,434 - INFO - "dest": "sapphirerapids_server_events_private.txt",
2023-03-14 23:17:31,434 - INFO - "gid": 1007,
2023-03-14 23:17:31,434 - INFO - "group": "ansible",
2023-03-14 23:17:31,435 - INFO - "mode": "0664",
2023-03-14 23:17:31,435 - INFO - "owner": "ansible",
2023-03-14 23:17:31,435 - INFO - "path": "sapphirerapids_server_events_private.txt",
2023-03-14 23:17:31,435 - INFO - "size": 23423,
2023-03-14 23:17:31,435 - INFO - "state": "file",
2023-03-14 23:17:31,435 - INFO - "uid": 1006
2023-03-14 23:17:31,435 - INFO - }
2023-03-14 23:17:32,502 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:17:32,503 - INFO - 
2023-03-14 23:17:33,563 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:17:33,563 - INFO - 
2023-03-14 23:17:33,666 - INFO - Sleep 5 seconds then collect emon data for 30 seconds
2023-03-14 23:17:38,669 - INFO - Collecting 30 seconds sar data background
2023-03-14 23:17:40,644 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:17:40,645 - INFO - 
2023-03-14 23:17:42,707 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:17:42,707 - INFO - 
2023-03-14 23:17:44,771 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:17:44,771 - INFO - 
2023-03-14 23:17:46,831 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:17:46,831 - INFO - 
2023-03-14 23:17:46,931 - INFO - Collecting EMON data
2023-03-14 23:18:18,411 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:18:18,411 - INFO - Usage: sep_vars.sh [emon_api]
2023-03-14 23:18:18,411 - INFO - PATH=/opt/intel/sep/bin64:/opt/intel/sep/android_target:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2023-03-14 23:18:18,411 - INFO - CPATH=/opt/intel/sep/config/emon_api:
2023-03-14 23:18:18,411 - INFO - LIBRARY_PATH=/opt/intel/sep/lib64:
2023-03-14 23:18:18,411 - INFO - LD_LIBRARY_PATH=
2023-03-14 23:18:18,412 - INFO - SEP_BASE_DIR=/opt/intel/sep/bin64
2023-03-14 23:18:18,412 - INFO - SEP is currently installed under /opt/intel/sep/bin64
2023-03-14 23:18:18,412 - INFO - EMON collector successfully stopped.
2023-03-14 23:18:18,519 - INFO - Sleep another 30 seconds to make sure the previous run exit
2023-03-14 23:18:48,522 - INFO - Copy dat files
2023-03-14 23:18:49,532 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:18:49,532 - INFO - "changed": true,
2023-03-14 23:18:49,532 - INFO - "checksum": "da1820379f93265d3fc914ccbe0ade9796575b71",
2023-03-14 23:18:49,532 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/cpuutil.log",
2023-03-14 23:18:49,532 - INFO - "md5sum": "0c5ba328faba648cf3204bd36afa865f",
2023-03-14 23:18:49,532 - INFO - "remote_checksum": "da1820379f93265d3fc914ccbe0ade9796575b71",
2023-03-14 23:18:49,533 - INFO - "remote_md5sum": null
2023-03-14 23:18:49,533 - INFO - }
2023-03-14 23:18:50,643 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:18:50,643 - INFO - "changed": true,
2023-03-14 23:18:50,644 - INFO - "checksum": "31d746f25e483dfe8cdab02d6b47807e77debbe7",
2023-03-14 23:18:50,644 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/diskutil.log",
2023-03-14 23:18:50,644 - INFO - "md5sum": "cd597e12e6b0fb09e1435976d83a77b0",
2023-03-14 23:18:50,644 - INFO - "remote_checksum": "31d746f25e483dfe8cdab02d6b47807e77debbe7",
2023-03-14 23:18:50,644 - INFO - "remote_md5sum": null
2023-03-14 23:18:50,644 - INFO - }
2023-03-14 23:18:51,743 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:18:51,744 - INFO - "changed": true,
2023-03-14 23:18:51,744 - INFO - "checksum": "ef7fb45bb13f5c1f52e1ff240a6cb2e5e7ee84b9",
2023-03-14 23:18:51,744 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/netutil.log",
2023-03-14 23:18:51,744 - INFO - "md5sum": "913ee37048e98e9fca447244ed1fc262",
2023-03-14 23:18:51,744 - INFO - "remote_checksum": "ef7fb45bb13f5c1f52e1ff240a6cb2e5e7ee84b9",
2023-03-14 23:18:51,744 - INFO - "remote_md5sum": null
2023-03-14 23:18:51,744 - INFO - }
2023-03-14 23:18:52,897 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:18:52,898 - INFO - "changed": true,
2023-03-14 23:18:52,898 - INFO - "checksum": "a66d41a0aacaaa4c60d8bffc1a3431a76ba77afd",
2023-03-14 23:18:52,898 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/top.log",
2023-03-14 23:18:52,898 - INFO - "md5sum": "1ddae1bc148d5144760c14a935d4af58",
2023-03-14 23:18:52,898 - INFO - "remote_checksum": "a66d41a0aacaaa4c60d8bffc1a3431a76ba77afd",
2023-03-14 23:18:52,898 - INFO - "remote_md5sum": null
2023-03-14 23:18:52,898 - INFO - }
2023-03-14 23:18:53,997 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:18:53,998 - INFO - "changed": true,
2023-03-14 23:18:53,998 - INFO - "checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:18:53,998 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-v.dat",
2023-03-14 23:18:53,998 - INFO - "md5sum": "9ed6ca61f164c3a1ddac82b3adb8e41f",
2023-03-14 23:18:53,998 - INFO - "remote_checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:18:53,998 - INFO - "remote_md5sum": null
2023-03-14 23:18:53,998 - INFO - }
2023-03-14 23:18:55,131 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:18:55,131 - INFO - "changed": true,
2023-03-14 23:18:55,131 - INFO - "checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:18:55,131 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-M.dat",
2023-03-14 23:18:55,131 - INFO - "md5sum": "82b2e5d1d33c2feb6e5d5290b113dd3f",
2023-03-14 23:18:55,131 - INFO - "remote_checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:18:55,131 - INFO - "remote_md5sum": null
2023-03-14 23:18:55,132 - INFO - }
2023-03-14 23:18:56,698 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:18:56,698 - INFO - "changed": true,
2023-03-14 23:18:56,698 - INFO - "checksum": "57a3d79382c3b02b65569546717b033337ef8b88",
2023-03-14 23:18:56,698 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon.dat",
2023-03-14 23:18:56,698 - INFO - "md5sum": "b7db462559e5266fd052d255c1b97742",
2023-03-14 23:18:56,699 - INFO - "remote_checksum": "57a3d79382c3b02b65569546717b033337ef8b88",
2023-03-14 23:18:56,699 - INFO - "remote_md5sum": null
2023-03-14 23:18:56,699 - INFO - }
2023-03-14 23:18:56,793 - INFO - 2. fetch the matrics of ai_pipeline
2023-03-14 23:18:56,794 - INFO - 3.  collect the result
2023-03-14 23:18:56,968 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(rate(container_cpu_usage_seconds_total{namespace="default", container!=""}[2m])[2m:])
2023-03-14 23:18:56,969 - INFO - metric_name is: cpu_usage
2023-03-14 23:18:56,969 - INFO - result is: [{'metric': {'container': 'ei-fss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podf765b16c_07f8_4261_9b64_3517dc6bafb7.slice/cri-containerd-88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-file-stream-service:2022WW47', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt', 'service': 'kubelet'}, 'value': [1678861136.953, '0.0732121083333469']}, {'metric': {'container': 'ei-gws', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podaf221d52_33c6_40a0_b6bf_e5e2bc7b88db.slice/cri-containerd-870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada.scope', 'image': 'ccr-registry.caas.intel.com/cnbench/ei-gateway-server:2022WW51-ws-8080', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9', 'service': 'kubelet'}, 'value': [1678861136.953, '0.0013061555555553797']}, {'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod5c088b4a_96fe_4f4a_afdf_bba940cd2872.slice/cri-containerd-dc1efd84838b8d58c1ce1540b62c1b34abf4c47e49bfd435bfd295d65e7074a6.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-inference-service-tensorflow:2022WW49', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'dc1efd84838b8d58c1ce1540b62c1b34abf4c47e49bfd435bfd295d65e7074a6', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7', 'service': 'kubelet'}, 'value': [1678861136.953, '0.5467139511878703']}, {'metric': {'container': 'ei-wss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podd781997c_c6e4_4a9a_8814_f1a5e364edb4.slice/cri-containerd-d43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-websocket-server:2022WW51', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'd43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz', 'service': 'kubelet'}, 'value': [1678861136.953, '0.005969683333331785']}, {'metric': {'container': 'nfs-subdir-external-provisioner', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod008ca2f8_cd34_4bb5_9e75_b46ec5ce9a23.slice/cri-containerd-710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4.scope', 'image': 'k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg', 'service': 'kubelet'}, 'value': [1678861136.953, '0.0009770083333339446']}, {'metric': {'container': 'redis', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod0d8f249f_8e44_4dae_82d3_618b15befd15.slice/cri-containerd-0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e.scope', 'image': 'docker.io/library/redis:6.0', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-redis-deployment-68df56c9d5-9kt42', 'service': 'kubelet'}, 'value': [1678861136.953, '0.005818927777772842']}, {'metric': {'container': 'tmp-shell', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod9cbe7477_0ea6_463d_8c1e_33eb5efda051.slice/cri-containerd-9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9.scope', 'image': 'docker.io/nicolaka/netshoot:latest', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'tmp-shell', 'service': 'kubelet'}, 'value': [1678861136.953, '0']}]
2023-03-14 23:18:56,969 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=sum(container_memory_working_set_bytes{namespace="default",container!="", image!=""}) by (pod)
2023-03-14 23:18:56,969 - INFO - metric_name is: memory_usage
2023-03-14 23:18:56,969 - INFO - result is: [{'metric': {'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt'}, 'value': [1678861136.958, '386134016']}, {'metric': {'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9'}, 'value': [1678861136.958, '56909824']}, {'metric': {'pod': 'ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7'}, 'value': [1678861136.958, '338931712']}, {'metric': {'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz'}, 'value': [1678861136.958, '5093609472']}, {'metric': {'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg'}, 'value': [1678861136.958, '15171584']}, {'metric': {'pod': 'ei-redis-deployment-68df56c9d5-9kt42'}, 'value': [1678861136.958, '2443972608']}, {'metric': {'pod': 'tmp-shell'}, 'value': [1678861136.958, '847872']}]
2023-03-14 23:18:56,969 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_infer_fps{namespace="default"}[2m])
2023-03-14 23:18:56,969 - INFO - metric_name is: ei_infer_fps
2023-03-14 23:18:56,969 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.3:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678861136.962, '28.37898046078366']}]
2023-03-14 23:18:56,969 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_drop_fps{namespace="default"}[2m])
2023-03-14 23:18:56,969 - INFO - metric_name is: ei_drop_fps
2023-03-14 23:18:56,970 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.3:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678861136.966, '0']}]
2023-03-14 23:18:56,970 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_scale_ratio{namespace="default"}[2m])
2023-03-14 23:18:56,970 - INFO - metric_name is: ei_scale_ratio
2023-03-14 23:18:56,970 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.3:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678861136.969, '0.9775739735772342']}]
2023-03-14 23:18:56,970 - INFO - Results written to metrics/F18D_NON_VNNI_INT8_metrics_20230314_231856.txt
2023-03-14 23:18:57,030 - INFO - sleep 120 seconds for the next round ...
2023-03-14 23:20:57,033 - INFO - -----------loop num:2/3------------
2023-03-14 23:21:07,040 - INFO - 1.  fetch_emon.sh
2023-03-14 23:21:07,042 - INFO - pwd=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 23:21:08,923 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:21:08,923 - INFO - "ansible_facts": {
2023-03-14 23:21:08,923 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:21:08,923 - INFO - },
2023-03-14 23:21:08,923 - INFO - "changed": false,
2023-03-14 23:21:08,923 - INFO - "checksum": "1bb1c680bf42bce57bd33e9ee945d27bb8aeaafc",
2023-03-14 23:21:08,923 - INFO - "dest": "runemon.sh",
2023-03-14 23:21:08,924 - INFO - "gid": 1007,
2023-03-14 23:21:08,924 - INFO - "group": "ansible",
2023-03-14 23:21:08,924 - INFO - "mode": "0755",
2023-03-14 23:21:08,924 - INFO - "owner": "ansible",
2023-03-14 23:21:08,924 - INFO - "path": "runemon.sh",
2023-03-14 23:21:08,924 - INFO - "size": 452,
2023-03-14 23:21:08,924 - INFO - "state": "file",
2023-03-14 23:21:08,924 - INFO - "uid": 1006
2023-03-14 23:21:08,924 - INFO - }
2023-03-14 23:21:10,332 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:21:10,332 - INFO - "ansible_facts": {
2023-03-14 23:21:10,332 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:21:10,332 - INFO - },
2023-03-14 23:21:10,332 - INFO - "changed": false,
2023-03-14 23:21:10,332 - INFO - "checksum": "0b7ce1d178a191ee4962273d5bcbcac8b825066d",
2023-03-14 23:21:10,333 - INFO - "dest": "sapphirerapids_server_events_private.txt",
2023-03-14 23:21:10,333 - INFO - "gid": 1007,
2023-03-14 23:21:10,333 - INFO - "group": "ansible",
2023-03-14 23:21:10,333 - INFO - "mode": "0664",
2023-03-14 23:21:10,333 - INFO - "owner": "ansible",
2023-03-14 23:21:10,333 - INFO - "path": "sapphirerapids_server_events_private.txt",
2023-03-14 23:21:10,333 - INFO - "size": 23423,
2023-03-14 23:21:10,333 - INFO - "state": "file",
2023-03-14 23:21:10,333 - INFO - "uid": 1006
2023-03-14 23:21:10,333 - INFO - }
2023-03-14 23:21:11,394 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:21:11,394 - INFO - 
2023-03-14 23:21:12,450 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:21:12,450 - INFO - 
2023-03-14 23:21:12,546 - INFO - Sleep 5 seconds then collect emon data for 30 seconds
2023-03-14 23:21:17,549 - INFO - Collecting 30 seconds sar data background
2023-03-14 23:21:19,501 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:21:19,502 - INFO - 
2023-03-14 23:21:21,569 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:21:21,569 - INFO - 
2023-03-14 23:21:23,626 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:21:23,626 - INFO - 
2023-03-14 23:21:25,846 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:21:25,847 - INFO - 
2023-03-14 23:21:25,952 - INFO - Collecting EMON data
2023-03-14 23:21:57,489 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:21:57,489 - INFO - Usage: sep_vars.sh [emon_api]
2023-03-14 23:21:57,490 - INFO - PATH=/opt/intel/sep/bin64:/opt/intel/sep/android_target:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2023-03-14 23:21:57,490 - INFO - CPATH=/opt/intel/sep/config/emon_api:
2023-03-14 23:21:57,490 - INFO - LIBRARY_PATH=/opt/intel/sep/lib64:
2023-03-14 23:21:57,490 - INFO - LD_LIBRARY_PATH=
2023-03-14 23:21:57,490 - INFO - SEP_BASE_DIR=/opt/intel/sep/bin64
2023-03-14 23:21:57,490 - INFO - SEP is currently installed under /opt/intel/sep/bin64
2023-03-14 23:21:57,490 - INFO - EMON collector successfully stopped.
2023-03-14 23:21:57,588 - INFO - Sleep another 30 seconds to make sure the previous run exit
2023-03-14 23:22:27,591 - INFO - Copy dat files
2023-03-14 23:22:28,600 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:22:28,600 - INFO - "changed": true,
2023-03-14 23:22:28,600 - INFO - "checksum": "0bb7bdd134f8cab73d316c1c19c27493ecfa80cb",
2023-03-14 23:22:28,600 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/cpuutil.log",
2023-03-14 23:22:28,600 - INFO - "md5sum": "9f31cfef22b54eb40a541b789bc7c375",
2023-03-14 23:22:28,601 - INFO - "remote_checksum": "0bb7bdd134f8cab73d316c1c19c27493ecfa80cb",
2023-03-14 23:22:28,601 - INFO - "remote_md5sum": null
2023-03-14 23:22:28,601 - INFO - }
2023-03-14 23:22:29,726 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:22:29,726 - INFO - "changed": true,
2023-03-14 23:22:29,727 - INFO - "checksum": "01851da247251bd49a8adee8392c79f768a4940d",
2023-03-14 23:22:29,727 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/diskutil.log",
2023-03-14 23:22:29,727 - INFO - "md5sum": "03d7df82d001c475e59f35ad84089d27",
2023-03-14 23:22:29,727 - INFO - "remote_checksum": "01851da247251bd49a8adee8392c79f768a4940d",
2023-03-14 23:22:29,727 - INFO - "remote_md5sum": null
2023-03-14 23:22:29,727 - INFO - }
2023-03-14 23:22:30,826 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:22:30,826 - INFO - "changed": true,
2023-03-14 23:22:30,826 - INFO - "checksum": "82732c461e6e71e75312e5de7a26c0aca850a26c",
2023-03-14 23:22:30,827 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/netutil.log",
2023-03-14 23:22:30,827 - INFO - "md5sum": "9214980647f896f79dc2571959afa847",
2023-03-14 23:22:30,827 - INFO - "remote_checksum": "82732c461e6e71e75312e5de7a26c0aca850a26c",
2023-03-14 23:22:30,827 - INFO - "remote_md5sum": null
2023-03-14 23:22:30,827 - INFO - }
2023-03-14 23:22:32,060 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:22:32,060 - INFO - "changed": true,
2023-03-14 23:22:32,061 - INFO - "checksum": "5bbab6fd25316ed7590ed4126d5159678dd633c8",
2023-03-14 23:22:32,061 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/top.log",
2023-03-14 23:22:32,061 - INFO - "md5sum": "35bca164fc03379dd048e779239dccdd",
2023-03-14 23:22:32,061 - INFO - "remote_checksum": "5bbab6fd25316ed7590ed4126d5159678dd633c8",
2023-03-14 23:22:32,061 - INFO - "remote_md5sum": null
2023-03-14 23:22:32,061 - INFO - }
2023-03-14 23:22:33,152 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:22:33,152 - INFO - "changed": true,
2023-03-14 23:22:33,153 - INFO - "checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:22:33,153 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-v.dat",
2023-03-14 23:22:33,153 - INFO - "md5sum": "9ed6ca61f164c3a1ddac82b3adb8e41f",
2023-03-14 23:22:33,153 - INFO - "remote_checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:22:33,153 - INFO - "remote_md5sum": null
2023-03-14 23:22:33,153 - INFO - }
2023-03-14 23:22:34,277 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:22:34,278 - INFO - "changed": true,
2023-03-14 23:22:34,278 - INFO - "checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:22:34,278 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-M.dat",
2023-03-14 23:22:34,278 - INFO - "md5sum": "82b2e5d1d33c2feb6e5d5290b113dd3f",
2023-03-14 23:22:34,278 - INFO - "remote_checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:22:34,278 - INFO - "remote_md5sum": null
2023-03-14 23:22:34,278 - INFO - }
2023-03-14 23:22:35,858 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:22:35,858 - INFO - "changed": true,
2023-03-14 23:22:35,858 - INFO - "checksum": "18ca2f56aadd6b4386e6d9e0c91b570b75082666",
2023-03-14 23:22:35,859 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon.dat",
2023-03-14 23:22:35,859 - INFO - "md5sum": "6d6d60106a4047d8c7a59767f222d7d8",
2023-03-14 23:22:35,859 - INFO - "remote_checksum": "18ca2f56aadd6b4386e6d9e0c91b570b75082666",
2023-03-14 23:22:35,859 - INFO - "remote_md5sum": null
2023-03-14 23:22:35,859 - INFO - }
2023-03-14 23:22:35,962 - INFO - 2. fetch the matrics of ai_pipeline
2023-03-14 23:22:35,962 - INFO - 3.  collect the result
2023-03-14 23:22:36,140 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(rate(container_cpu_usage_seconds_total{namespace="default", container!=""}[2m])[2m:])
2023-03-14 23:22:36,140 - INFO - metric_name is: cpu_usage
2023-03-14 23:22:36,140 - INFO - result is: [{'metric': {'container': 'ei-fss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podf765b16c_07f8_4261_9b64_3517dc6bafb7.slice/cri-containerd-88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-file-stream-service:2022WW47', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt', 'service': 'kubelet'}, 'value': [1678861356.126, '0.07131721388886944']}, {'metric': {'container': 'ei-gws', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podaf221d52_33c6_40a0_b6bf_e5e2bc7b88db.slice/cri-containerd-870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada.scope', 'image': 'ccr-registry.caas.intel.com/cnbench/ei-gateway-server:2022WW51-ws-8080', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9', 'service': 'kubelet'}, 'value': [1678861356.126, '0.001272069444444115']}, {'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod5c088b4a_96fe_4f4a_afdf_bba940cd2872.slice/cri-containerd-dc1efd84838b8d58c1ce1540b62c1b34abf4c47e49bfd435bfd295d65e7074a6.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-inference-service-tensorflow:2022WW49', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'dc1efd84838b8d58c1ce1540b62c1b34abf4c47e49bfd435bfd295d65e7074a6', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7', 'service': 'kubelet'}, 'value': [1678861356.126, '0.5547837388888889']}, {'metric': {'container': 'ei-wss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podd781997c_c6e4_4a9a_8814_f1a5e364edb4.slice/cri-containerd-d43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-websocket-server:2022WW51', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'd43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz', 'service': 'kubelet'}, 'value': [1678861356.126, '0.027502486111107928']}, {'metric': {'container': 'nfs-subdir-external-provisioner', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod008ca2f8_cd34_4bb5_9e75_b46ec5ce9a23.slice/cri-containerd-710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4.scope', 'image': 'k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg', 'service': 'kubelet'}, 'value': [1678861356.126, '0.0010662472222217425']}, {'metric': {'container': 'redis', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod0d8f249f_8e44_4dae_82d3_618b15befd15.slice/cri-containerd-0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e.scope', 'image': 'docker.io/library/redis:6.0', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-redis-deployment-68df56c9d5-9kt42', 'service': 'kubelet'}, 'value': [1678861356.126, '0.0053677444444424']}, {'metric': {'container': 'tmp-shell', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod9cbe7477_0ea6_463d_8c1e_33eb5efda051.slice/cri-containerd-9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9.scope', 'image': 'docker.io/nicolaka/netshoot:latest', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'tmp-shell', 'service': 'kubelet'}, 'value': [1678861356.126, '0']}]
2023-03-14 23:22:36,141 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=sum(container_memory_working_set_bytes{namespace="default",container!="", image!=""}) by (pod)
2023-03-14 23:22:36,141 - INFO - metric_name is: memory_usage
2023-03-14 23:22:36,141 - INFO - result is: [{'metric': {'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt'}, 'value': [1678861356.13, '386007040']}, {'metric': {'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9'}, 'value': [1678861356.13, '56905728']}, {'metric': {'pod': 'ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7'}, 'value': [1678861356.13, '338812928']}, {'metric': {'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz'}, 'value': [1678861356.13, '5093576704']}, {'metric': {'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg'}, 'value': [1678861356.13, '15429632']}, {'metric': {'pod': 'ei-redis-deployment-68df56c9d5-9kt42'}, 'value': [1678861356.13, '2443579392']}, {'metric': {'pod': 'tmp-shell'}, 'value': [1678861356.13, '847872']}]
2023-03-14 23:22:36,141 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_infer_fps{namespace="default"}[2m])
2023-03-14 23:22:36,141 - INFO - metric_name is: ei_infer_fps
2023-03-14 23:22:36,141 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.3:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678861356.134, '28.419928446908763']}]
2023-03-14 23:22:36,141 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_drop_fps{namespace="default"}[2m])
2023-03-14 23:22:36,141 - INFO - metric_name is: ei_drop_fps
2023-03-14 23:22:36,141 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.3:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678861356.138, '0']}]
2023-03-14 23:22:36,141 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_scale_ratio{namespace="default"}[2m])
2023-03-14 23:22:36,141 - INFO - metric_name is: ei_scale_ratio
2023-03-14 23:22:36,142 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.3:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678861356.141, '0.9789845135211064']}]
2023-03-14 23:22:36,142 - INFO - Results written to metrics/F18D_NON_VNNI_INT8_metrics_20230314_232236.txt
2023-03-14 23:22:36,209 - INFO - sleep 120 seconds for the next round ...
2023-03-14 23:24:36,212 - INFO - -----------loop num:3/3------------
2023-03-14 23:24:46,219 - INFO - 1.  fetch_emon.sh
2023-03-14 23:24:46,221 - INFO - pwd=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 23:24:48,079 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:24:48,080 - INFO - "ansible_facts": {
2023-03-14 23:24:48,080 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:24:48,080 - INFO - },
2023-03-14 23:24:48,080 - INFO - "changed": false,
2023-03-14 23:24:48,080 - INFO - "checksum": "1bb1c680bf42bce57bd33e9ee945d27bb8aeaafc",
2023-03-14 23:24:48,080 - INFO - "dest": "runemon.sh",
2023-03-14 23:24:48,080 - INFO - "gid": 1007,
2023-03-14 23:24:48,080 - INFO - "group": "ansible",
2023-03-14 23:24:48,080 - INFO - "mode": "0755",
2023-03-14 23:24:48,080 - INFO - "owner": "ansible",
2023-03-14 23:24:48,080 - INFO - "path": "runemon.sh",
2023-03-14 23:24:48,080 - INFO - "size": 452,
2023-03-14 23:24:48,081 - INFO - "state": "file",
2023-03-14 23:24:48,081 - INFO - "uid": 1006
2023-03-14 23:24:48,081 - INFO - }
2023-03-14 23:24:49,458 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:24:49,458 - INFO - "ansible_facts": {
2023-03-14 23:24:49,459 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:24:49,459 - INFO - },
2023-03-14 23:24:49,459 - INFO - "changed": false,
2023-03-14 23:24:49,459 - INFO - "checksum": "0b7ce1d178a191ee4962273d5bcbcac8b825066d",
2023-03-14 23:24:49,459 - INFO - "dest": "sapphirerapids_server_events_private.txt",
2023-03-14 23:24:49,459 - INFO - "gid": 1007,
2023-03-14 23:24:49,459 - INFO - "group": "ansible",
2023-03-14 23:24:49,459 - INFO - "mode": "0664",
2023-03-14 23:24:49,459 - INFO - "owner": "ansible",
2023-03-14 23:24:49,459 - INFO - "path": "sapphirerapids_server_events_private.txt",
2023-03-14 23:24:49,459 - INFO - "size": 23423,
2023-03-14 23:24:49,459 - INFO - "state": "file",
2023-03-14 23:24:49,460 - INFO - "uid": 1006
2023-03-14 23:24:49,460 - INFO - }
2023-03-14 23:24:50,541 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:24:50,541 - INFO - 
2023-03-14 23:24:51,597 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:24:51,598 - INFO - 
2023-03-14 23:24:51,690 - INFO - Sleep 5 seconds then collect emon data for 30 seconds
2023-03-14 23:24:56,693 - INFO - Collecting 30 seconds sar data background
2023-03-14 23:24:58,655 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:24:58,656 - INFO - 
2023-03-14 23:25:00,736 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:25:00,737 - INFO - 
2023-03-14 23:25:02,851 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:25:02,851 - INFO - 
2023-03-14 23:25:04,932 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:25:04,933 - INFO - 
2023-03-14 23:25:05,030 - INFO - Collecting EMON data
2023-03-14 23:25:36,576 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:25:36,576 - INFO - Usage: sep_vars.sh [emon_api]
2023-03-14 23:25:36,576 - INFO - PATH=/opt/intel/sep/bin64:/opt/intel/sep/android_target:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2023-03-14 23:25:36,576 - INFO - CPATH=/opt/intel/sep/config/emon_api:
2023-03-14 23:25:36,576 - INFO - LIBRARY_PATH=/opt/intel/sep/lib64:
2023-03-14 23:25:36,576 - INFO - LD_LIBRARY_PATH=
2023-03-14 23:25:36,577 - INFO - SEP_BASE_DIR=/opt/intel/sep/bin64
2023-03-14 23:25:36,577 - INFO - SEP is currently installed under /opt/intel/sep/bin64
2023-03-14 23:25:36,577 - INFO - EMON collector successfully stopped.
2023-03-14 23:25:36,683 - INFO - Sleep another 30 seconds to make sure the previous run exit
2023-03-14 23:26:06,687 - INFO - Copy dat files
2023-03-14 23:26:07,696 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:26:07,697 - INFO - "changed": true,
2023-03-14 23:26:07,697 - INFO - "checksum": "4802d248a454aa9bda68520e453d152c2a6b20fe",
2023-03-14 23:26:07,697 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/cpuutil.log",
2023-03-14 23:26:07,697 - INFO - "md5sum": "45b270df5e634f5fc75fa9cb4cfb2b02",
2023-03-14 23:26:07,697 - INFO - "remote_checksum": "4802d248a454aa9bda68520e453d152c2a6b20fe",
2023-03-14 23:26:07,697 - INFO - "remote_md5sum": null
2023-03-14 23:26:07,697 - INFO - }
2023-03-14 23:26:08,806 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:26:08,807 - INFO - "changed": true,
2023-03-14 23:26:08,807 - INFO - "checksum": "26c0ae502e49e0415e41928bc14dfaf9089b9905",
2023-03-14 23:26:08,807 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/diskutil.log",
2023-03-14 23:26:08,807 - INFO - "md5sum": "bd344c07f57a5b5de0ed4ec9e4025295",
2023-03-14 23:26:08,807 - INFO - "remote_checksum": "26c0ae502e49e0415e41928bc14dfaf9089b9905",
2023-03-14 23:26:08,807 - INFO - "remote_md5sum": null
2023-03-14 23:26:08,807 - INFO - }
2023-03-14 23:26:09,907 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:26:09,908 - INFO - "changed": true,
2023-03-14 23:26:09,908 - INFO - "checksum": "b9c6da91c9f35d07e5016f369fca52a8ba2b3f4d",
2023-03-14 23:26:09,908 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/netutil.log",
2023-03-14 23:26:09,908 - INFO - "md5sum": "955dbd83ecfa2f37dbe38c618ef06bfe",
2023-03-14 23:26:09,908 - INFO - "remote_checksum": "b9c6da91c9f35d07e5016f369fca52a8ba2b3f4d",
2023-03-14 23:26:09,908 - INFO - "remote_md5sum": null
2023-03-14 23:26:09,908 - INFO - }
2023-03-14 23:26:11,088 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:26:11,089 - INFO - "changed": true,
2023-03-14 23:26:11,089 - INFO - "checksum": "01771ad27cb2d91f30554918cc37c7549352708e",
2023-03-14 23:26:11,089 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/top.log",
2023-03-14 23:26:11,089 - INFO - "md5sum": "9de2357f4d3354e5523d177d05644cb1",
2023-03-14 23:26:11,089 - INFO - "remote_checksum": "01771ad27cb2d91f30554918cc37c7549352708e",
2023-03-14 23:26:11,089 - INFO - "remote_md5sum": null
2023-03-14 23:26:11,089 - INFO - }
2023-03-14 23:26:12,181 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:26:12,182 - INFO - "changed": true,
2023-03-14 23:26:12,182 - INFO - "checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:26:12,182 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-v.dat",
2023-03-14 23:26:12,182 - INFO - "md5sum": "9ed6ca61f164c3a1ddac82b3adb8e41f",
2023-03-14 23:26:12,182 - INFO - "remote_checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:26:12,182 - INFO - "remote_md5sum": null
2023-03-14 23:26:12,182 - INFO - }
2023-03-14 23:26:13,264 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:26:13,264 - INFO - "changed": true,
2023-03-14 23:26:13,264 - INFO - "checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:26:13,264 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-M.dat",
2023-03-14 23:26:13,265 - INFO - "md5sum": "82b2e5d1d33c2feb6e5d5290b113dd3f",
2023-03-14 23:26:13,265 - INFO - "remote_checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:26:13,265 - INFO - "remote_md5sum": null
2023-03-14 23:26:13,265 - INFO - }
2023-03-14 23:26:14,821 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:26:14,821 - INFO - "changed": true,
2023-03-14 23:26:14,822 - INFO - "checksum": "39bf2c2830407077e3dd1f5dd84fcd52e7b32770",
2023-03-14 23:26:14,822 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon.dat",
2023-03-14 23:26:14,822 - INFO - "md5sum": "f518eb25f3c2a54f1fdf96c7c844b8c1",
2023-03-14 23:26:14,822 - INFO - "remote_checksum": "39bf2c2830407077e3dd1f5dd84fcd52e7b32770",
2023-03-14 23:26:14,822 - INFO - "remote_md5sum": null
2023-03-14 23:26:14,822 - INFO - }
2023-03-14 23:26:14,921 - INFO - 2. fetch the matrics of ai_pipeline
2023-03-14 23:26:14,922 - INFO - 3.  collect the result
2023-03-14 23:26:15,098 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(rate(container_cpu_usage_seconds_total{namespace="default", container!=""}[2m])[2m:])
2023-03-14 23:26:15,098 - INFO - metric_name is: cpu_usage
2023-03-14 23:26:15,098 - INFO - result is: [{'metric': {'container': 'ei-fss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podf765b16c_07f8_4261_9b64_3517dc6bafb7.slice/cri-containerd-88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-file-stream-service:2022WW47', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt', 'service': 'kubelet'}, 'value': [1678861575.083, '0.06794992777775202']}, {'metric': {'container': 'ei-gws', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podaf221d52_33c6_40a0_b6bf_e5e2bc7b88db.slice/cri-containerd-870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada.scope', 'image': 'ccr-registry.caas.intel.com/cnbench/ei-gateway-server:2022WW51-ws-8080', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9', 'service': 'kubelet'}, 'value': [1678861575.083, '0.00135484999999878']}, {'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod5c088b4a_96fe_4f4a_afdf_bba940cd2872.slice/cri-containerd-dc1efd84838b8d58c1ce1540b62c1b34abf4c47e49bfd435bfd295d65e7074a6.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-inference-service-tensorflow:2022WW49', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'dc1efd84838b8d58c1ce1540b62c1b34abf4c47e49bfd435bfd295d65e7074a6', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7', 'service': 'kubelet'}, 'value': [1678861575.083, '0.5515811277777778']}, {'metric': {'container': 'ei-wss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podd781997c_c6e4_4a9a_8814_f1a5e364edb4.slice/cri-containerd-d43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-websocket-server:2022WW51', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'd43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz', 'service': 'kubelet'}, 'value': [1678861575.083, '0.031631716666667364']}, {'metric': {'container': 'nfs-subdir-external-provisioner', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod008ca2f8_cd34_4bb5_9e75_b46ec5ce9a23.slice/cri-containerd-710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4.scope', 'image': 'k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg', 'service': 'kubelet'}, 'value': [1678861575.083, '0.0009382361111117158']}, {'metric': {'container': 'redis', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod0d8f249f_8e44_4dae_82d3_618b15befd15.slice/cri-containerd-0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e.scope', 'image': 'docker.io/library/redis:6.0', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-redis-deployment-68df56c9d5-9kt42', 'service': 'kubelet'}, 'value': [1678861575.083, '0.00583141388888685']}, {'metric': {'container': 'tmp-shell', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod9cbe7477_0ea6_463d_8c1e_33eb5efda051.slice/cri-containerd-9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9.scope', 'image': 'docker.io/nicolaka/netshoot:latest', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'tmp-shell', 'service': 'kubelet'}, 'value': [1678861575.083, '0']}]
2023-03-14 23:26:15,098 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=sum(container_memory_working_set_bytes{namespace="default",container!="", image!=""}) by (pod)
2023-03-14 23:26:15,098 - INFO - metric_name is: memory_usage
2023-03-14 23:26:15,099 - INFO - result is: [{'metric': {'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt'}, 'value': [1678861575.088, '386134016']}, {'metric': {'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9'}, 'value': [1678861575.088, '57143296']}, {'metric': {'pod': 'ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7'}, 'value': [1678861575.088, '338919424']}, {'metric': {'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz'}, 'value': [1678861575.088, '5093269504']}, {'metric': {'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg'}, 'value': [1678861575.088, '15298560']}, {'metric': {'pod': 'ei-redis-deployment-68df56c9d5-9kt42'}, 'value': [1678861575.088, '2443808768']}, {'metric': {'pod': 'tmp-shell'}, 'value': [1678861575.088, '847872']}]
2023-03-14 23:26:15,099 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_infer_fps{namespace="default"}[2m])
2023-03-14 23:26:15,099 - INFO - metric_name is: ei_infer_fps
2023-03-14 23:26:15,099 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.3:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678861575.092, '28.37355311224217']}]
2023-03-14 23:26:15,099 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_drop_fps{namespace="default"}[2m])
2023-03-14 23:26:15,099 - INFO - metric_name is: ei_drop_fps
2023-03-14 23:26:15,099 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.3:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678861575.095, '0']}]
2023-03-14 23:26:15,099 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_scale_ratio{namespace="default"}[2m])
2023-03-14 23:26:15,099 - INFO - metric_name is: ei_scale_ratio
2023-03-14 23:26:15,099 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.3:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678861575.099, '0.977387017083606']}]
2023-03-14 23:26:15,099 - INFO - Results written to metrics/F18D_NON_VNNI_INT8_metrics_20230314_232615.txt
2023-03-14 23:26:15,168 - INFO - ------------- scenario: 5/5 ------------
2023-03-14 23:26:15,168 - INFO - Begin set_deployment_env of scenario : AMX_IN8 ...
2023-03-14 23:26:15,219 - INFO - Setting environment variables for scenario AMX_IN8...
2023-03-14 23:26:15,241 - INFO - Setting resource requests and limits for scenario AMX_IN8...
2023-03-14 23:26:15,260 - INFO - after patch_body wait for 30 seconds to enable the new pods
2023-03-14 23:26:45,291 - INFO - Waiting for 1 pods to be ready for scenario AMX_IN8...
2023-03-14 23:26:45,371 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:26:45,371 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:26:45,371 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 0.08 seconds
2023-03-14 23:26:55,406 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:26:55,406 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:26:55,406 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 10.12 seconds
2023-03-14 23:27:05,442 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:27:05,442 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:27:05,442 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 20.15 seconds
2023-03-14 23:27:15,478 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:27:15,478 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:27:15,478 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 30.19 seconds
2023-03-14 23:27:25,514 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:27:25,514 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:27:25,514 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 40.22 seconds
2023-03-14 23:27:35,563 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:27:35,564 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:27:35,564 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 50.27 seconds
2023-03-14 23:27:45,600 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:27:45,601 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:27:45,601 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 60.31 seconds
2023-03-14 23:27:55,637 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:27:55,638 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:27:55,638 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 70.35 seconds
2023-03-14 23:28:05,673 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:28:05,674 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:28:05,674 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 80.38 seconds
2023-03-14 23:28:15,702 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:28:15,703 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:28:15,703 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 90.41 seconds
2023-03-14 23:28:25,739 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:28:25,739 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:28:25,739 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 100.45 seconds
2023-03-14 23:28:35,775 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:28:35,776 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:28:35,776 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 110.48 seconds
2023-03-14 23:28:45,812 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:28:45,812 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:28:45,812 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 120.52 seconds
2023-03-14 23:28:55,847 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:28:55,847 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:28:55,847 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 130.56 seconds
2023-03-14 23:29:05,878 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:29:05,878 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:29:05,879 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 140.59 seconds
2023-03-14 23:29:15,914 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:29:15,914 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:29:15,914 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 150.62 seconds
2023-03-14 23:29:25,950 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:29:25,950 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:29:25,950 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 160.66 seconds
2023-03-14 23:29:35,986 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:29:35,986 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:29:35,987 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 170.70 seconds
2023-03-14 23:29:46,021 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:29:46,022 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:29:46,022 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 180.73 seconds
2023-03-14 23:29:56,055 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:29:56,056 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:29:56,056 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 190.76 seconds
2023-03-14 23:30:06,091 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:30:06,091 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:30:06,091 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 200.80 seconds
2023-03-14 23:30:16,126 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:30:16,126 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:30:16,127 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 210.84 seconds
2023-03-14 23:30:26,160 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:30:26,161 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:30:26,161 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 220.87 seconds
2023-03-14 23:30:36,197 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:30:36,197 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:30:36,197 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 230.91 seconds
2023-03-14 23:30:46,233 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:30:46,234 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:30:46,234 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 240.94 seconds
2023-03-14 23:30:56,271 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:30:56,271 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:30:56,271 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 250.98 seconds
2023-03-14 23:31:06,308 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:31:06,308 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:31:06,308 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 261.02 seconds
2023-03-14 23:31:16,345 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:31:16,346 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:31:16,346 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 271.05 seconds
2023-03-14 23:31:26,384 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:31:26,385 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:31:26,385 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 281.09 seconds
2023-03-14 23:31:36,421 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:31:36,422 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:31:36,422 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 291.13 seconds
2023-03-14 23:31:46,457 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:31:46,457 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:31:46,457 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 301.17 seconds
2023-03-14 23:31:56,493 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:31:56,493 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:31:56,493 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 311.20 seconds
2023-03-14 23:32:06,528 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:32:06,528 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:32:06,528 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 321.24 seconds
2023-03-14 23:32:16,565 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:32:16,565 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:32:16,565 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 331.27 seconds
2023-03-14 23:32:26,603 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:32:26,603 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:32:26,603 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 341.31 seconds
2023-03-14 23:32:36,637 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:32:36,638 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:32:36,638 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 351.35 seconds
2023-03-14 23:32:46,673 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:32:46,674 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:32:46,674 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 361.38 seconds
2023-03-14 23:32:56,709 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:32:56,709 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:32:56,709 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 371.42 seconds
2023-03-14 23:33:06,744 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:33:06,745 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:33:06,745 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 381.45 seconds
2023-03-14 23:33:16,781 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:33:16,781 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:33:16,781 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 391.49 seconds
2023-03-14 23:33:26,817 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:33:26,818 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:33:26,818 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 401.53 seconds
2023-03-14 23:33:36,854 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:33:36,854 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:33:36,854 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 411.56 seconds
2023-03-14 23:33:46,890 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Pending
2023-03-14 23:33:46,890 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-db6f57466-t7xv7 status:Running
2023-03-14 23:33:46,890 - INFO - Waiting for 0 more pods to be ready, there are 1 not ready pods for scenario AMX_IN8. Elapsed time: 421.60 seconds
2023-03-14 23:33:56,919 - INFO - pod: ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq status:Running
2023-03-14 23:33:56,919 - INFO - All 1 pods are ready for scenario AMX_IN8
2023-03-14 23:33:56,921 - INFO - Finished scenario AMX_IN8
2023-03-14 23:33:56,921 - INFO - wait for 2m to get stable metrics ...
2023-03-14 23:35:57,021 - INFO - Running benchmarking script for scenario AMX_IN8...
2023-03-14 23:35:57,034 - INFO - TS=20230314233557
2023-03-14 23:35:58,939 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:35:58,940 - INFO - Reading package lists...
2023-03-14 23:35:58,940 - INFO - Building dependency tree...
2023-03-14 23:35:58,940 - INFO - Reading state information...
2023-03-14 23:35:58,940 - INFO - linux-tools-5.15.0-60-generic is already the newest version (5.15.0-60.66).
2023-03-14 23:35:58,940 - INFO - sysstat is already the newest version (12.5.2-2ubuntu0.1).
2023-03-14 23:35:58,940 - INFO - The following packages were automatically installed and are no longer required:
2023-03-14 23:35:58,940 - INFO - cgroupfs-mount libltdl7 pigz
2023-03-14 23:35:58,940 - INFO - Use 'sudo apt autoremove' to remove them.
2023-03-14 23:35:58,940 - INFO - 0 upgraded, 0 newly installed, 0 to remove and 44 not upgraded.
2023-03-14 23:35:58,940 - INFO - WARNING: apt does not have a stable CLI interface. Use with caution in scripts.
2023-03-14 23:36:00,064 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:36:00,065 - INFO - 
2023-03-14 23:36:01,127 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:36:01,127 - INFO - performance
2023-03-14 23:36:01,231 - INFO - Run on test AiPipeline_20230314233557_F18D_AMX_IN8_6
2023-03-14 23:36:01,231 - INFO - TT=AiPipeline_20230314233557_F18D_AMX_IN8_6,WRKDIR=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 23:36:01,238 - INFO - -----------loop num:1/3------------
2023-03-14 23:36:11,244 - INFO - 1.  fetch_emon.sh
2023-03-14 23:36:11,245 - INFO - pwd=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 23:36:12,538 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:36:12,538 - INFO - "ansible_facts": {
2023-03-14 23:36:12,538 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:36:12,538 - INFO - },
2023-03-14 23:36:12,538 - INFO - "changed": false,
2023-03-14 23:36:12,538 - INFO - "checksum": "1bb1c680bf42bce57bd33e9ee945d27bb8aeaafc",
2023-03-14 23:36:12,538 - INFO - "dest": "runemon.sh",
2023-03-14 23:36:12,539 - INFO - "gid": 1007,
2023-03-14 23:36:12,539 - INFO - "group": "ansible",
2023-03-14 23:36:12,539 - INFO - "mode": "0755",
2023-03-14 23:36:12,539 - INFO - "owner": "ansible",
2023-03-14 23:36:12,539 - INFO - "path": "runemon.sh",
2023-03-14 23:36:12,539 - INFO - "size": 452,
2023-03-14 23:36:12,539 - INFO - "state": "file",
2023-03-14 23:36:12,539 - INFO - "uid": 1006
2023-03-14 23:36:12,539 - INFO - }
2023-03-14 23:36:13,924 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:36:13,925 - INFO - "ansible_facts": {
2023-03-14 23:36:13,925 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:36:13,925 - INFO - },
2023-03-14 23:36:13,925 - INFO - "changed": false,
2023-03-14 23:36:13,925 - INFO - "checksum": "0b7ce1d178a191ee4962273d5bcbcac8b825066d",
2023-03-14 23:36:13,925 - INFO - "dest": "sapphirerapids_server_events_private.txt",
2023-03-14 23:36:13,925 - INFO - "gid": 1007,
2023-03-14 23:36:13,925 - INFO - "group": "ansible",
2023-03-14 23:36:13,925 - INFO - "mode": "0664",
2023-03-14 23:36:13,925 - INFO - "owner": "ansible",
2023-03-14 23:36:13,926 - INFO - "path": "sapphirerapids_server_events_private.txt",
2023-03-14 23:36:13,926 - INFO - "size": 23423,
2023-03-14 23:36:13,926 - INFO - "state": "file",
2023-03-14 23:36:13,926 - INFO - "uid": 1006
2023-03-14 23:36:13,926 - INFO - }
2023-03-14 23:36:15,003 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:36:15,003 - INFO - 
2023-03-14 23:36:16,047 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:36:16,048 - INFO - 
2023-03-14 23:36:16,145 - INFO - Sleep 5 seconds then collect emon data for 30 seconds
2023-03-14 23:36:21,149 - INFO - Collecting 30 seconds sar data background
2023-03-14 23:36:23,116 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:36:23,117 - INFO - 
2023-03-14 23:36:25,172 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:36:25,172 - INFO - 
2023-03-14 23:36:27,233 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:36:27,233 - INFO - 
2023-03-14 23:36:29,296 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:36:29,297 - INFO - 
2023-03-14 23:36:29,413 - INFO - Collecting EMON data
2023-03-14 23:37:00,992 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:37:00,993 - INFO - Usage: sep_vars.sh [emon_api]
2023-03-14 23:37:00,993 - INFO - PATH=/opt/intel/sep/bin64:/opt/intel/sep/android_target:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2023-03-14 23:37:00,993 - INFO - CPATH=/opt/intel/sep/config/emon_api:
2023-03-14 23:37:00,993 - INFO - LIBRARY_PATH=/opt/intel/sep/lib64:
2023-03-14 23:37:00,993 - INFO - LD_LIBRARY_PATH=
2023-03-14 23:37:00,993 - INFO - SEP_BASE_DIR=/opt/intel/sep/bin64
2023-03-14 23:37:00,993 - INFO - SEP is currently installed under /opt/intel/sep/bin64
2023-03-14 23:37:00,993 - INFO - EMON collector successfully stopped.
2023-03-14 23:37:01,100 - INFO - Sleep another 30 seconds to make sure the previous run exit
2023-03-14 23:37:31,103 - INFO - Copy dat files
2023-03-14 23:37:32,110 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:37:32,111 - INFO - "changed": true,
2023-03-14 23:37:32,111 - INFO - "checksum": "80e5db6414911484f31e94d00e2e6ee75a5822c2",
2023-03-14 23:37:32,111 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/cpuutil.log",
2023-03-14 23:37:32,111 - INFO - "md5sum": "defb1f7dc622bf236a0cb2cec8d87b1a",
2023-03-14 23:37:32,111 - INFO - "remote_checksum": "80e5db6414911484f31e94d00e2e6ee75a5822c2",
2023-03-14 23:37:32,111 - INFO - "remote_md5sum": null
2023-03-14 23:37:32,111 - INFO - }
2023-03-14 23:37:33,208 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:37:33,208 - INFO - "changed": true,
2023-03-14 23:37:33,209 - INFO - "checksum": "be78cfdba859bcd1d617eecc9a4d5efd30e5510b",
2023-03-14 23:37:33,209 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/diskutil.log",
2023-03-14 23:37:33,209 - INFO - "md5sum": "2dd91431f9c60902d1b888211084c2fc",
2023-03-14 23:37:33,209 - INFO - "remote_checksum": "be78cfdba859bcd1d617eecc9a4d5efd30e5510b",
2023-03-14 23:37:33,209 - INFO - "remote_md5sum": null
2023-03-14 23:37:33,209 - INFO - }
2023-03-14 23:37:34,328 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:37:34,329 - INFO - "changed": true,
2023-03-14 23:37:34,329 - INFO - "checksum": "413929ee3142d14b889575d4f790de9d9a7dc361",
2023-03-14 23:37:34,329 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/netutil.log",
2023-03-14 23:37:34,329 - INFO - "md5sum": "5fc9bcf0564387329465e5fa2da3c481",
2023-03-14 23:37:34,329 - INFO - "remote_checksum": "413929ee3142d14b889575d4f790de9d9a7dc361",
2023-03-14 23:37:34,329 - INFO - "remote_md5sum": null
2023-03-14 23:37:34,329 - INFO - }
2023-03-14 23:37:35,481 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:37:35,481 - INFO - "changed": true,
2023-03-14 23:37:35,481 - INFO - "checksum": "a347c431dfb9145f620625e108ae0faf93a8cd2e",
2023-03-14 23:37:35,481 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/top.log",
2023-03-14 23:37:35,482 - INFO - "md5sum": "cf5894fea24cae788b545539385b55f2",
2023-03-14 23:37:35,482 - INFO - "remote_checksum": "a347c431dfb9145f620625e108ae0faf93a8cd2e",
2023-03-14 23:37:35,482 - INFO - "remote_md5sum": null
2023-03-14 23:37:35,482 - INFO - }
2023-03-14 23:37:36,577 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:37:36,578 - INFO - "changed": true,
2023-03-14 23:37:36,578 - INFO - "checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:37:36,578 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-v.dat",
2023-03-14 23:37:36,578 - INFO - "md5sum": "9ed6ca61f164c3a1ddac82b3adb8e41f",
2023-03-14 23:37:36,578 - INFO - "remote_checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:37:36,578 - INFO - "remote_md5sum": null
2023-03-14 23:37:36,578 - INFO - }
2023-03-14 23:37:37,673 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:37:37,673 - INFO - "changed": true,
2023-03-14 23:37:37,673 - INFO - "checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:37:37,673 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-M.dat",
2023-03-14 23:37:37,674 - INFO - "md5sum": "82b2e5d1d33c2feb6e5d5290b113dd3f",
2023-03-14 23:37:37,674 - INFO - "remote_checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:37:37,674 - INFO - "remote_md5sum": null
2023-03-14 23:37:37,674 - INFO - }
2023-03-14 23:37:39,264 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:37:39,265 - INFO - "changed": true,
2023-03-14 23:37:39,265 - INFO - "checksum": "48bc1955236c46e937b6352249736bfe3858aee5",
2023-03-14 23:37:39,265 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon.dat",
2023-03-14 23:37:39,265 - INFO - "md5sum": "ea965dd37289df93de75a1e9e296eaca",
2023-03-14 23:37:39,265 - INFO - "remote_checksum": "48bc1955236c46e937b6352249736bfe3858aee5",
2023-03-14 23:37:39,265 - INFO - "remote_md5sum": null
2023-03-14 23:37:39,265 - INFO - }
2023-03-14 23:37:39,368 - INFO - 2. fetch the matrics of ai_pipeline
2023-03-14 23:37:39,368 - INFO - 3.  collect the result
2023-03-14 23:37:39,530 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(rate(container_cpu_usage_seconds_total{namespace="default", container!=""}[2m])[2m:])
2023-03-14 23:37:39,530 - INFO - metric_name is: cpu_usage
2023-03-14 23:37:39,530 - INFO - result is: [{'metric': {'container': 'ei-fss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podf765b16c_07f8_4261_9b64_3517dc6bafb7.slice/cri-containerd-88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-file-stream-service:2022WW47', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt', 'service': 'kubelet'}, 'value': [1678862259.514, '0.07368299444444548']}, {'metric': {'container': 'ei-gws', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podaf221d52_33c6_40a0_b6bf_e5e2bc7b88db.slice/cri-containerd-870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada.scope', 'image': 'ccr-registry.caas.intel.com/cnbench/ei-gateway-server:2022WW51-ws-8080', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9', 'service': 'kubelet'}, 'value': [1678862259.514, '0.0012934027777785357']}, {'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod47fe41c3_2537_4580_a25c_ef5b47666dce.slice/cri-containerd-b2feac85d6608fba36caa50393ca4e5e9bf3d391eb8f72be124e3b0f225eb1ce.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-inference-service-tensorflow:2022WW49', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'b2feac85d6608fba36caa50393ca4e5e9bf3d391eb8f72be124e3b0f225eb1ce', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq', 'service': 'kubelet'}, 'value': [1678862259.514, '0.42302766944444437']}, {'metric': {'container': 'ei-wss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podd781997c_c6e4_4a9a_8814_f1a5e364edb4.slice/cri-containerd-d43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-websocket-server:2022WW51', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'd43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz', 'service': 'kubelet'}, 'value': [1678862259.514, '0.009378511111117404']}, {'metric': {'container': 'nfs-subdir-external-provisioner', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod008ca2f8_cd34_4bb5_9e75_b46ec5ce9a23.slice/cri-containerd-710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4.scope', 'image': 'k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg', 'service': 'kubelet'}, 'value': [1678862259.514, '0.0010045361111110651']}, {'metric': {'container': 'redis', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod0d8f249f_8e44_4dae_82d3_618b15befd15.slice/cri-containerd-0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e.scope', 'image': 'docker.io/library/redis:6.0', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-redis-deployment-68df56c9d5-9kt42', 'service': 'kubelet'}, 'value': [1678862259.514, '0.005358336111117346']}, {'metric': {'container': 'tmp-shell', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod9cbe7477_0ea6_463d_8c1e_33eb5efda051.slice/cri-containerd-9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9.scope', 'image': 'docker.io/nicolaka/netshoot:latest', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'tmp-shell', 'service': 'kubelet'}, 'value': [1678862259.514, '0']}]
2023-03-14 23:37:39,530 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=sum(container_memory_working_set_bytes{namespace="default",container!="", image!=""}) by (pod)
2023-03-14 23:37:39,530 - INFO - metric_name is: memory_usage
2023-03-14 23:37:39,531 - INFO - result is: [{'metric': {'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt'}, 'value': [1678862259.519, '386134016']}, {'metric': {'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9'}, 'value': [1678862259.519, '56909824']}, {'metric': {'pod': 'ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq'}, 'value': [1678862259.519, '326311936']}, {'metric': {'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz'}, 'value': [1678862259.519, '5093978112']}, {'metric': {'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg'}, 'value': [1678862259.519, '15429632']}, {'metric': {'pod': 'ei-redis-deployment-68df56c9d5-9kt42'}, 'value': [1678862259.519, '2443538432']}, {'metric': {'pod': 'tmp-shell'}, 'value': [1678862259.519, '847872']}]
2023-03-14 23:37:39,531 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_infer_fps{namespace="default"}[2m])
2023-03-14 23:37:39,531 - INFO - metric_name is: ei_infer_fps
2023-03-14 23:37:39,531 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.42:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678862259.523, '28.415631292984276']}]
2023-03-14 23:37:39,531 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_drop_fps{namespace="default"}[2m])
2023-03-14 23:37:39,531 - INFO - metric_name is: ei_drop_fps
2023-03-14 23:37:39,531 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.42:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678862259.526, '0']}]
2023-03-14 23:37:39,531 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_scale_ratio{namespace="default"}[2m])
2023-03-14 23:37:39,531 - INFO - metric_name is: ei_scale_ratio
2023-03-14 23:37:39,531 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.42:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678862259.53, '0.9765434510015165']}]
2023-03-14 23:37:39,531 - INFO - Results written to metrics/F18D_AMX_IN8_metrics_20230314_233739.txt
2023-03-14 23:37:39,600 - INFO - sleep 120 seconds for the next round ...
2023-03-14 23:39:39,603 - INFO - -----------loop num:2/3------------
2023-03-14 23:39:49,610 - INFO - 1.  fetch_emon.sh
2023-03-14 23:39:49,611 - INFO - pwd=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 23:39:51,449 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:39:51,449 - INFO - "ansible_facts": {
2023-03-14 23:39:51,449 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:39:51,450 - INFO - },
2023-03-14 23:39:51,450 - INFO - "changed": false,
2023-03-14 23:39:51,450 - INFO - "checksum": "1bb1c680bf42bce57bd33e9ee945d27bb8aeaafc",
2023-03-14 23:39:51,450 - INFO - "dest": "runemon.sh",
2023-03-14 23:39:51,450 - INFO - "gid": 1007,
2023-03-14 23:39:51,450 - INFO - "group": "ansible",
2023-03-14 23:39:51,450 - INFO - "mode": "0755",
2023-03-14 23:39:51,450 - INFO - "owner": "ansible",
2023-03-14 23:39:51,450 - INFO - "path": "runemon.sh",
2023-03-14 23:39:51,450 - INFO - "size": 452,
2023-03-14 23:39:51,450 - INFO - "state": "file",
2023-03-14 23:39:51,450 - INFO - "uid": 1006
2023-03-14 23:39:51,450 - INFO - }
2023-03-14 23:39:52,837 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:39:52,838 - INFO - "ansible_facts": {
2023-03-14 23:39:52,838 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:39:52,838 - INFO - },
2023-03-14 23:39:52,838 - INFO - "changed": false,
2023-03-14 23:39:52,838 - INFO - "checksum": "0b7ce1d178a191ee4962273d5bcbcac8b825066d",
2023-03-14 23:39:52,838 - INFO - "dest": "sapphirerapids_server_events_private.txt",
2023-03-14 23:39:52,838 - INFO - "gid": 1007,
2023-03-14 23:39:52,838 - INFO - "group": "ansible",
2023-03-14 23:39:52,838 - INFO - "mode": "0664",
2023-03-14 23:39:52,838 - INFO - "owner": "ansible",
2023-03-14 23:39:52,838 - INFO - "path": "sapphirerapids_server_events_private.txt",
2023-03-14 23:39:52,838 - INFO - "size": 23423,
2023-03-14 23:39:52,838 - INFO - "state": "file",
2023-03-14 23:39:52,839 - INFO - "uid": 1006
2023-03-14 23:39:52,839 - INFO - }
2023-03-14 23:39:53,910 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:39:53,910 - INFO - 
2023-03-14 23:39:54,994 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:39:54,995 - INFO - 
2023-03-14 23:39:55,094 - INFO - Sleep 5 seconds then collect emon data for 30 seconds
2023-03-14 23:40:00,098 - INFO - Collecting 30 seconds sar data background
2023-03-14 23:40:01,981 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:40:01,982 - INFO - 
2023-03-14 23:40:04,009 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:40:04,010 - INFO - 
2023-03-14 23:40:05,831 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:40:05,832 - INFO - 
2023-03-14 23:40:07,862 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:40:07,863 - INFO - 
2023-03-14 23:40:07,961 - INFO - Collecting EMON data
2023-03-14 23:40:39,495 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:40:39,495 - INFO - Usage: sep_vars.sh [emon_api]
2023-03-14 23:40:39,496 - INFO - PATH=/opt/intel/sep/bin64:/opt/intel/sep/android_target:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2023-03-14 23:40:39,496 - INFO - CPATH=/opt/intel/sep/config/emon_api:
2023-03-14 23:40:39,496 - INFO - LIBRARY_PATH=/opt/intel/sep/lib64:
2023-03-14 23:40:39,496 - INFO - LD_LIBRARY_PATH=
2023-03-14 23:40:39,496 - INFO - SEP_BASE_DIR=/opt/intel/sep/bin64
2023-03-14 23:40:39,496 - INFO - SEP is currently installed under /opt/intel/sep/bin64
2023-03-14 23:40:39,496 - INFO - EMON collector successfully stopped.
2023-03-14 23:40:39,599 - INFO - Sleep another 30 seconds to make sure the previous run exit
2023-03-14 23:41:09,603 - INFO - Copy dat files
2023-03-14 23:41:10,628 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:41:10,628 - INFO - "changed": true,
2023-03-14 23:41:10,628 - INFO - "checksum": "de506e7eb74bf9d64b150e5f6ffc19295c895651",
2023-03-14 23:41:10,628 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/cpuutil.log",
2023-03-14 23:41:10,628 - INFO - "md5sum": "f664b74d52dbc7373e2d27dbae82eaf3",
2023-03-14 23:41:10,628 - INFO - "remote_checksum": "de506e7eb74bf9d64b150e5f6ffc19295c895651",
2023-03-14 23:41:10,629 - INFO - "remote_md5sum": null
2023-03-14 23:41:10,629 - INFO - }
2023-03-14 23:41:11,733 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:41:11,734 - INFO - "changed": true,
2023-03-14 23:41:11,734 - INFO - "checksum": "3fc321b2b594c862e74956c90e5d754137954ace",
2023-03-14 23:41:11,734 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/diskutil.log",
2023-03-14 23:41:11,734 - INFO - "md5sum": "43898dd2eca222f109f06a49a4760f64",
2023-03-14 23:41:11,734 - INFO - "remote_checksum": "3fc321b2b594c862e74956c90e5d754137954ace",
2023-03-14 23:41:11,734 - INFO - "remote_md5sum": null
2023-03-14 23:41:11,734 - INFO - }
2023-03-14 23:41:12,839 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:41:12,840 - INFO - "changed": true,
2023-03-14 23:41:12,840 - INFO - "checksum": "a55a09c3cdfcdf56921ffab9b01154cab44d9b5e",
2023-03-14 23:41:12,840 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/netutil.log",
2023-03-14 23:41:12,840 - INFO - "md5sum": "2dcb42e67e2907a42bc0873427742561",
2023-03-14 23:41:12,840 - INFO - "remote_checksum": "a55a09c3cdfcdf56921ffab9b01154cab44d9b5e",
2023-03-14 23:41:12,840 - INFO - "remote_md5sum": null
2023-03-14 23:41:12,840 - INFO - }
2023-03-14 23:41:13,982 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:41:13,983 - INFO - "changed": true,
2023-03-14 23:41:13,983 - INFO - "checksum": "6b7d4b4da2b73388aef17cf7189a0413c5fef8d3",
2023-03-14 23:41:13,983 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/top.log",
2023-03-14 23:41:13,983 - INFO - "md5sum": "f477cbac00d0987e56b4b86e4190b2b1",
2023-03-14 23:41:13,983 - INFO - "remote_checksum": "6b7d4b4da2b73388aef17cf7189a0413c5fef8d3",
2023-03-14 23:41:13,983 - INFO - "remote_md5sum": null
2023-03-14 23:41:13,983 - INFO - }
2023-03-14 23:41:15,085 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:41:15,085 - INFO - "changed": true,
2023-03-14 23:41:15,085 - INFO - "checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:41:15,085 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-v.dat",
2023-03-14 23:41:15,086 - INFO - "md5sum": "9ed6ca61f164c3a1ddac82b3adb8e41f",
2023-03-14 23:41:15,086 - INFO - "remote_checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:41:15,086 - INFO - "remote_md5sum": null
2023-03-14 23:41:15,086 - INFO - }
2023-03-14 23:41:16,177 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:41:16,178 - INFO - "changed": true,
2023-03-14 23:41:16,178 - INFO - "checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:41:16,178 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-M.dat",
2023-03-14 23:41:16,178 - INFO - "md5sum": "82b2e5d1d33c2feb6e5d5290b113dd3f",
2023-03-14 23:41:16,178 - INFO - "remote_checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:41:16,178 - INFO - "remote_md5sum": null
2023-03-14 23:41:16,178 - INFO - }
2023-03-14 23:41:17,750 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:41:17,750 - INFO - "changed": true,
2023-03-14 23:41:17,750 - INFO - "checksum": "d74440ae60e2934a6cd8d4a2f0f741b548f7376d",
2023-03-14 23:41:17,750 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon.dat",
2023-03-14 23:41:17,750 - INFO - "md5sum": "af4fc425fd79eff7c84a03770325f335",
2023-03-14 23:41:17,751 - INFO - "remote_checksum": "d74440ae60e2934a6cd8d4a2f0f741b548f7376d",
2023-03-14 23:41:17,751 - INFO - "remote_md5sum": null
2023-03-14 23:41:17,751 - INFO - }
2023-03-14 23:41:17,851 - INFO - 2. fetch the matrics of ai_pipeline
2023-03-14 23:41:17,852 - INFO - 3.  collect the result
2023-03-14 23:41:18,029 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(rate(container_cpu_usage_seconds_total{namespace="default", container!=""}[2m])[2m:])
2023-03-14 23:41:18,030 - INFO - metric_name is: cpu_usage
2023-03-14 23:41:18,030 - INFO - result is: [{'metric': {'container': 'ei-fss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podf765b16c_07f8_4261_9b64_3517dc6bafb7.slice/cri-containerd-88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-file-stream-service:2022WW47', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt', 'service': 'kubelet'}, 'value': [1678862478.015, '0.0780524805555615']}, {'metric': {'container': 'ei-gws', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podaf221d52_33c6_40a0_b6bf_e5e2bc7b88db.slice/cri-containerd-870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada.scope', 'image': 'ccr-registry.caas.intel.com/cnbench/ei-gateway-server:2022WW51-ws-8080', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9', 'service': 'kubelet'}, 'value': [1678862478.015, '0.0014449555555561093']}, {'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod47fe41c3_2537_4580_a25c_ef5b47666dce.slice/cri-containerd-b2feac85d6608fba36caa50393ca4e5e9bf3d391eb8f72be124e3b0f225eb1ce.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-inference-service-tensorflow:2022WW49', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'b2feac85d6608fba36caa50393ca4e5e9bf3d391eb8f72be124e3b0f225eb1ce', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq', 'service': 'kubelet'}, 'value': [1678862478.015, '0.39834896388888885']}, {'metric': {'container': 'ei-wss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podd781997c_c6e4_4a9a_8814_f1a5e364edb4.slice/cri-containerd-d43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-websocket-server:2022WW51', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'd43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz', 'service': 'kubelet'}, 'value': [1678862478.015, '0.012679669444438938']}, {'metric': {'container': 'nfs-subdir-external-provisioner', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod008ca2f8_cd34_4bb5_9e75_b46ec5ce9a23.slice/cri-containerd-710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4.scope', 'image': 'k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg', 'service': 'kubelet'}, 'value': [1678862478.015, '0.0009864611111109094']}, {'metric': {'container': 'redis', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod0d8f249f_8e44_4dae_82d3_618b15befd15.slice/cri-containerd-0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e.scope', 'image': 'docker.io/library/redis:6.0', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-redis-deployment-68df56c9d5-9kt42', 'service': 'kubelet'}, 'value': [1678862478.015, '0.005332997222224852']}, {'metric': {'container': 'tmp-shell', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod9cbe7477_0ea6_463d_8c1e_33eb5efda051.slice/cri-containerd-9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9.scope', 'image': 'docker.io/nicolaka/netshoot:latest', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'tmp-shell', 'service': 'kubelet'}, 'value': [1678862478.015, '0']}]
2023-03-14 23:41:18,030 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=sum(container_memory_working_set_bytes{namespace="default",container!="", image!=""}) by (pod)
2023-03-14 23:41:18,030 - INFO - metric_name is: memory_usage
2023-03-14 23:41:18,030 - INFO - result is: [{'metric': {'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt'}, 'value': [1678862478.019, '386158592']}, {'metric': {'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9'}, 'value': [1678862478.019, '57044992']}, {'metric': {'pod': 'ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq'}, 'value': [1678862478.019, '326418432']}, {'metric': {'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz'}, 'value': [1678862478.019, '5093326848']}, {'metric': {'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg'}, 'value': [1678862478.019, '15302656']}, {'metric': {'pod': 'ei-redis-deployment-68df56c9d5-9kt42'}, 'value': [1678862478.019, '2443460608']}, {'metric': {'pod': 'tmp-shell'}, 'value': [1678862478.019, '847872']}]
2023-03-14 23:41:18,030 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_infer_fps{namespace="default"}[2m])
2023-03-14 23:41:18,030 - INFO - metric_name is: ei_infer_fps
2023-03-14 23:41:18,030 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.42:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678862478.023, '28.431330592219087']}]
2023-03-14 23:41:18,030 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_drop_fps{namespace="default"}[2m])
2023-03-14 23:41:18,031 - INFO - metric_name is: ei_drop_fps
2023-03-14 23:41:18,031 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.42:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678862478.027, '0']}]
2023-03-14 23:41:18,031 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_scale_ratio{namespace="default"}[2m])
2023-03-14 23:41:18,031 - INFO - metric_name is: ei_scale_ratio
2023-03-14 23:41:18,031 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.42:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678862478.03, '0.9770829796748373']}]
2023-03-14 23:41:18,031 - INFO - Results written to metrics/F18D_AMX_IN8_metrics_20230314_234118.txt
2023-03-14 23:41:18,100 - INFO - sleep 120 seconds for the next round ...
2023-03-14 23:43:18,103 - INFO - -----------loop num:3/3------------
2023-03-14 23:43:28,110 - INFO - 1.  fetch_emon.sh
2023-03-14 23:43:28,111 - INFO - pwd=/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon
2023-03-14 23:43:29,945 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:43:29,945 - INFO - "ansible_facts": {
2023-03-14 23:43:29,946 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:43:29,946 - INFO - },
2023-03-14 23:43:29,946 - INFO - "changed": false,
2023-03-14 23:43:29,946 - INFO - "checksum": "1bb1c680bf42bce57bd33e9ee945d27bb8aeaafc",
2023-03-14 23:43:29,946 - INFO - "dest": "runemon.sh",
2023-03-14 23:43:29,946 - INFO - "gid": 1007,
2023-03-14 23:43:29,946 - INFO - "group": "ansible",
2023-03-14 23:43:29,946 - INFO - "mode": "0755",
2023-03-14 23:43:29,946 - INFO - "owner": "ansible",
2023-03-14 23:43:29,946 - INFO - "path": "runemon.sh",
2023-03-14 23:43:29,946 - INFO - "size": 452,
2023-03-14 23:43:29,946 - INFO - "state": "file",
2023-03-14 23:43:29,947 - INFO - "uid": 1006
2023-03-14 23:43:29,947 - INFO - }
2023-03-14 23:43:31,329 - INFO - 10.45.247.200 | SUCCESS => {
2023-03-14 23:43:31,329 - INFO - "ansible_facts": {
2023-03-14 23:43:31,330 - INFO - "discovered_interpreter_python": "/usr/bin/python3"
2023-03-14 23:43:31,330 - INFO - },
2023-03-14 23:43:31,330 - INFO - "changed": false,
2023-03-14 23:43:31,330 - INFO - "checksum": "0b7ce1d178a191ee4962273d5bcbcac8b825066d",
2023-03-14 23:43:31,330 - INFO - "dest": "sapphirerapids_server_events_private.txt",
2023-03-14 23:43:31,330 - INFO - "gid": 1007,
2023-03-14 23:43:31,330 - INFO - "group": "ansible",
2023-03-14 23:43:31,330 - INFO - "mode": "0664",
2023-03-14 23:43:31,330 - INFO - "owner": "ansible",
2023-03-14 23:43:31,330 - INFO - "path": "sapphirerapids_server_events_private.txt",
2023-03-14 23:43:31,330 - INFO - "size": 23423,
2023-03-14 23:43:31,330 - INFO - "state": "file",
2023-03-14 23:43:31,331 - INFO - "uid": 1006
2023-03-14 23:43:31,331 - INFO - }
2023-03-14 23:43:32,382 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:43:32,383 - INFO - 
2023-03-14 23:43:33,431 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:43:33,431 - INFO - 
2023-03-14 23:43:33,529 - INFO - Sleep 5 seconds then collect emon data for 30 seconds
2023-03-14 23:43:38,531 - INFO - Collecting 30 seconds sar data background
2023-03-14 23:43:40,506 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:43:40,507 - INFO - 
2023-03-14 23:43:42,576 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:43:42,576 - INFO - 
2023-03-14 23:43:44,628 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:43:44,628 - INFO - 
2023-03-14 23:43:46,681 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:43:46,681 - INFO - 
2023-03-14 23:43:46,782 - INFO - Collecting EMON data
2023-03-14 23:44:18,301 - INFO - 10.45.247.200 | CHANGED | rc=0 >>
2023-03-14 23:44:18,302 - INFO - Usage: sep_vars.sh [emon_api]
2023-03-14 23:44:18,302 - INFO - PATH=/opt/intel/sep/bin64:/opt/intel/sep/android_target:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
2023-03-14 23:44:18,302 - INFO - CPATH=/opt/intel/sep/config/emon_api:
2023-03-14 23:44:18,302 - INFO - LIBRARY_PATH=/opt/intel/sep/lib64:
2023-03-14 23:44:18,302 - INFO - LD_LIBRARY_PATH=
2023-03-14 23:44:18,302 - INFO - SEP_BASE_DIR=/opt/intel/sep/bin64
2023-03-14 23:44:18,302 - INFO - SEP is currently installed under /opt/intel/sep/bin64
2023-03-14 23:44:18,302 - INFO - EMON collector successfully stopped.
2023-03-14 23:44:18,408 - INFO - Sleep another 30 seconds to make sure the previous run exit
2023-03-14 23:44:48,412 - INFO - Copy dat files
2023-03-14 23:44:49,436 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:44:49,436 - INFO - "changed": true,
2023-03-14 23:44:49,437 - INFO - "checksum": "d82425dd7daa6e0ff81fce16f346aa3dfbd299fa",
2023-03-14 23:44:49,437 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/cpuutil.log",
2023-03-14 23:44:49,437 - INFO - "md5sum": "e68e4b8567c1c4ed06ad000136956ef7",
2023-03-14 23:44:49,437 - INFO - "remote_checksum": "d82425dd7daa6e0ff81fce16f346aa3dfbd299fa",
2023-03-14 23:44:49,437 - INFO - "remote_md5sum": null
2023-03-14 23:44:49,437 - INFO - }
2023-03-14 23:44:50,585 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:44:50,585 - INFO - "changed": true,
2023-03-14 23:44:50,586 - INFO - "checksum": "753e11e2ca5f44987bb6b8f94fef7ac25c60fd30",
2023-03-14 23:44:50,586 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/diskutil.log",
2023-03-14 23:44:50,586 - INFO - "md5sum": "65e1ec44a854773500498234589eaa1c",
2023-03-14 23:44:50,586 - INFO - "remote_checksum": "753e11e2ca5f44987bb6b8f94fef7ac25c60fd30",
2023-03-14 23:44:50,586 - INFO - "remote_md5sum": null
2023-03-14 23:44:50,586 - INFO - }
2023-03-14 23:44:51,696 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:44:51,696 - INFO - "changed": true,
2023-03-14 23:44:51,696 - INFO - "checksum": "feaf0e36323890c7ed7688d2771274c6a9b42b39",
2023-03-14 23:44:51,696 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/netutil.log",
2023-03-14 23:44:51,696 - INFO - "md5sum": "63a7c5b15de5f04258f90247cbde2f0d",
2023-03-14 23:44:51,697 - INFO - "remote_checksum": "feaf0e36323890c7ed7688d2771274c6a9b42b39",
2023-03-14 23:44:51,697 - INFO - "remote_md5sum": null
2023-03-14 23:44:51,697 - INFO - }
2023-03-14 23:44:52,844 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:44:52,844 - INFO - "changed": true,
2023-03-14 23:44:52,844 - INFO - "checksum": "847ae1c4f7cffba6ed911f18649ff125d413e0a6",
2023-03-14 23:44:52,844 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/top.log",
2023-03-14 23:44:52,844 - INFO - "md5sum": "aabc9c23b63e9f7fa453bf119fcc2f20",
2023-03-14 23:44:52,844 - INFO - "remote_checksum": "847ae1c4f7cffba6ed911f18649ff125d413e0a6",
2023-03-14 23:44:52,844 - INFO - "remote_md5sum": null
2023-03-14 23:44:52,845 - INFO - }
2023-03-14 23:44:53,937 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:44:53,937 - INFO - "changed": true,
2023-03-14 23:44:53,937 - INFO - "checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:44:53,938 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-v.dat",
2023-03-14 23:44:53,938 - INFO - "md5sum": "9ed6ca61f164c3a1ddac82b3adb8e41f",
2023-03-14 23:44:53,938 - INFO - "remote_checksum": "0eecf027044a52ff57e87a1ef1f9277e1ceb146e",
2023-03-14 23:44:53,938 - INFO - "remote_md5sum": null
2023-03-14 23:44:53,938 - INFO - }
2023-03-14 23:44:55,197 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:44:55,197 - INFO - "changed": true,
2023-03-14 23:44:55,197 - INFO - "checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:44:55,197 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon-M.dat",
2023-03-14 23:44:55,197 - INFO - "md5sum": "82b2e5d1d33c2feb6e5d5290b113dd3f",
2023-03-14 23:44:55,197 - INFO - "remote_checksum": "553de59ae1f861c17499a345947edac24f5ef5e6",
2023-03-14 23:44:55,198 - INFO - "remote_md5sum": null
2023-03-14 23:44:55,198 - INFO - }
2023-03-14 23:44:56,777 - INFO - 10.45.247.200 | CHANGED => {
2023-03-14 23:44:56,777 - INFO - "changed": true,
2023-03-14 23:44:56,777 - INFO - "checksum": "c09b59757a82ea9c6d04e02c4e4db39e1953f660",
2023-03-14 23:44:56,777 - INFO - "dest": "/home/ansible/yulu/ai_pipeline/ai_pipeline_benchmark/benchmarking/scripts/emon/emon10000/10.45.247.200/emon10000/emon.dat",
2023-03-14 23:44:56,778 - INFO - "md5sum": "a59bc0c5662f53a2551a9a6fc35511af",
2023-03-14 23:44:56,778 - INFO - "remote_checksum": "c09b59757a82ea9c6d04e02c4e4db39e1953f660",
2023-03-14 23:44:56,778 - INFO - "remote_md5sum": null
2023-03-14 23:44:56,778 - INFO - }
2023-03-14 23:44:56,870 - INFO - 2. fetch the matrics of ai_pipeline
2023-03-14 23:44:56,871 - INFO - 3.  collect the result
2023-03-14 23:44:56,995 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(rate(container_cpu_usage_seconds_total{namespace="default", container!=""}[2m])[2m:])
2023-03-14 23:44:56,995 - INFO - metric_name is: cpu_usage
2023-03-14 23:44:56,995 - INFO - result is: [{'metric': {'container': 'ei-fss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podf765b16c_07f8_4261_9b64_3517dc6bafb7.slice/cri-containerd-88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-file-stream-service:2022WW47', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '88d725ffe5a1ce389c7c711b044f1cbdd7b97a922268c6d9d0735d1ba203f048', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt', 'service': 'kubelet'}, 'value': [1678862696.989, '0.07708591944443065']}, {'metric': {'container': 'ei-gws', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podaf221d52_33c6_40a0_b6bf_e5e2bc7b88db.slice/cri-containerd-870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada.scope', 'image': 'ccr-registry.caas.intel.com/cnbench/ei-gateway-server:2022WW51-ws-8080', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '870edc8724b46c501ca89d89b821712566f2c55b1d2077b638d4cbb0f32dcada', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9', 'service': 'kubelet'}, 'value': [1678862696.989, '0.0012407027777783242']}, {'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod47fe41c3_2537_4580_a25c_ef5b47666dce.slice/cri-containerd-b2feac85d6608fba36caa50393ca4e5e9bf3d391eb8f72be124e3b0f225eb1ce.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-inference-service-tensorflow:2022WW49', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'b2feac85d6608fba36caa50393ca4e5e9bf3d391eb8f72be124e3b0f225eb1ce', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq', 'service': 'kubelet'}, 'value': [1678862696.989, '0.36327203611111114']}, {'metric': {'container': 'ei-wss', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-podd781997c_c6e4_4a9a_8814_f1a5e364edb4.slice/cri-containerd-d43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87.scope', 'image': 'gar-registry.caas.intel.com/cpio/ei-websocket-server:2022WW51', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': 'd43dd1ddebde49d8cd5407a60d348e56d9384fcda992f264ae9ca5887ba0ab87', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz', 'service': 'kubelet'}, 'value': [1678862696.989, '0.00400264722222548']}, {'metric': {'container': 'nfs-subdir-external-provisioner', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod008ca2f8_cd34_4bb5_9e75_b46ec5ce9a23.slice/cri-containerd-710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4.scope', 'image': 'k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '710ae0fcfaef79b8c1cbf5871a10727a0da4ef1ca22a1fd9e475a740588b43e4', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg', 'service': 'kubelet'}, 'value': [1678862696.989, '0.0009998111111119417']}, {'metric': {'container': 'redis', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod0d8f249f_8e44_4dae_82d3_618b15befd15.slice/cri-containerd-0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e.scope', 'image': 'docker.io/library/redis:6.0', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '0d39607a911d680151ccaee4e31a4eeb21acbade8e1a9eb7cd5377c4796e012e', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'ei-redis-deployment-68df56c9d5-9kt42', 'service': 'kubelet'}, 'value': [1678862696.989, '0.005294500000000982']}, {'metric': {'container': 'tmp-shell', 'cpu': 'total', 'endpoint': 'https-metrics', 'id': '/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod9cbe7477_0ea6_463d_8c1e_33eb5efda051.slice/cri-containerd-9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9.scope', 'image': 'docker.io/nicolaka/netshoot:latest', 'instance': '10.45.247.200:10250', 'job': 'kubelet', 'metrics_path': '/metrics/cadvisor', 'name': '9093ed8c6f94ca6b98db8362a28e0ee47cc31e863e7c131462759af96d66c3e9', 'namespace': 'default', 'node': 'ai-worker0', 'pod': 'tmp-shell', 'service': 'kubelet'}, 'value': [1678862696.989, '0']}]
2023-03-14 23:44:56,995 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=sum(container_memory_working_set_bytes{namespace="default",container!="", image!=""}) by (pod)
2023-03-14 23:44:56,995 - INFO - metric_name is: memory_usage
2023-03-14 23:44:56,995 - INFO - result is: [{'metric': {'pod': 'ei-sample-deployment-pose-bf16-amx-01-59c94bd6dd-n5rdt'}, 'value': [1678862696.991, '386134016']}, {'metric': {'pod': 'ei-gateway-server-deployment-694bf969dd-xhbg9'}, 'value': [1678862696.991, '57421824']}, {'metric': {'pod': 'ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq'}, 'value': [1678862696.991, '326434816']}, {'metric': {'pod': 'ei-websocket-server-deployment-b4f68d987-95vnz'}, 'value': [1678862696.991, '5093888000']}, {'metric': {'pod': 'nfs-subdir-external-provisioner-6f66496f8f-529tg'}, 'value': [1678862696.991, '15429632']}, {'metric': {'pod': 'ei-redis-deployment-68df56c9d5-9kt42'}, 'value': [1678862696.991, '2443538432']}, {'metric': {'pod': 'tmp-shell'}, 'value': [1678862696.991, '847872']}]
2023-03-14 23:44:56,995 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_infer_fps{namespace="default"}[2m])
2023-03-14 23:44:56,995 - INFO - metric_name is: ei_infer_fps
2023-03-14 23:44:56,996 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.42:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678862696.993, '28.370226223767634']}]
2023-03-14 23:44:56,996 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_drop_fps{namespace="default"}[2m])
2023-03-14 23:44:56,996 - INFO - metric_name is: ei_drop_fps
2023-03-14 23:44:56,996 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.42:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678862696.995, '0']}]
2023-03-14 23:44:56,996 - INFO - The query to fetch metrics from prometheus is: http://10.45.247.81:31090/api/v1/query?query=avg_over_time(ei_scale_ratio{namespace="default"}[2m])
2023-03-14 23:44:56,996 - INFO - metric_name is: ei_scale_ratio
2023-03-14 23:44:56,996 - INFO - result is: [{'metric': {'container': 'ei-infer-pose-bf16-amx-app', 'endpoint': 'web', 'instance': '10.244.120.42:8000', 'job': 'ei-infer-pose-bf16-amx-app', 'namespace': 'default', 'pod': 'ei-infer-deployment-pose-bf16-amx-01-5767795f6f-x4kjq', 'service': 'ei-infer-pose-bf16-amx-app'}, 'value': [1678862696.997, '0.9749830414322691']}]
2023-03-14 23:44:56,996 - INFO - Results written to metrics/F18D_AMX_IN8_metrics_20230314_234456.txt
2023-03-14 23:44:57,052 - INFO - Finished running all scenarios!
2023-03-20 19:00:10,744 - INFO - Starting batch deployment...
2023-03-20 19:01:46,671 - INFO - Starting batch deployment...
2023-03-20 19:02:00,611 - INFO - Starting batch deployment...
2023-03-20 19:02:00,613 - INFO - Pattern is ei-infer
2023-03-20 19:02:26,773 - INFO - Starting batch deployment...
2023-03-20 19:02:26,776 - INFO - Pattern is ei-infer
2023-03-20 19:04:08,146 - INFO - Starting batch deployment...
2023-03-20 19:04:08,148 - INFO - Pattern is : [ei-infer]
2023-03-20 19:04:08,148 - INFO - command is : kubectl get deployment | grep '${pattern}' | awk '{print $1}']
2023-03-20 19:05:23,973 - INFO - Starting batch deployment...
2023-03-20 19:05:23,976 - INFO - Pattern is : [ei-infer]
2023-03-20 19:05:23,976 - INFO - command is : kubectl get deployment | grep '${pattern}' | awk '{print $1}'
2023-03-20 19:05:46,853 - INFO - Starting batch deployment...
2023-03-20 19:05:46,855 - INFO - Pattern is : [ei-infer]
2023-03-20 19:05:46,855 - INFO - command is : kubectl get deployment | grep '${pattern}' | awk '{print $1}'
2023-03-20 19:05:46,983 - INFO - len os deployment is : 0
2023-03-20 19:06:24,196 - INFO - Starting batch deployment...
2023-03-20 19:06:24,198 - INFO - Pattern is : [ei-infer]
2023-03-20 19:06:24,198 - INFO - command is : kubectl get deployment | grep '${pattern}' | awk '{print $1}', env is : {'pattern': 'ei-infer'}
2023-03-20 19:06:24,391 - INFO - len os deployment is : 0
2023-03-20 19:07:21,092 - INFO - Starting batch deployment...
2023-03-20 19:07:21,094 - INFO - Pattern is : [ei-infer]
2023-03-20 19:07:21,094 - INFO - command is : kubectl get deployment | grep 'ei-infer' | awk '{print $1}', env is : {'pattern': 'ei-infer'}
2023-03-20 19:07:21,239 - INFO - len os deployment is : 0
2023-03-20 19:09:09,042 - INFO - Starting batch deployment...
2023-03-20 19:09:09,044 - INFO - Pattern is : [ei-infer]
2023-03-20 19:09:09,044 - INFO - command is : kubectl get deployment | grep 'ei-infer' | awk '{print $1}'
2023-03-20 19:09:09,202 - INFO - len os deployment is : 2
2023-03-20 19:09:09,202 - INFO - -- deployment is : ei-infer-deployment-pose-sample-q01
2023-03-20 19:09:09,202 - INFO - -- deployment is : ei-infer-deployment-pose-sample-q02
2023-03-20 19:09:37,451 - INFO - Starting batch deployment...
2023-03-20 19:09:37,454 - INFO - Pattern is : [ei-infer]
2023-03-20 19:09:37,454 - INFO - command is : kubectl get deployment | grep 'ei-infer' | awk '{print $1}'
2023-03-20 19:09:37,620 - INFO - len os deployment is : 2
2023-03-20 19:09:37,621 - INFO - |-deployment is : ei-infer-deployment-pose-sample-q01
2023-03-20 19:09:37,621 - INFO - |-deployment is : ei-infer-deployment-pose-sample-q02
2023-03-20 20:18:58,285 - INFO - Starting batch deployment...
2023-03-20 20:25:46,498 - INFO - Starting batch deployment...
2023-03-20 20:25:53,493 - INFO - Starting batch deployment...
2023-03-20 20:25:53,495 - INFO - Pattern is : [ei-infer]
2023-03-20 20:25:53,496 - INFO - command is : kubectl get deployment | grep 'ei-infer' | awk '{print $1}'
2023-03-20 20:25:53,815 - INFO - |-deployment is : ei-infer-deployment-pose-sample-q01
2023-03-20 20:25:53,815 - INFO - |-deployment is : ei-infer-deployment-pose-sample-q02
2023-03-21 19:44:07,957 - INFO - Starting batch deployment...
2023-03-21 19:44:08,093 - INFO - after create_dev_command, deveployment: dev1
2023-03-21 19:44:08,093 - INFO - before rollout_command, deveployment: dev1
2023-03-21 19:44:16,556 - INFO - finish rollout_command, deveployment: dev1
2023-03-21 19:44:16,688 - INFO - after create_dev_command, deveployment: dev2
2023-03-21 19:44:16,689 - INFO - before rollout_command, deveployment: dev2
2023-03-21 19:44:27,157 - INFO - finish rollout_command, deveployment: dev2
2023-03-21 19:44:27,288 - INFO - after create_dev_command, deveployment: dev3
2023-03-21 19:44:27,288 - INFO - before rollout_command, deveployment: dev3
2023-03-21 19:44:37,356 - INFO - finish rollout_command, deveployment: dev3
2023-03-21 19:53:47,070 - INFO - Starting batch deployment...
2023-03-21 19:53:47,261 - INFO - after create_dev_command, deveployment: dev1
2023-03-21 19:53:47,261 - INFO - before rollout_command, deveployment: dev1
2023-03-21 19:54:35,520 - INFO - Starting batch deployment...
2023-03-21 19:55:26,673 - INFO - Starting batch deployment...
2023-03-21 19:55:26,802 - INFO - after create_dev_command, deveployment: dev1
2023-03-21 19:55:26,802 - INFO - before rollout_command, deveployment: dev1
2023-03-21 19:55:26,967 - INFO - Waiting for deployment "dev1" rollout to finish: 0 of 10 updated replicas are available...
2023-03-21 19:55:34,624 - INFO - Waiting for deployment "dev1" rollout to finish: 1 of 10 updated replicas are available...
2023-03-21 19:55:35,031 - INFO - Waiting for deployment "dev1" rollout to finish: 2 of 10 updated replicas are available...
2023-03-21 19:55:35,420 - INFO - Waiting for deployment "dev1" rollout to finish: 3 of 10 updated replicas are available...
2023-03-21 19:55:35,819 - INFO - Waiting for deployment "dev1" rollout to finish: 4 of 10 updated replicas are available...
2023-03-21 19:55:36,220 - INFO - Waiting for deployment "dev1" rollout to finish: 5 of 10 updated replicas are available...
2023-03-21 19:55:36,620 - INFO - Waiting for deployment "dev1" rollout to finish: 6 of 10 updated replicas are available...
2023-03-21 19:55:37,022 - INFO - Waiting for deployment "dev1" rollout to finish: 7 of 10 updated replicas are available...
2023-03-21 19:55:37,420 - INFO - Waiting for deployment "dev1" rollout to finish: 8 of 10 updated replicas are available...
2023-03-21 19:55:37,819 - INFO - Waiting for deployment "dev1" rollout to finish: 9 of 10 updated replicas are available...
2023-03-21 19:55:38,221 - INFO - deployment "dev1" successfully rolled out
2023-03-21 19:55:38,229 - INFO - finish rollout_command, deveployment: dev1
2023-03-21 19:55:38,361 - INFO - after create_dev_command, deveployment: dev2
2023-03-21 19:55:38,362 - INFO - before rollout_command, deveployment: dev2
2023-03-21 19:55:38,502 - INFO - Waiting for deployment "dev2" rollout to finish: 0 of 10 updated replicas are available...
2023-03-21 19:55:44,220 - INFO - Waiting for deployment "dev2" rollout to finish: 1 of 10 updated replicas are available...
2023-03-21 19:55:44,620 - INFO - Waiting for deployment "dev2" rollout to finish: 2 of 10 updated replicas are available...
2023-03-21 19:55:45,019 - INFO - Waiting for deployment "dev2" rollout to finish: 3 of 10 updated replicas are available...
2023-03-21 19:55:45,620 - INFO - Waiting for deployment "dev2" rollout to finish: 4 of 10 updated replicas are available...
2023-03-21 19:55:46,019 - INFO - Waiting for deployment "dev2" rollout to finish: 5 of 10 updated replicas are available...
2023-03-21 19:55:47,226 - INFO - Waiting for deployment "dev2" rollout to finish: 6 of 10 updated replicas are available...
2023-03-21 19:55:47,618 - INFO - Waiting for deployment "dev2" rollout to finish: 7 of 10 updated replicas are available...
2023-03-21 19:55:48,220 - INFO - Waiting for deployment "dev2" rollout to finish: 8 of 10 updated replicas are available...
2023-03-21 19:55:48,822 - INFO - Waiting for deployment "dev2" rollout to finish: 9 of 10 updated replicas are available...
2023-03-21 19:55:49,219 - INFO - deployment "dev2" successfully rolled out
2023-03-21 19:55:49,226 - INFO - finish rollout_command, deveployment: dev2
2023-03-21 19:55:49,350 - INFO - after create_dev_command, deveployment: dev3
2023-03-21 19:55:49,351 - INFO - before rollout_command, deveployment: dev3
2023-03-21 19:55:49,540 - INFO - Waiting for deployment "dev3" rollout to finish: 0 of 10 updated replicas are available...
2023-03-21 19:55:55,422 - INFO - Waiting for deployment "dev3" rollout to finish: 1 of 10 updated replicas are available...
2023-03-21 19:55:55,819 - INFO - Waiting for deployment "dev3" rollout to finish: 2 of 10 updated replicas are available...
2023-03-21 19:55:56,220 - INFO - Waiting for deployment "dev3" rollout to finish: 3 of 10 updated replicas are available...
2023-03-21 19:55:56,820 - INFO - Waiting for deployment "dev3" rollout to finish: 4 of 10 updated replicas are available...
2023-03-21 19:55:57,220 - INFO - Waiting for deployment "dev3" rollout to finish: 5 of 10 updated replicas are available...
2023-03-21 19:55:57,620 - INFO - Waiting for deployment "dev3" rollout to finish: 6 of 10 updated replicas are available...
2023-03-21 19:55:58,018 - INFO - Waiting for deployment "dev3" rollout to finish: 7 of 10 updated replicas are available...
2023-03-21 19:55:58,420 - INFO - Waiting for deployment "dev3" rollout to finish: 8 of 10 updated replicas are available...
2023-03-21 19:55:58,820 - INFO - Waiting for deployment "dev3" rollout to finish: 9 of 10 updated replicas are available...
2023-03-21 19:55:59,220 - INFO - deployment "dev3" successfully rolled out
2023-03-21 19:55:59,228 - INFO - finish rollout_command, deveployment: dev3
2023-03-29 02:28:07,008 - INFO - Starting batch deployment...
2023-03-29 02:28:07,009 - INFO - the arguments: Namespace(template_path='../conf/infer_deploy_multi_queue.yaml', infer_type='pose-sample', begin_num=1, end_num=2, log_file='../logs/batch_deploy.log', dry_run=False)
2023-03-29 02:28:07,015 - INFO - create_deployment=======> infer_suffix: pose-sample-q01, args.template_path:../conf/infer_deploy_multi_queue.yaml,index:1
2023-03-29 02:28:15,875 - INFO - Starting batch deployment...
2023-03-29 02:28:15,875 - INFO - the arguments: Namespace(template_path='../conf/infer_deploy_multi_queue.yaml', infer_type='pose-sample', begin_num=2, end_num=2, log_file='../logs/batch_deploy.log', dry_run=False)
2023-03-29 02:28:15,882 - INFO - create_deployment=======> infer_suffix: pose-sample-q02, args.template_path:../conf/infer_deploy_multi_queue.yaml,index:2
2023-03-29 02:28:15,917 - INFO - before rollout_command, deveployment: ei-infer-deployment-pose-sample-q02
2023-03-29 02:28:16,050 - INFO - Waiting for deployment "ei-infer-deployment-pose-sample-q02" rollout to finish: 0 of 1 updated replicas are available...
